<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Type.BetaNBE</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Markup">\begin{code}</a>
<a id="14" class="Keyword">module</a> <a id="21" href="Type.BetaNBE.html" class="Module">Type.BetaNBE</a> <a id="34" class="Keyword">where</a>
<a id="40" class="Markup">\end{code}</a><a id="50" class="Background">

## Imports

</a><a id="64" class="Markup">\begin{code}</a>
<a id="77" class="Keyword">open</a> <a id="82" class="Keyword">import</a> <a id="89" href="Type.html" class="Module">Type</a>
<a id="94" class="Keyword">open</a> <a id="99" class="Keyword">import</a> <a id="106" href="Type.BetaNormal.html" class="Module">Type.BetaNormal</a>
<a id="122" class="Keyword">open</a> <a id="127" class="Keyword">import</a> <a id="134" href="Type.RenamingSubstitution.html" class="Module">Type.RenamingSubstitution</a>
<a id="160" class="Keyword">open</a> <a id="165" class="Keyword">import</a> <a id="172" href="Type.Equality.html" class="Module">Type.Equality</a>

<a id="187" class="Keyword">open</a> <a id="192" class="Keyword">import</a> <a id="199" href="Function.html" class="Module">Function</a>
<a id="208" class="Keyword">open</a> <a id="213" class="Keyword">import</a> <a id="220" href="Data.Sum.html" class="Module">Data.Sum</a>
<a id="229" class="Keyword">open</a> <a id="234" class="Keyword">import</a> <a id="241" href="Data.Empty.html" class="Module">Data.Empty</a>
<a id="252" class="Keyword">open</a> <a id="257" class="Keyword">import</a> <a id="264" href="Data.Product.html" class="Module">Data.Product</a>
<a id="277" class="Keyword">open</a> <a id="282" class="Keyword">import</a> <a id="289" href="Data.String.html" class="Module">Data.String</a>

<a id="302" class="Keyword">open</a> <a id="307" class="Keyword">import</a> <a id="314" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="352" class="Keyword">hiding</a> <a id="359" class="Symbol">(</a><a id="360" href="Relation.Binary.PropositionalEquality.html#3819" class="InductiveConstructor Operator">[_]</a><a id="363" class="Symbol">;</a> <a id="365" href="Relation.Binary.PropositionalEquality.Core.html#1076" class="Function">subst</a><a id="370" class="Symbol">)</a>
<a id="372" class="Markup">\end{code}</a><a id="382" class="Background">

Values are defined by induction on kind. At kind # and * they are
inert and defined to be just normal forms. At function kind they are
either neutral or Kripke functions

</a><a id="555" class="Markup">\begin{code}</a>
<a id="Val"></a><a id="568" href="Type.BetaNBE.html#568" class="Function">Val</a> <a id="572" class="Symbol">:</a> <a id="574" href="Type.html#962" class="Datatype">Ctx⋆</a> <a id="579" class="Symbol">→</a> <a id="581" href="Type.html#596" class="Datatype">Kind</a> <a id="586" class="Symbol">→</a> <a id="588" class="PrimitiveType">Set</a>
<a id="592" href="Type.BetaNBE.html#568" class="Function">Val</a> <a id="596" href="Type.BetaNBE.html#596" class="Bound">Φ</a> <a id="598" href="Type.html#615" class="InductiveConstructor">*</a>       <a id="606" class="Symbol">=</a> <a id="608" href="Type.BetaNBE.html#596" class="Bound">Φ</a> <a id="610" href="Type.BetaNormal.html#860" class="Datatype Operator">⊢Nf⋆</a> <a id="615" href="Type.html#615" class="InductiveConstructor">*</a>
<a id="617" href="Type.BetaNBE.html#568" class="Function">Val</a> <a id="621" href="Type.BetaNBE.html#621" class="Bound">Φ</a> <a id="623" class="Symbol">(</a><a id="624" href="Type.BetaNBE.html#624" class="Bound">σ</a> <a id="626" href="Type.html#650" class="InductiveConstructor Operator">⇒</a> <a id="628" href="Type.BetaNBE.html#628" class="Bound">τ</a><a id="629" class="Symbol">)</a> <a id="631" class="Symbol">=</a> <a id="633" href="Type.BetaNBE.html#621" class="Bound">Φ</a> <a id="635" href="Type.BetaNormal.html#893" class="Datatype Operator">⊢Ne⋆</a> <a id="640" class="Symbol">(</a><a id="641" href="Type.BetaNBE.html#624" class="Bound">σ</a> <a id="643" href="Type.html#650" class="InductiveConstructor Operator">⇒</a> <a id="645" href="Type.BetaNBE.html#628" class="Bound">τ</a><a id="646" class="Symbol">)</a> <a id="648" href="Data.Sum.Base.html#728" class="Datatype Operator">⊎</a> <a id="650" class="Symbol">∀</a> <a id="652" class="Symbol">{</a><a id="653" href="Type.BetaNBE.html#653" class="Bound">Ψ</a><a id="654" class="Symbol">}</a> <a id="656" class="Symbol">→</a> <a id="658" href="Type.RenamingSubstitution.html#377" class="Function">Ren</a> <a id="662" href="Type.BetaNBE.html#621" class="Bound">Φ</a> <a id="664" href="Type.BetaNBE.html#653" class="Bound">Ψ</a> <a id="666" class="Symbol">→</a> <a id="668" href="Type.BetaNBE.html#568" class="Function">Val</a> <a id="672" href="Type.BetaNBE.html#653" class="Bound">Ψ</a> <a id="674" href="Type.BetaNBE.html#624" class="Bound">σ</a> <a id="676" class="Symbol">→</a> <a id="678" href="Type.BetaNBE.html#568" class="Function">Val</a> <a id="682" href="Type.BetaNBE.html#653" class="Bound">Ψ</a> <a id="684" href="Type.BetaNBE.html#628" class="Bound">τ</a>
<a id="686" class="Markup">\end{code}</a><a id="696" class="Background">

We can embed neutral terms into values at any kind using reflect.
reflect is quite simple in this version of NBE and not mutually
defined with reify.

</a><a id="849" class="Markup">\begin{code}</a>
<a id="reflect"></a><a id="862" href="Type.BetaNBE.html#862" class="Function">reflect</a> <a id="870" class="Symbol">:</a> <a id="872" class="Symbol">∀{</a><a id="874" href="Type.BetaNBE.html#874" class="Bound">Φ</a> <a id="876" href="Type.BetaNBE.html#876" class="Bound">σ</a><a id="877" class="Symbol">}</a> <a id="879" class="Symbol">→</a> <a id="881" href="Type.BetaNBE.html#874" class="Bound">Φ</a> <a id="883" href="Type.BetaNormal.html#893" class="Datatype Operator">⊢Ne⋆</a> <a id="888" href="Type.BetaNBE.html#876" class="Bound">σ</a> <a id="890" class="Symbol">→</a> <a id="892" href="Type.BetaNBE.html#568" class="Function">Val</a> <a id="896" href="Type.BetaNBE.html#874" class="Bound">Φ</a> <a id="898" href="Type.BetaNBE.html#876" class="Bound">σ</a>
<a id="900" href="Type.BetaNBE.html#862" class="Function">reflect</a> <a id="908" class="Symbol">{</a><a id="909" class="Argument">σ</a> <a id="911" class="Symbol">=</a> <a id="913" href="Type.html#615" class="InductiveConstructor">*</a><a id="914" class="Symbol">}</a>     <a id="920" href="Type.BetaNBE.html#920" class="Bound">n</a> <a id="922" class="Symbol">=</a> <a id="924" href="Type.BetaNormal.html#1305" class="InductiveConstructor">ne</a> <a id="927" href="Type.BetaNBE.html#920" class="Bound">n</a>
<a id="929" href="Type.BetaNBE.html#862" class="Function">reflect</a> <a id="937" class="Symbol">{</a><a id="938" class="Argument">σ</a> <a id="940" class="Symbol">=</a> <a id="942" href="Type.BetaNBE.html#942" class="Bound">σ</a> <a id="944" href="Type.html#650" class="InductiveConstructor Operator">⇒</a> <a id="946" href="Type.BetaNBE.html#946" class="Bound">τ</a><a id="947" class="Symbol">}</a> <a id="949" href="Type.BetaNBE.html#949" class="Bound">n</a> <a id="951" class="Symbol">=</a> <a id="953" href="Data.Sum.Base.html#778" class="InductiveConstructor">inj₁</a> <a id="958" href="Type.BetaNBE.html#949" class="Bound">n</a>
<a id="960" class="Markup">\end{code}</a><a id="970" class="Background">

A shorthand for creating a new fresh variable as a value which we need
in reify

</a><a id="1053" class="Markup">\begin{code}</a>
<a id="fresh"></a><a id="1066" href="Type.BetaNBE.html#1066" class="Function">fresh</a> <a id="1072" class="Symbol">:</a> <a id="1074" class="Symbol">∀</a> <a id="1076" class="Symbol">{</a><a id="1077" href="Type.BetaNBE.html#1077" class="Bound">Φ</a> <a id="1079" href="Type.BetaNBE.html#1079" class="Bound">σ</a><a id="1080" class="Symbol">}</a> <a id="1082" class="Symbol">→</a> <a id="1084" href="Type.BetaNBE.html#568" class="Function">Val</a> <a id="1088" class="Symbol">(</a><a id="1089" href="Type.BetaNBE.html#1077" class="Bound">Φ</a> <a id="1091" href="Type.html#992" class="InductiveConstructor Operator">,⋆</a> <a id="1094" href="Type.BetaNBE.html#1079" class="Bound">σ</a><a id="1095" class="Symbol">)</a> <a id="1097" href="Type.BetaNBE.html#1079" class="Bound">σ</a>
<a id="1099" href="Type.BetaNBE.html#1066" class="Function">fresh</a> <a id="1105" class="Symbol">=</a> <a id="1107" href="Type.BetaNBE.html#862" class="Function">reflect</a> <a id="1115" class="Symbol">(</a><a id="1116" href="Type.BetaNormal.html#928" class="InductiveConstructor">`</a> <a id="1118" href="Type.html#1347" class="InductiveConstructor">Z</a><a id="1119" class="Symbol">)</a>
<a id="1121" class="Markup">\end{code}</a><a id="1131" class="Background">

Renaming for values

</a><a id="1154" class="Markup">\begin{code}</a>
<a id="renVal"></a><a id="1167" href="Type.BetaNBE.html#1167" class="Function">renVal</a> <a id="1174" class="Symbol">:</a> <a id="1176" class="Symbol">∀</a> <a id="1178" class="Symbol">{</a><a id="1179" href="Type.BetaNBE.html#1179" class="Bound">σ</a> <a id="1181" href="Type.BetaNBE.html#1181" class="Bound">Φ</a> <a id="1183" href="Type.BetaNBE.html#1183" class="Bound">Ψ</a><a id="1184" class="Symbol">}</a> <a id="1186" class="Symbol">→</a> <a id="1188" href="Type.RenamingSubstitution.html#377" class="Function">Ren</a> <a id="1192" href="Type.BetaNBE.html#1181" class="Bound">Φ</a> <a id="1194" href="Type.BetaNBE.html#1183" class="Bound">Ψ</a> <a id="1196" class="Symbol">→</a> <a id="1198" href="Type.BetaNBE.html#568" class="Function">Val</a> <a id="1202" href="Type.BetaNBE.html#1181" class="Bound">Φ</a> <a id="1204" href="Type.BetaNBE.html#1179" class="Bound">σ</a> <a id="1206" class="Symbol">→</a> <a id="1208" href="Type.BetaNBE.html#568" class="Function">Val</a> <a id="1212" href="Type.BetaNBE.html#1183" class="Bound">Ψ</a> <a id="1214" href="Type.BetaNBE.html#1179" class="Bound">σ</a>
<a id="1216" href="Type.BetaNBE.html#1167" class="Function">renVal</a> <a id="1223" class="Symbol">{</a><a id="1224" href="Type.html#615" class="InductiveConstructor">*</a><a id="1225" class="Symbol">}</a>     <a id="1231" href="Type.BetaNBE.html#1231" class="Bound">ψ</a> <a id="1233" href="Type.BetaNBE.html#1233" class="Bound">n</a>        <a id="1242" class="Symbol">=</a> <a id="1244" href="Type.BetaNormal.html#1674" class="Function">renNf</a> <a id="1250" href="Type.BetaNBE.html#1231" class="Bound">ψ</a> <a id="1252" href="Type.BetaNBE.html#1233" class="Bound">n</a>
<a id="1254" href="Type.BetaNBE.html#1167" class="Function">renVal</a> <a id="1261" class="Symbol">{</a><a id="1262" href="Type.BetaNBE.html#1262" class="Bound">σ</a> <a id="1264" href="Type.html#650" class="InductiveConstructor Operator">⇒</a> <a id="1266" href="Type.BetaNBE.html#1266" class="Bound">τ</a><a id="1267" class="Symbol">}</a> <a id="1269" href="Type.BetaNBE.html#1269" class="Bound">ψ</a> <a id="1271" class="Symbol">(</a><a id="1272" href="Data.Sum.Base.html#778" class="InductiveConstructor">inj₁</a> <a id="1277" href="Type.BetaNBE.html#1277" class="Bound">n</a><a id="1278" class="Symbol">)</a> <a id="1280" class="Symbol">=</a> <a id="1282" href="Data.Sum.Base.html#778" class="InductiveConstructor">inj₁</a> <a id="1287" class="Symbol">(</a><a id="1288" href="Type.BetaNormal.html#1770" class="Function">renNe</a> <a id="1294" href="Type.BetaNBE.html#1269" class="Bound">ψ</a> <a id="1296" href="Type.BetaNBE.html#1277" class="Bound">n</a><a id="1297" class="Symbol">)</a>
<a id="1299" href="Type.BetaNBE.html#1167" class="Function">renVal</a> <a id="1306" class="Symbol">{</a><a id="1307" href="Type.BetaNBE.html#1307" class="Bound">σ</a> <a id="1309" href="Type.html#650" class="InductiveConstructor Operator">⇒</a> <a id="1311" href="Type.BetaNBE.html#1311" class="Bound">τ</a><a id="1312" class="Symbol">}</a> <a id="1314" href="Type.BetaNBE.html#1314" class="Bound">ψ</a> <a id="1316" class="Symbol">(</a><a id="1317" href="Data.Sum.Base.html#803" class="InductiveConstructor">inj₂</a> <a id="1322" href="Type.BetaNBE.html#1322" class="Bound">f</a><a id="1323" class="Symbol">)</a> <a id="1325" class="Symbol">=</a> <a id="1327" href="Data.Sum.Base.html#803" class="InductiveConstructor">inj₂</a> <a id="1332" class="Symbol">λ</a> <a id="1334" href="Type.BetaNBE.html#1334" class="Bound">ρ&#39;</a> <a id="1337" class="Symbol">→</a>  <a id="1340" href="Type.BetaNBE.html#1322" class="Bound">f</a> <a id="1342" class="Symbol">(</a><a id="1343" href="Type.BetaNBE.html#1334" class="Bound">ρ&#39;</a> <a id="1346" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="1348" href="Type.BetaNBE.html#1314" class="Bound">ψ</a><a id="1349" class="Symbol">)</a>
<a id="1351" class="Markup">\end{code}</a><a id="1361" class="Background">

Weakening for values

</a><a id="1385" class="Markup">\begin{code}</a>
<a id="weakenVal"></a><a id="1398" href="Type.BetaNBE.html#1398" class="Function">weakenVal</a> <a id="1408" class="Symbol">:</a> <a id="1410" class="Symbol">∀</a> <a id="1412" class="Symbol">{</a><a id="1413" href="Type.BetaNBE.html#1413" class="Bound">σ</a> <a id="1415" href="Type.BetaNBE.html#1415" class="Bound">Φ</a> <a id="1417" href="Type.BetaNBE.html#1417" class="Bound">K</a><a id="1418" class="Symbol">}</a> <a id="1420" class="Symbol">→</a> <a id="1422" href="Type.BetaNBE.html#568" class="Function">Val</a> <a id="1426" href="Type.BetaNBE.html#1415" class="Bound">Φ</a> <a id="1428" href="Type.BetaNBE.html#1413" class="Bound">σ</a> <a id="1430" class="Symbol">→</a> <a id="1432" href="Type.BetaNBE.html#568" class="Function">Val</a> <a id="1436" class="Symbol">(</a><a id="1437" href="Type.BetaNBE.html#1415" class="Bound">Φ</a> <a id="1439" href="Type.html#992" class="InductiveConstructor Operator">,⋆</a> <a id="1442" href="Type.BetaNBE.html#1417" class="Bound">K</a><a id="1443" class="Symbol">)</a> <a id="1445" href="Type.BetaNBE.html#1413" class="Bound">σ</a>
<a id="1447" href="Type.BetaNBE.html#1398" class="Function">weakenVal</a> <a id="1457" class="Symbol">=</a> <a id="1459" href="Type.BetaNBE.html#1167" class="Function">renVal</a> <a id="1466" href="Type.html#1400" class="InductiveConstructor">S</a>
<a id="1468" class="Markup">\end{code}</a><a id="1478" class="Background">

Reify takes a value and yields a normal form.

</a><a id="1527" class="Markup">\begin{code}</a>
<a id="reify"></a><a id="1540" href="Type.BetaNBE.html#1540" class="Function">reify</a> <a id="1546" class="Symbol">:</a> <a id="1548" class="Symbol">∀</a> <a id="1550" class="Symbol">{</a><a id="1551" href="Type.BetaNBE.html#1551" class="Bound">σ</a> <a id="1553" href="Type.BetaNBE.html#1553" class="Bound">Φ</a><a id="1554" class="Symbol">}</a> <a id="1556" class="Symbol">→</a> <a id="1558" href="Type.BetaNBE.html#568" class="Function">Val</a> <a id="1562" href="Type.BetaNBE.html#1553" class="Bound">Φ</a> <a id="1564" href="Type.BetaNBE.html#1551" class="Bound">σ</a> <a id="1566" class="Symbol">→</a> <a id="1568" href="Type.BetaNBE.html#1553" class="Bound">Φ</a> <a id="1570" href="Type.BetaNormal.html#860" class="Datatype Operator">⊢Nf⋆</a> <a id="1575" href="Type.BetaNBE.html#1551" class="Bound">σ</a>
<a id="1577" href="Type.BetaNBE.html#1540" class="Function">reify</a> <a id="1583" class="Symbol">{</a><a id="1584" href="Type.html#615" class="InductiveConstructor">*</a><a id="1585" class="Symbol">}</a>     <a id="1591" href="Type.BetaNBE.html#1591" class="Bound">n</a>         <a id="1601" class="Symbol">=</a> <a id="1603" href="Type.BetaNBE.html#1591" class="Bound">n</a>
<a id="1605" href="Type.BetaNBE.html#1540" class="Function">reify</a> <a id="1611" class="Symbol">{</a><a id="1612" href="Type.BetaNBE.html#1612" class="Bound">σ</a> <a id="1614" href="Type.html#650" class="InductiveConstructor Operator">⇒</a> <a id="1616" href="Type.BetaNBE.html#1616" class="Bound">τ</a><a id="1617" class="Symbol">}</a> <a id="1619" class="Symbol">(</a><a id="1620" href="Data.Sum.Base.html#778" class="InductiveConstructor">inj₁</a> <a id="1625" href="Type.BetaNBE.html#1625" class="Bound">n</a><a id="1626" class="Symbol">)</a>  <a id="1629" class="Symbol">=</a> <a id="1631" href="Type.BetaNormal.html#1305" class="InductiveConstructor">ne</a> <a id="1634" href="Type.BetaNBE.html#1625" class="Bound">n</a>
<a id="1636" href="Type.BetaNBE.html#1540" class="Function">reify</a> <a id="1642" class="Symbol">{</a><a id="1643" href="Type.BetaNBE.html#1643" class="Bound">σ</a> <a id="1645" href="Type.html#650" class="InductiveConstructor Operator">⇒</a> <a id="1647" href="Type.BetaNBE.html#1647" class="Bound">τ</a><a id="1648" class="Symbol">}</a> <a id="1650" class="Symbol">(</a><a id="1651" href="Data.Sum.Base.html#803" class="InductiveConstructor">inj₂</a> <a id="1656" href="Type.BetaNBE.html#1656" class="Bound">f</a><a id="1657" class="Symbol">)</a>  <a id="1660" class="Symbol">=</a> <a id="1662" href="Type.BetaNormal.html#1228" class="InductiveConstructor">ƛ</a> <a id="1664" class="Symbol">(</a><a id="1665" href="Type.BetaNBE.html#1540" class="Function">reify</a> <a id="1671" class="Symbol">(</a><a id="1672" href="Type.BetaNBE.html#1656" class="Bound">f</a> <a id="1674" href="Type.html#1400" class="InductiveConstructor">S</a> <a id="1676" href="Type.BetaNBE.html#1066" class="Function">fresh</a><a id="1681" class="Symbol">))</a> <a id="1684" class="Comment">-- has a name been lost here?</a>
<a id="1714" class="Markup">\end{code}</a><a id="1724" class="Background">

An environment is a mapping from variables to values

</a><a id="1780" class="Markup">\begin{code}</a>
<a id="Env"></a><a id="1793" href="Type.BetaNBE.html#1793" class="Function">Env</a> <a id="1797" class="Symbol">:</a> <a id="1799" href="Type.html#962" class="Datatype">Ctx⋆</a> <a id="1804" class="Symbol">→</a> <a id="1806" href="Type.html#962" class="Datatype">Ctx⋆</a> <a id="1811" class="Symbol">→</a> <a id="1813" class="PrimitiveType">Set</a>
<a id="1817" href="Type.BetaNBE.html#1793" class="Function">Env</a> <a id="1821" href="Type.BetaNBE.html#1821" class="Bound">Ψ</a> <a id="1823" href="Type.BetaNBE.html#1823" class="Bound">Φ</a> <a id="1825" class="Symbol">=</a> <a id="1827" class="Symbol">∀{</a><a id="1829" href="Type.BetaNBE.html#1829" class="Bound">J</a><a id="1830" class="Symbol">}</a> <a id="1832" class="Symbol">→</a> <a id="1834" href="Type.BetaNBE.html#1821" class="Bound">Ψ</a> <a id="1836" href="Type.html#1313" class="Datatype Operator">∋⋆</a> <a id="1839" href="Type.BetaNBE.html#1829" class="Bound">J</a> <a id="1841" class="Symbol">→</a> <a id="1843" href="Type.BetaNBE.html#568" class="Function">Val</a> <a id="1847" href="Type.BetaNBE.html#1823" class="Bound">Φ</a> <a id="1849" href="Type.BetaNBE.html#1829" class="Bound">J</a>
<a id="1851" class="Markup">\end{code}</a><a id="1861" class="Background">

&#39;cons&#39; for environments

</a><a id="1888" class="Markup">\begin{code}</a>
<a id="_,,⋆_"></a><a id="1901" href="Type.BetaNBE.html#1901" class="Function Operator">_,,⋆_</a> <a id="1907" class="Symbol">:</a> <a id="1909" class="Symbol">∀{</a><a id="1911" href="Type.BetaNBE.html#1911" class="Bound">Ψ</a> <a id="1913" href="Type.BetaNBE.html#1913" class="Bound">Φ</a><a id="1914" class="Symbol">}</a> <a id="1916" class="Symbol">→</a> <a id="1918" class="Symbol">(</a><a id="1919" href="Type.BetaNBE.html#1919" class="Bound">σ</a> <a id="1921" class="Symbol">:</a> <a id="1923" href="Type.BetaNBE.html#1793" class="Function">Env</a> <a id="1927" href="Type.BetaNBE.html#1913" class="Bound">Φ</a> <a id="1929" href="Type.BetaNBE.html#1911" class="Bound">Ψ</a><a id="1930" class="Symbol">)</a> <a id="1932" class="Symbol">→</a> <a id="1934" class="Symbol">∀{</a><a id="1936" href="Type.BetaNBE.html#1936" class="Bound">K</a><a id="1937" class="Symbol">}(</a><a id="1939" href="Type.BetaNBE.html#1939" class="Bound">A</a> <a id="1941" class="Symbol">:</a> <a id="1943" href="Type.BetaNBE.html#568" class="Function">Val</a> <a id="1947" href="Type.BetaNBE.html#1911" class="Bound">Ψ</a> <a id="1949" href="Type.BetaNBE.html#1936" class="Bound">K</a><a id="1950" class="Symbol">)</a> <a id="1952" class="Symbol">→</a> <a id="1954" href="Type.BetaNBE.html#1793" class="Function">Env</a> <a id="1958" class="Symbol">(</a><a id="1959" href="Type.BetaNBE.html#1913" class="Bound">Φ</a> <a id="1961" href="Type.html#992" class="InductiveConstructor Operator">,⋆</a> <a id="1964" href="Type.BetaNBE.html#1936" class="Bound">K</a><a id="1965" class="Symbol">)</a> <a id="1967" href="Type.BetaNBE.html#1911" class="Bound">Ψ</a>
<a id="1969" class="Symbol">(</a><a id="1970" href="Type.BetaNBE.html#1970" class="Bound">σ</a> <a id="1972" href="Type.BetaNBE.html#1901" class="Function Operator">,,⋆</a> <a id="1976" href="Type.BetaNBE.html#1976" class="Bound">A</a><a id="1977" class="Symbol">)</a> <a id="1979" href="Type.html#1347" class="InductiveConstructor">Z</a>     <a id="1985" class="Symbol">=</a> <a id="1987" href="Type.BetaNBE.html#1976" class="Bound">A</a>
<a id="1989" class="Symbol">(</a><a id="1990" href="Type.BetaNBE.html#1990" class="Bound">σ</a> <a id="1992" href="Type.BetaNBE.html#1901" class="Function Operator">,,⋆</a> <a id="1996" href="Type.BetaNBE.html#1996" class="Bound">A</a><a id="1997" class="Symbol">)</a> <a id="1999" class="Symbol">(</a><a id="2000" href="Type.html#1400" class="InductiveConstructor">S</a> <a id="2002" href="Type.BetaNBE.html#2002" class="Bound">α</a><a id="2003" class="Symbol">)</a> <a id="2005" class="Symbol">=</a> <a id="2007" href="Type.BetaNBE.html#1990" class="Bound">σ</a> <a id="2009" href="Type.BetaNBE.html#2002" class="Bound">α</a>
<a id="2011" class="Markup">\end{code}</a><a id="2021" class="Background">

</a><a id="2023" class="Markup">\begin{code}</a>
<a id="exte"></a><a id="2036" href="Type.BetaNBE.html#2036" class="Function">exte</a> <a id="2041" class="Symbol">:</a> <a id="2043" class="Symbol">∀</a> <a id="2045" class="Symbol">{</a><a id="2046" href="Type.BetaNBE.html#2046" class="Bound">Φ</a> <a id="2048" href="Type.BetaNBE.html#2048" class="Bound">Ψ</a><a id="2049" class="Symbol">}</a> <a id="2051" class="Symbol">→</a> <a id="2053" href="Type.BetaNBE.html#1793" class="Function">Env</a> <a id="2057" href="Type.BetaNBE.html#2046" class="Bound">Φ</a> <a id="2059" href="Type.BetaNBE.html#2048" class="Bound">Ψ</a> <a id="2061" class="Symbol">→</a> <a id="2063" class="Symbol">(∀</a> <a id="2066" class="Symbol">{</a><a id="2067" href="Type.BetaNBE.html#2067" class="Bound">K</a><a id="2068" class="Symbol">}</a> <a id="2070" class="Symbol">→</a> <a id="2072" href="Type.BetaNBE.html#1793" class="Function">Env</a> <a id="2076" class="Symbol">(</a><a id="2077" href="Type.BetaNBE.html#2046" class="Bound">Φ</a> <a id="2079" href="Type.html#992" class="InductiveConstructor Operator">,⋆</a> <a id="2082" href="Type.BetaNBE.html#2067" class="Bound">K</a><a id="2083" class="Symbol">)</a> <a id="2085" class="Symbol">(</a><a id="2086" href="Type.BetaNBE.html#2048" class="Bound">Ψ</a> <a id="2088" href="Type.html#992" class="InductiveConstructor Operator">,⋆</a> <a id="2091" href="Type.BetaNBE.html#2067" class="Bound">K</a><a id="2092" class="Symbol">))</a>
<a id="2095" href="Type.BetaNBE.html#2036" class="Function">exte</a> <a id="2100" href="Type.BetaNBE.html#2100" class="Bound">η</a> <a id="2102" class="Symbol">=</a> <a id="2104" class="Symbol">(</a><a id="2105" href="Type.BetaNBE.html#1398" class="Function">weakenVal</a> <a id="2115" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="2117" href="Type.BetaNBE.html#2100" class="Bound">η</a><a id="2118" class="Symbol">)</a> <a id="2120" href="Type.BetaNBE.html#1901" class="Function Operator">,,⋆</a> <a id="2124" href="Type.BetaNBE.html#1066" class="Function">fresh</a>
<a id="2130" class="Comment">{-
-- this version would be more analogous to ext and exts but would
-- require changing some proofs for terms
exte η Z      = fresh
exte η (S α)  = weakenVal (η α)
-}</a>
<a id="2298" class="Markup">\end{code}</a><a id="2308" class="Background">


Application for values. As values at function type can be semantic
functions or neutral terms we need this function to unpack them. If
the function is neutral we create a neutral application by reifying
the value and applying the neutral application constructor, then we
refect the neutral application into a value. If the function is a
semantic function we apply it to the identity renaming and then to
the argument. In this case, the function and argument are in the same
context so we do not need the Kripke extension, hence the identity
renaming.

</a><a id="2863" class="Markup">\begin{code}</a>
<a id="_·V_"></a><a id="2876" href="Type.BetaNBE.html#2876" class="Function Operator">_·V_</a> <a id="2881" class="Symbol">:</a> <a id="2883" class="Symbol">∀{</a><a id="2885" href="Type.BetaNBE.html#2885" class="Bound">Φ</a> <a id="2887" href="Type.BetaNBE.html#2887" class="Bound">K</a> <a id="2889" href="Type.BetaNBE.html#2889" class="Bound">J</a><a id="2890" class="Symbol">}</a> <a id="2892" class="Symbol">→</a> <a id="2894" href="Type.BetaNBE.html#568" class="Function">Val</a> <a id="2898" href="Type.BetaNBE.html#2885" class="Bound">Φ</a> <a id="2900" class="Symbol">(</a><a id="2901" href="Type.BetaNBE.html#2887" class="Bound">K</a> <a id="2903" href="Type.html#650" class="InductiveConstructor Operator">⇒</a> <a id="2905" href="Type.BetaNBE.html#2889" class="Bound">J</a><a id="2906" class="Symbol">)</a> <a id="2908" class="Symbol">→</a> <a id="2910" href="Type.BetaNBE.html#568" class="Function">Val</a> <a id="2914" href="Type.BetaNBE.html#2885" class="Bound">Φ</a> <a id="2916" href="Type.BetaNBE.html#2887" class="Bound">K</a> <a id="2918" class="Symbol">→</a> <a id="2920" href="Type.BetaNBE.html#568" class="Function">Val</a> <a id="2924" href="Type.BetaNBE.html#2885" class="Bound">Φ</a> <a id="2926" href="Type.BetaNBE.html#2889" class="Bound">J</a>
<a id="2928" href="Data.Sum.Base.html#778" class="InductiveConstructor">inj₁</a> <a id="2933" href="Type.BetaNBE.html#2933" class="Bound">n</a> <a id="2935" href="Type.BetaNBE.html#2876" class="Function Operator">·V</a> <a id="2938" href="Type.BetaNBE.html#2938" class="Bound">v</a> <a id="2940" class="Symbol">=</a> <a id="2942" href="Type.BetaNBE.html#862" class="Function">reflect</a> <a id="2950" class="Symbol">(</a><a id="2951" href="Type.BetaNBE.html#2933" class="Bound">n</a> <a id="2953" href="Type.BetaNormal.html#986" class="InductiveConstructor Operator">·</a> <a id="2955" href="Type.BetaNBE.html#1540" class="Function">reify</a> <a id="2961" href="Type.BetaNBE.html#2938" class="Bound">v</a><a id="2962" class="Symbol">)</a>
<a id="2964" href="Data.Sum.Base.html#803" class="InductiveConstructor">inj₂</a> <a id="2969" href="Type.BetaNBE.html#2969" class="Bound">f</a> <a id="2971" href="Type.BetaNBE.html#2876" class="Function Operator">·V</a> <a id="2974" href="Type.BetaNBE.html#2974" class="Bound">v</a> <a id="2976" class="Symbol">=</a> <a id="2978" href="Type.BetaNBE.html#2969" class="Bound">f</a> <a id="2980" href="Function.Base.html#615" class="Function">id</a> <a id="2983" href="Type.BetaNBE.html#2974" class="Bound">v</a>
<a id="2985" class="Markup">\end{code}</a><a id="2995" class="Background">

Evaluation a term in an environment yields a value. The most
interesting cases are ƛ where we introduce a new Kripke function that
will evaluate when it receives an argument and Π/μ where we need to go
under the binder and extend the environement before evaluating and
reifying.

</a><a id="3277" class="Markup">\begin{code}</a>
<a id="eval"></a><a id="3290" href="Type.BetaNBE.html#3290" class="Function">eval</a> <a id="3295" class="Symbol">:</a> <a id="3297" class="Symbol">∀{</a><a id="3299" href="Type.BetaNBE.html#3299" class="Bound">Φ</a> <a id="3301" href="Type.BetaNBE.html#3301" class="Bound">Ψ</a> <a id="3303" href="Type.BetaNBE.html#3303" class="Bound">K</a><a id="3304" class="Symbol">}</a> <a id="3306" class="Symbol">→</a> <a id="3308" href="Type.BetaNBE.html#3301" class="Bound">Ψ</a> <a id="3310" href="Type.html#2041" class="Datatype Operator">⊢⋆</a> <a id="3313" href="Type.BetaNBE.html#3303" class="Bound">K</a> <a id="3315" class="Symbol">→</a> <a id="3317" href="Type.BetaNBE.html#1793" class="Function">Env</a> <a id="3321" href="Type.BetaNBE.html#3301" class="Bound">Ψ</a> <a id="3323" href="Type.BetaNBE.html#3299" class="Bound">Φ</a> <a id="3325" class="Symbol">→</a> <a id="3327" href="Type.BetaNBE.html#568" class="Function">Val</a> <a id="3331" href="Type.BetaNBE.html#3299" class="Bound">Φ</a> <a id="3333" href="Type.BetaNBE.html#3303" class="Bound">K</a>
<a id="3335" href="Type.BetaNBE.html#3290" class="Function">eval</a> <a id="3340" class="Symbol">(</a><a id="3341" href="Type.html#2075" class="InductiveConstructor">`</a> <a id="3343" href="Type.BetaNBE.html#3343" class="Bound">α</a><a id="3344" class="Symbol">)</a>       <a id="3352" href="Type.BetaNBE.html#3352" class="Bound">η</a> <a id="3354" class="Symbol">=</a> <a id="3356" href="Type.BetaNBE.html#3352" class="Bound">η</a> <a id="3358" href="Type.BetaNBE.html#3343" class="Bound">α</a>
<a id="3360" href="Type.BetaNBE.html#3290" class="Function">eval</a> <a id="3365" class="Symbol">(</a><a id="3366" href="Type.html#2131" class="InductiveConstructor">Π</a> <a id="3368" href="Type.BetaNBE.html#3368" class="Bound">B</a><a id="3369" class="Symbol">)</a>       <a id="3377" href="Type.BetaNBE.html#3377" class="Bound">η</a> <a id="3379" class="Symbol">=</a> <a id="3381" href="Type.BetaNormal.html#1087" class="InductiveConstructor">Π</a> <a id="3383" class="Symbol">(</a><a id="3384" href="Type.BetaNBE.html#1540" class="Function">reify</a> <a id="3390" class="Symbol">(</a><a id="3391" href="Type.BetaNBE.html#3290" class="Function">eval</a> <a id="3396" href="Type.BetaNBE.html#3368" class="Bound">B</a> <a id="3398" class="Symbol">(</a><a id="3399" href="Type.BetaNBE.html#2036" class="Function">exte</a> <a id="3404" href="Type.BetaNBE.html#3377" class="Bound">η</a><a id="3405" class="Symbol">)))</a>
<a id="3409" href="Type.BetaNBE.html#3290" class="Function">eval</a> <a id="3414" class="Symbol">(</a><a id="3415" href="Type.BetaNBE.html#3415" class="Bound">A</a> <a id="3417" href="Type.html#2195" class="InductiveConstructor Operator">⇒</a> <a id="3419" href="Type.BetaNBE.html#3419" class="Bound">B</a><a id="3420" class="Symbol">)</a>     <a id="3426" href="Type.BetaNBE.html#3426" class="Bound">η</a> <a id="3428" class="Symbol">=</a> <a id="3430" href="Type.BetaNBE.html#1540" class="Function">reify</a> <a id="3436" class="Symbol">(</a><a id="3437" href="Type.BetaNBE.html#3290" class="Function">eval</a> <a id="3442" href="Type.BetaNBE.html#3415" class="Bound">A</a> <a id="3444" href="Type.BetaNBE.html#3426" class="Bound">η</a><a id="3445" class="Symbol">)</a> <a id="3447" href="Type.BetaNormal.html#1155" class="InductiveConstructor Operator">⇒</a> <a id="3449" href="Type.BetaNBE.html#1540" class="Function">reify</a> <a id="3455" class="Symbol">(</a><a id="3456" href="Type.BetaNBE.html#3290" class="Function">eval</a> <a id="3461" href="Type.BetaNBE.html#3419" class="Bound">B</a> <a id="3463" href="Type.BetaNBE.html#3426" class="Bound">η</a><a id="3464" class="Symbol">)</a>
<a id="3466" href="Type.BetaNBE.html#3290" class="Function">eval</a> <a id="3471" class="Symbol">(</a><a id="3472" href="Type.html#2262" class="InductiveConstructor">ƛ</a> <a id="3474" href="Type.BetaNBE.html#3474" class="Bound">B</a><a id="3475" class="Symbol">)</a>       <a id="3483" href="Type.BetaNBE.html#3483" class="Bound">η</a> <a id="3485" class="Symbol">=</a> <a id="3487" href="Data.Sum.Base.html#803" class="InductiveConstructor">inj₂</a> <a id="3492" class="Symbol">λ</a> <a id="3494" href="Type.BetaNBE.html#3494" class="Bound">ρ</a> <a id="3496" href="Type.BetaNBE.html#3496" class="Bound">v</a> <a id="3498" class="Symbol">→</a> <a id="3500" href="Type.BetaNBE.html#3290" class="Function">eval</a> <a id="3505" href="Type.BetaNBE.html#3474" class="Bound">B</a> <a id="3507" class="Symbol">((</a><a id="3509" href="Type.BetaNBE.html#1167" class="Function">renVal</a> <a id="3516" href="Type.BetaNBE.html#3494" class="Bound">ρ</a> <a id="3518" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="3520" href="Type.BetaNBE.html#3483" class="Bound">η</a><a id="3521" class="Symbol">)</a> <a id="3523" href="Type.BetaNBE.html#1901" class="Function Operator">,,⋆</a> <a id="3527" href="Type.BetaNBE.html#3496" class="Bound">v</a><a id="3528" class="Symbol">)</a>
<a id="3530" href="Type.BetaNBE.html#3290" class="Function">eval</a> <a id="3535" class="Symbol">(</a><a id="3536" href="Type.BetaNBE.html#3536" class="Bound">A</a> <a id="3538" href="Type.html#2334" class="InductiveConstructor Operator">·</a> <a id="3540" href="Type.BetaNBE.html#3540" class="Bound">B</a><a id="3541" class="Symbol">)</a>     <a id="3547" href="Type.BetaNBE.html#3547" class="Bound">η</a> <a id="3549" class="Symbol">=</a> <a id="3551" href="Type.BetaNBE.html#3290" class="Function">eval</a> <a id="3556" href="Type.BetaNBE.html#3536" class="Bound">A</a> <a id="3558" href="Type.BetaNBE.html#3547" class="Bound">η</a> <a id="3560" href="Type.BetaNBE.html#2876" class="Function Operator">·V</a> <a id="3563" href="Type.BetaNBE.html#3290" class="Function">eval</a> <a id="3568" href="Type.BetaNBE.html#3540" class="Bound">B</a> <a id="3570" href="Type.BetaNBE.html#3547" class="Bound">η</a>
<a id="3572" href="Type.BetaNBE.html#3290" class="Function">eval</a> <a id="3577" class="Symbol">(</a><a id="3578" href="Type.html#2408" class="InductiveConstructor">μ</a> <a id="3580" href="Type.BetaNBE.html#3580" class="Bound">A</a> <a id="3582" href="Type.BetaNBE.html#3582" class="Bound">B</a><a id="3583" class="Symbol">)</a>     <a id="3589" href="Type.BetaNBE.html#3589" class="Bound">η</a> <a id="3591" class="Symbol">=</a> <a id="3593" href="Type.BetaNormal.html#1398" class="InductiveConstructor">μ</a> <a id="3595" class="Symbol">(</a><a id="3596" href="Type.BetaNBE.html#1540" class="Function">reify</a> <a id="3602" class="Symbol">(</a><a id="3603" href="Type.BetaNBE.html#3290" class="Function">eval</a> <a id="3608" href="Type.BetaNBE.html#3580" class="Bound">A</a> <a id="3610" href="Type.BetaNBE.html#3589" class="Bound">η</a><a id="3611" class="Symbol">))</a> <a id="3614" class="Symbol">(</a><a id="3615" href="Type.BetaNBE.html#1540" class="Function">reify</a> <a id="3621" class="Symbol">(</a><a id="3622" href="Type.BetaNBE.html#3290" class="Function">eval</a> <a id="3627" href="Type.BetaNBE.html#3582" class="Bound">B</a> <a id="3629" href="Type.BetaNBE.html#3589" class="Bound">η</a><a id="3630" class="Symbol">))</a>
<a id="3633" href="Type.BetaNBE.html#3290" class="Function">eval</a> <a id="3638" class="Symbol">(</a><a id="3639" href="Type.html#2503" class="InductiveConstructor">con</a> <a id="3643" href="Type.BetaNBE.html#3643" class="Bound">tcn</a><a id="3646" class="Symbol">)</a>   <a id="3650" href="Type.BetaNBE.html#3650" class="Bound">η</a> <a id="3652" class="Symbol">=</a> <a id="3654" href="Type.BetaNormal.html#1365" class="InductiveConstructor">con</a> <a id="3658" href="Type.BetaNBE.html#3643" class="Bound">tcn</a>
<a id="3662" class="Markup">\end{code}</a><a id="3672" class="Background">

Identity environment

</a><a id="3696" class="Markup">\begin{code}</a>
<a id="idEnv"></a><a id="3709" href="Type.BetaNBE.html#3709" class="Function">idEnv</a> <a id="3715" class="Symbol">:</a> <a id="3717" class="Symbol">∀</a> <a id="3719" href="Type.BetaNBE.html#3719" class="Bound">Φ</a> <a id="3721" class="Symbol">→</a> <a id="3723" href="Type.BetaNBE.html#1793" class="Function">Env</a> <a id="3727" href="Type.BetaNBE.html#3719" class="Bound">Φ</a> <a id="3729" href="Type.BetaNBE.html#3719" class="Bound">Φ</a>
<a id="3731" href="Type.BetaNBE.html#3709" class="Function">idEnv</a> <a id="3737" href="Type.BetaNBE.html#3737" class="Bound">Φ</a> <a id="3739" class="Symbol">=</a> <a id="3741" href="Type.BetaNBE.html#862" class="Function">reflect</a> <a id="3749" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="3751" href="Type.BetaNormal.html#928" class="InductiveConstructor">`</a>
<a id="3753" class="Markup">\end{code}</a><a id="3763" class="Background">

Normalisating a term yields a normal form. We evaluate in the identity
environment to yield a value in the same context as the original term
and then reify to yield a normal form

</a><a id="3945" class="Markup">\begin{code}</a>
<a id="nf"></a><a id="3958" href="Type.BetaNBE.html#3958" class="Function">nf</a> <a id="3961" class="Symbol">:</a> <a id="3963" class="Symbol">∀{</a><a id="3965" href="Type.BetaNBE.html#3965" class="Bound">Φ</a> <a id="3967" href="Type.BetaNBE.html#3967" class="Bound">K</a><a id="3968" class="Symbol">}</a> <a id="3970" class="Symbol">→</a> <a id="3972" href="Type.BetaNBE.html#3965" class="Bound">Φ</a> <a id="3974" href="Type.html#2041" class="Datatype Operator">⊢⋆</a> <a id="3977" href="Type.BetaNBE.html#3967" class="Bound">K</a> <a id="3979" class="Symbol">→</a> <a id="3981" href="Type.BetaNBE.html#3965" class="Bound">Φ</a> <a id="3983" href="Type.BetaNormal.html#860" class="Datatype Operator">⊢Nf⋆</a> <a id="3988" href="Type.BetaNBE.html#3967" class="Bound">K</a>
<a id="3990" href="Type.BetaNBE.html#3958" class="Function">nf</a> <a id="3993" href="Type.BetaNBE.html#3993" class="Bound">t</a> <a id="3995" class="Symbol">=</a> <a id="3997" href="Type.BetaNBE.html#1540" class="Function">reify</a> <a id="4003" class="Symbol">(</a><a id="4004" href="Type.BetaNBE.html#3290" class="Function">eval</a> <a id="4009" href="Type.BetaNBE.html#3993" class="Bound">t</a> <a id="4011" class="Symbol">(</a><a id="4012" href="Type.BetaNBE.html#3709" class="Function">idEnv</a> <a id="4018" class="Symbol">_))</a>
<a id="4022" class="Markup">\end{code}</a><a id="4032" class="Background">
</a></pre></body></html>