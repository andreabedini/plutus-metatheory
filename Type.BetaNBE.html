<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Type.BetaNBE</title><link rel="stylesheet" href="Agda.css"></head><body><pre>\begin{code}
<a id="14" class="Keyword">module</a> <a id="21" href="Type.BetaNBE.html" class="Module">Type.BetaNBE</a> <a id="34" class="Keyword">where</a>
\end{code}<a id="50" class="Comment"> where

## Imports

</a>\begin{code}
<a id="83" class="Keyword">open</a> <a id="88" class="Keyword">import</a> <a id="95" href="Type.html" class="Module">Type</a>
<a id="100" class="Keyword">open</a> <a id="105" class="Keyword">import</a> <a id="112" href="Type.BetaNormal.html" class="Module">Type.BetaNormal</a>
<a id="128" class="Keyword">open</a> <a id="133" class="Keyword">import</a> <a id="140" href="Type.RenamingSubstitution.html" class="Module">Type.RenamingSubstitution</a>
<a id="166" class="Keyword">open</a> <a id="171" class="Keyword">import</a> <a id="178" href="Type.Equality.html" class="Module">Type.Equality</a>

<a id="193" class="Keyword">open</a> <a id="198" class="Keyword">import</a> <a id="205" href="Function.html" class="Module">Function</a>
<a id="214" class="Keyword">open</a> <a id="219" class="Keyword">import</a> <a id="226" href="Data.Sum.html" class="Module">Data.Sum</a>
<a id="235" class="Keyword">open</a> <a id="240" class="Keyword">import</a> <a id="247" href="Data.Empty.html" class="Module">Data.Empty</a>
<a id="258" class="Keyword">open</a> <a id="263" class="Keyword">import</a> <a id="270" href="Data.Product.html" class="Module">Data.Product</a>
<a id="283" class="Keyword">open</a> <a id="288" class="Keyword">import</a> <a id="295" href="Data.Unit.html" class="Module">Data.Unit</a>

<a id="306" class="Keyword">open</a> <a id="311" class="Keyword">import</a> <a id="318" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="356" class="Keyword">hiding</a> <a id="363" class="Symbol">(</a><a id="364" href="Relation.Binary.PropositionalEquality.html#3279" class="InductiveConstructor Operator">[_]</a><a id="367" class="Symbol">;</a> <a id="369" href="Relation.Binary.PropositionalEquality.Core.html#700" class="Function">subst</a><a id="374" class="Symbol">)</a>
\end{code}<a id="386" class="Comment">

Values are defined by induction on kind. At kind size and * they are
inert and defined to be just normal forms. At function kind they are
either neutral or Kripke functions

</a>\begin{code}
<a id="Val"></a><a id="575" href="Type.BetaNBE.html#575" class="Function">Val</a> <a id="579" class="Symbol">:</a> <a id="581" href="Type.html#853" class="Datatype">Ctx⋆</a> <a id="586" class="Symbol">-&gt;</a> <a id="589" href="Type.html#610" class="Datatype">Kind</a> <a id="594" class="Symbol">-&gt;</a> <a id="597" class="PrimitiveType">Set</a>
<a id="601" href="Type.BetaNBE.html#575" class="Function">Val</a> <a id="605" href="Type.BetaNBE.html#605" class="Bound">Γ</a> <a id="607" href="Type.html#640" class="InductiveConstructor">size</a>    <a id="615" class="Symbol">=</a> <a id="617" href="Type.BetaNBE.html#605" class="Bound">Γ</a> <a id="619" href="Type.BetaNormal.html#783" class="Datatype Operator">⊢Nf⋆</a> <a id="624" href="Type.html#640" class="InductiveConstructor">size</a>
<a id="629" href="Type.BetaNBE.html#575" class="Function">Val</a> <a id="633" href="Type.BetaNBE.html#633" class="Bound">Γ</a>  <a id="636" href="Type.html#629" class="InductiveConstructor">*</a>      <a id="643" class="Symbol">=</a> <a id="645" href="Type.BetaNBE.html#633" class="Bound">Γ</a> <a id="647" href="Type.BetaNormal.html#783" class="Datatype Operator">⊢Nf⋆</a> <a id="652" href="Type.html#629" class="InductiveConstructor">*</a>
<a id="654" href="Type.BetaNBE.html#575" class="Function">Val</a> <a id="658" href="Type.BetaNBE.html#658" class="Bound">Γ</a> <a id="660" class="Symbol">(</a><a id="661" href="Type.BetaNBE.html#661" class="Bound">σ</a> <a id="663" href="Type.html#654" class="InductiveConstructor Operator">⇒</a> <a id="665" href="Type.BetaNBE.html#665" class="Bound">τ</a><a id="666" class="Symbol">)</a> <a id="668" class="Symbol">=</a> <a id="670" href="Type.BetaNBE.html#658" class="Bound">Γ</a> <a id="672" href="Type.BetaNormal.html#816" class="Datatype Operator">⊢NeN⋆</a> <a id="678" class="Symbol">(</a><a id="679" href="Type.BetaNBE.html#661" class="Bound">σ</a> <a id="681" href="Type.html#654" class="InductiveConstructor Operator">⇒</a> <a id="683" href="Type.BetaNBE.html#665" class="Bound">τ</a><a id="684" class="Symbol">)</a> <a id="686" href="Data.Sum.Base.html#414" class="Datatype Operator">⊎</a> <a id="688" class="Symbol">∀</a> <a id="690" class="Symbol">{</a><a id="691" href="Type.BetaNBE.html#691" class="Bound">Δ</a><a id="692" class="Symbol">}</a> <a id="694" class="Symbol">-&gt;</a> <a id="697" href="Type.RenamingSubstitution.html#378" class="Function">Ren</a> <a id="701" href="Type.BetaNBE.html#658" class="Bound">Γ</a> <a id="703" href="Type.BetaNBE.html#691" class="Bound">Δ</a> <a id="705" class="Symbol">-&gt;</a> <a id="708" href="Type.BetaNBE.html#575" class="Function">Val</a> <a id="712" href="Type.BetaNBE.html#691" class="Bound">Δ</a> <a id="714" href="Type.BetaNBE.html#661" class="Bound">σ</a> <a id="716" class="Symbol">-&gt;</a> <a id="719" href="Type.BetaNBE.html#575" class="Function">Val</a> <a id="723" href="Type.BetaNBE.html#691" class="Bound">Δ</a> <a id="725" href="Type.BetaNBE.html#665" class="Bound">τ</a>
\end{code}<a id="737" class="Comment">

We can embed neutral terms into values at any kind using reflect.
reflect is quite simple in this version of NBE and not mutually
defined with reify.

</a>\begin{code}
<a id="reflect"></a><a id="903" href="Type.BetaNBE.html#903" class="Function">reflect</a> <a id="911" class="Symbol">:</a> <a id="913" class="Symbol">∀{</a><a id="915" href="Type.BetaNBE.html#915" class="Bound">Γ</a> <a id="917" href="Type.BetaNBE.html#917" class="Bound">σ</a><a id="918" class="Symbol">}</a> <a id="920" class="Symbol">→</a> <a id="922" href="Type.BetaNBE.html#915" class="Bound">Γ</a> <a id="924" href="Type.BetaNormal.html#816" class="Datatype Operator">⊢NeN⋆</a> <a id="930" href="Type.BetaNBE.html#917" class="Bound">σ</a> <a id="932" class="Symbol">→</a> <a id="934" href="Type.BetaNBE.html#575" class="Function">Val</a> <a id="938" href="Type.BetaNBE.html#915" class="Bound">Γ</a> <a id="940" href="Type.BetaNBE.html#917" class="Bound">σ</a>
<a id="942" href="Type.BetaNBE.html#903" class="Function">reflect</a> <a id="950" class="Symbol">{</a><a id="951" class="Argument">σ</a> <a id="953" class="Symbol">=</a> <a id="955" href="Type.html#640" class="InductiveConstructor">size</a><a id="959" class="Symbol">}</a>  <a id="962" href="Type.BetaNBE.html#962" class="Bound">n</a> <a id="964" class="Symbol">=</a> <a id="966" href="Type.BetaNormal.html#1300" class="InductiveConstructor">ne</a> <a id="969" href="Type.BetaNBE.html#962" class="Bound">n</a>
<a id="971" href="Type.BetaNBE.html#903" class="Function">reflect</a> <a id="979" class="Symbol">{</a><a id="980" class="Argument">σ</a> <a id="982" class="Symbol">=</a> <a id="984" href="Type.html#629" class="InductiveConstructor">*</a><a id="985" class="Symbol">}</a>     <a id="991" href="Type.BetaNBE.html#991" class="Bound">n</a> <a id="993" class="Symbol">=</a> <a id="995" href="Type.BetaNormal.html#1300" class="InductiveConstructor">ne</a> <a id="998" href="Type.BetaNBE.html#991" class="Bound">n</a>
<a id="1000" href="Type.BetaNBE.html#903" class="Function">reflect</a> <a id="1008" class="Symbol">{</a><a id="1009" class="Argument">σ</a> <a id="1011" class="Symbol">=</a> <a id="1013" href="Type.BetaNBE.html#1013" class="Bound">σ</a> <a id="1015" href="Type.html#654" class="InductiveConstructor Operator">⇒</a> <a id="1017" href="Type.BetaNBE.html#1017" class="Bound">τ</a><a id="1018" class="Symbol">}</a> <a id="1020" href="Type.BetaNBE.html#1020" class="Bound">n</a> <a id="1022" class="Symbol">=</a> <a id="1024" href="Data.Sum.Base.html#470" class="InductiveConstructor">inj₁</a> <a id="1029" href="Type.BetaNBE.html#1020" class="Bound">n</a>
\end{code}<a id="1041" class="Comment">

A shorthand for creating a new fresh variable as a value which we need
in reify

</a>\begin{code}
<a id="fresh"></a><a id="1137" href="Type.BetaNBE.html#1137" class="Function">fresh</a> <a id="1143" class="Symbol">:</a> <a id="1145" class="Symbol">∀</a> <a id="1147" class="Symbol">{</a><a id="1148" href="Type.BetaNBE.html#1148" class="Bound">Γ</a> <a id="1150" href="Type.BetaNBE.html#1150" class="Bound">σ</a><a id="1151" class="Symbol">}</a> <a id="1153" class="Symbol">-&gt;</a> <a id="1156" href="Type.BetaNBE.html#575" class="Function">Val</a> <a id="1160" class="Symbol">(</a><a id="1161" href="Type.BetaNBE.html#1148" class="Bound">Γ</a> <a id="1163" href="Type.html#883" class="InductiveConstructor Operator">,⋆</a> <a id="1166" href="Type.BetaNBE.html#1150" class="Bound">σ</a><a id="1167" class="Symbol">)</a> <a id="1169" href="Type.BetaNBE.html#1150" class="Bound">σ</a>
<a id="1171" href="Type.BetaNBE.html#1137" class="Function">fresh</a> <a id="1177" class="Symbol">=</a> <a id="1179" href="Type.BetaNBE.html#903" class="Function">reflect</a> <a id="1187" class="Symbol">(</a><a id="1188" href="Type.BetaNormal.html#852" class="InductiveConstructor">`</a> <a id="1190" href="Type.html#1168" class="InductiveConstructor">Z</a><a id="1191" class="Symbol">)</a>
\end{code}<a id="1203" class="Comment">

Renaming for values

</a>\begin{code}
<a id="renval"></a><a id="1239" href="Type.BetaNBE.html#1239" class="Function">renval</a> <a id="1246" class="Symbol">:</a> <a id="1248" class="Symbol">∀</a> <a id="1250" class="Symbol">{</a><a id="1251" href="Type.BetaNBE.html#1251" class="Bound">σ</a> <a id="1253" href="Type.BetaNBE.html#1253" class="Bound">Γ</a> <a id="1255" href="Type.BetaNBE.html#1255" class="Bound">Δ</a><a id="1256" class="Symbol">}</a> <a id="1258" class="Symbol">-&gt;</a> <a id="1261" href="Type.RenamingSubstitution.html#378" class="Function">Ren</a> <a id="1265" href="Type.BetaNBE.html#1253" class="Bound">Γ</a> <a id="1267" href="Type.BetaNBE.html#1255" class="Bound">Δ</a> <a id="1269" class="Symbol">-&gt;</a> <a id="1272" href="Type.BetaNBE.html#575" class="Function">Val</a> <a id="1276" href="Type.BetaNBE.html#1253" class="Bound">Γ</a> <a id="1278" href="Type.BetaNBE.html#1251" class="Bound">σ</a> <a id="1280" class="Symbol">-&gt;</a> <a id="1283" href="Type.BetaNBE.html#575" class="Function">Val</a> <a id="1287" href="Type.BetaNBE.html#1255" class="Bound">Δ</a> <a id="1289" href="Type.BetaNBE.html#1251" class="Bound">σ</a>
<a id="1291" href="Type.BetaNBE.html#1239" class="Function">renval</a> <a id="1298" class="Symbol">{</a><a id="1299" href="Type.html#640" class="InductiveConstructor">size</a><a id="1303" class="Symbol">}</a>  <a id="1306" href="Type.BetaNBE.html#1306" class="Bound">ψ</a> <a id="1308" href="Type.BetaNBE.html#1308" class="Bound">n</a>         <a id="1318" class="Symbol">=</a> <a id="1320" href="Type.BetaNormal.html#1533" class="Function">renameNf</a> <a id="1329" href="Type.BetaNBE.html#1306" class="Bound">ψ</a> <a id="1331" href="Type.BetaNBE.html#1308" class="Bound">n</a>
<a id="1333" href="Type.BetaNBE.html#1239" class="Function">renval</a> <a id="1340" class="Symbol">{</a><a id="1341" href="Type.html#629" class="InductiveConstructor">*</a><a id="1342" class="Symbol">}</a>     <a id="1348" href="Type.BetaNBE.html#1348" class="Bound">ψ</a> <a id="1350" href="Type.BetaNBE.html#1350" class="Bound">n</a>         <a id="1360" class="Symbol">=</a> <a id="1362" href="Type.BetaNormal.html#1533" class="Function">renameNf</a> <a id="1371" href="Type.BetaNBE.html#1348" class="Bound">ψ</a> <a id="1373" href="Type.BetaNBE.html#1350" class="Bound">n</a>
<a id="1375" href="Type.BetaNBE.html#1239" class="Function">renval</a> <a id="1382" class="Symbol">{</a><a id="1383" href="Type.BetaNBE.html#1383" class="Bound">σ</a> <a id="1385" href="Type.html#654" class="InductiveConstructor Operator">⇒</a> <a id="1387" href="Type.BetaNBE.html#1387" class="Bound">τ</a><a id="1388" class="Symbol">}</a> <a id="1390" href="Type.BetaNBE.html#1390" class="Bound">ψ</a> <a id="1392" class="Symbol">(</a><a id="1393" href="Data.Sum.Base.html#470" class="InductiveConstructor">inj₁</a> <a id="1398" href="Type.BetaNBE.html#1398" class="Bound">n</a><a id="1399" class="Symbol">)</a>  <a id="1402" class="Symbol">=</a> <a id="1404" href="Data.Sum.Base.html#470" class="InductiveConstructor">inj₁</a> <a id="1409" class="Symbol">(</a><a id="1410" href="Type.BetaNormal.html#1632" class="Function">renameNeN</a> <a id="1420" href="Type.BetaNBE.html#1390" class="Bound">ψ</a> <a id="1422" href="Type.BetaNBE.html#1398" class="Bound">n</a><a id="1423" class="Symbol">)</a>
<a id="1425" href="Type.BetaNBE.html#1239" class="Function">renval</a> <a id="1432" class="Symbol">{</a><a id="1433" href="Type.BetaNBE.html#1433" class="Bound">σ</a> <a id="1435" href="Type.html#654" class="InductiveConstructor Operator">⇒</a> <a id="1437" href="Type.BetaNBE.html#1437" class="Bound">τ</a><a id="1438" class="Symbol">}</a> <a id="1440" href="Type.BetaNBE.html#1440" class="Bound">ψ</a> <a id="1442" class="Symbol">(</a><a id="1443" href="Data.Sum.Base.html#495" class="InductiveConstructor">inj₂</a> <a id="1448" href="Type.BetaNBE.html#1448" class="Bound">f</a><a id="1449" class="Symbol">)</a>  <a id="1452" class="Symbol">=</a> <a id="1454" href="Data.Sum.Base.html#495" class="InductiveConstructor">inj₂</a> <a id="1459" class="Symbol">(λ</a> <a id="1462" href="Type.BetaNBE.html#1462" class="Bound">ρ&#39;</a> <a id="1465" class="Symbol">→</a>  <a id="1468" href="Type.BetaNBE.html#1448" class="Bound">f</a> <a id="1470" class="Symbol">(</a><a id="1471" href="Type.BetaNBE.html#1462" class="Bound">ρ&#39;</a> <a id="1474" href="Function.html#759" class="Function Operator">∘</a> <a id="1476" href="Type.BetaNBE.html#1440" class="Bound">ψ</a><a id="1477" class="Symbol">))</a>
\end{code}<a id="1490" class="Comment">

Reify takes a value and yields a normal form.

</a>\begin{code}
<a id="reify"></a><a id="1552" href="Type.BetaNBE.html#1552" class="Function">reify</a> <a id="1558" class="Symbol">:</a> <a id="1560" class="Symbol">∀</a> <a id="1562" class="Symbol">{</a><a id="1563" href="Type.BetaNBE.html#1563" class="Bound">σ</a> <a id="1565" href="Type.BetaNBE.html#1565" class="Bound">Γ</a><a id="1566" class="Symbol">}</a> <a id="1568" class="Symbol">-&gt;</a> <a id="1571" href="Type.BetaNBE.html#575" class="Function">Val</a> <a id="1575" href="Type.BetaNBE.html#1565" class="Bound">Γ</a> <a id="1577" href="Type.BetaNBE.html#1563" class="Bound">σ</a> <a id="1579" class="Symbol">-&gt;</a> <a id="1582" href="Type.BetaNBE.html#1565" class="Bound">Γ</a> <a id="1584" href="Type.BetaNormal.html#783" class="Datatype Operator">⊢Nf⋆</a> <a id="1589" href="Type.BetaNBE.html#1563" class="Bound">σ</a>
<a id="1591" href="Type.BetaNBE.html#1552" class="Function">reify</a> <a id="1597" class="Symbol">{</a><a id="1598" href="Type.html#640" class="InductiveConstructor">size</a><a id="1602" class="Symbol">}</a>  <a id="1605" href="Type.BetaNBE.html#1605" class="Bound">n</a>         <a id="1615" class="Symbol">=</a> <a id="1617" href="Type.BetaNBE.html#1605" class="Bound">n</a>
<a id="1619" href="Type.BetaNBE.html#1552" class="Function">reify</a> <a id="1625" class="Symbol">{</a><a id="1626" href="Type.html#629" class="InductiveConstructor">*</a><a id="1627" class="Symbol">}</a>     <a id="1633" href="Type.BetaNBE.html#1633" class="Bound">n</a>         <a id="1643" class="Symbol">=</a> <a id="1645" href="Type.BetaNBE.html#1633" class="Bound">n</a>
<a id="1647" href="Type.BetaNBE.html#1552" class="Function">reify</a> <a id="1653" class="Symbol">{</a><a id="1654" href="Type.BetaNBE.html#1654" class="Bound">σ</a> <a id="1656" href="Type.html#654" class="InductiveConstructor Operator">⇒</a> <a id="1658" href="Type.BetaNBE.html#1658" class="Bound">τ</a><a id="1659" class="Symbol">}</a> <a id="1661" class="Symbol">(</a><a id="1662" href="Data.Sum.Base.html#470" class="InductiveConstructor">inj₁</a> <a id="1667" href="Type.BetaNBE.html#1667" class="Bound">n</a><a id="1668" class="Symbol">)</a>  <a id="1671" class="Symbol">=</a> <a id="1673" href="Type.BetaNormal.html#1300" class="InductiveConstructor">ne</a> <a id="1676" href="Type.BetaNBE.html#1667" class="Bound">n</a>
<a id="1678" href="Type.BetaNBE.html#1552" class="Function">reify</a> <a id="1684" class="Symbol">{</a><a id="1685" href="Type.BetaNBE.html#1685" class="Bound">σ</a> <a id="1687" href="Type.html#654" class="InductiveConstructor Operator">⇒</a> <a id="1689" href="Type.BetaNBE.html#1689" class="Bound">τ</a><a id="1690" class="Symbol">}</a> <a id="1692" class="Symbol">(</a><a id="1693" href="Data.Sum.Base.html#495" class="InductiveConstructor">inj₂</a> <a id="1698" href="Type.BetaNBE.html#1698" class="Bound">f</a><a id="1699" class="Symbol">)</a>  <a id="1702" class="Symbol">=</a> <a id="1704" href="Type.BetaNormal.html#1223" class="InductiveConstructor">ƛ</a> <a id="1706" class="Symbol">(</a><a id="1707" href="Type.BetaNBE.html#1552" class="Function">reify</a> <a id="1713" class="Symbol">(</a><a id="1714" href="Type.BetaNBE.html#1698" class="Bound">f</a> <a id="1716" href="Type.html#1221" class="InductiveConstructor">S</a> <a id="1718" href="Type.BetaNBE.html#1137" class="Function">fresh</a><a id="1723" class="Symbol">))</a>
\end{code}<a id="1736" class="Comment">

An environment is a mapping from variables to values

</a>\begin{code}
<a id="Env"></a><a id="1805" href="Type.BetaNBE.html#1805" class="Function">Env</a> <a id="1809" class="Symbol">:</a> <a id="1811" href="Type.html#853" class="Datatype">Ctx⋆</a> <a id="1816" class="Symbol">→</a> <a id="1818" href="Type.html#853" class="Datatype">Ctx⋆</a> <a id="1823" class="Symbol">→</a> <a id="1825" class="PrimitiveType">Set</a>
<a id="1829" href="Type.BetaNBE.html#1805" class="Function">Env</a> <a id="1833" href="Type.BetaNBE.html#1833" class="Bound">Δ</a> <a id="1835" href="Type.BetaNBE.html#1835" class="Bound">Γ</a> <a id="1837" class="Symbol">=</a> <a id="1839" class="Symbol">∀{</a><a id="1841" href="Type.BetaNBE.html#1841" class="Bound">J</a><a id="1842" class="Symbol">}</a> <a id="1844" class="Symbol">→</a> <a id="1846" href="Type.BetaNBE.html#1833" class="Bound">Δ</a> <a id="1848" href="Type.html#1134" class="Datatype Operator">∋⋆</a> <a id="1851" href="Type.BetaNBE.html#1841" class="Bound">J</a> <a id="1853" class="Symbol">→</a> <a id="1855" href="Type.BetaNBE.html#575" class="Function">Val</a> <a id="1859" href="Type.BetaNBE.html#1835" class="Bound">Γ</a> <a id="1861" href="Type.BetaNBE.html#1841" class="Bound">J</a>
\end{code}<a id="1873" class="Comment">

&#39;cons&#39; for environments

</a>\begin{code}
<a id="_,,⋆_"></a><a id="1913" href="Type.BetaNBE.html#1913" class="Function Operator">_,,⋆_</a> <a id="1919" class="Symbol">:</a> <a id="1921" class="Symbol">∀{</a><a id="1923" href="Type.BetaNBE.html#1923" class="Bound">Δ</a> <a id="1925" href="Type.BetaNBE.html#1925" class="Bound">Γ</a><a id="1926" class="Symbol">}</a> <a id="1928" class="Symbol">→</a> <a id="1930" class="Symbol">(</a><a id="1931" href="Type.BetaNBE.html#1931" class="Bound">σ</a> <a id="1933" class="Symbol">:</a> <a id="1935" href="Type.BetaNBE.html#1805" class="Function">Env</a> <a id="1939" href="Type.BetaNBE.html#1925" class="Bound">Γ</a> <a id="1941" href="Type.BetaNBE.html#1923" class="Bound">Δ</a><a id="1942" class="Symbol">)</a> <a id="1944" class="Symbol">→</a> <a id="1946" class="Symbol">∀{</a><a id="1948" href="Type.BetaNBE.html#1948" class="Bound">K</a><a id="1949" class="Symbol">}(</a><a id="1951" href="Type.BetaNBE.html#1951" class="Bound">A</a> <a id="1953" class="Symbol">:</a> <a id="1955" href="Type.BetaNBE.html#575" class="Function">Val</a> <a id="1959" href="Type.BetaNBE.html#1923" class="Bound">Δ</a> <a id="1961" href="Type.BetaNBE.html#1948" class="Bound">K</a><a id="1962" class="Symbol">)</a> <a id="1964" class="Symbol">→</a> <a id="1966" href="Type.BetaNBE.html#1805" class="Function">Env</a> <a id="1970" class="Symbol">(</a><a id="1971" href="Type.BetaNBE.html#1925" class="Bound">Γ</a> <a id="1973" href="Type.html#883" class="InductiveConstructor Operator">,⋆</a> <a id="1976" href="Type.BetaNBE.html#1948" class="Bound">K</a><a id="1977" class="Symbol">)</a> <a id="1979" href="Type.BetaNBE.html#1923" class="Bound">Δ</a>
<a id="1981" class="Symbol">(</a><a id="1982" href="Type.BetaNBE.html#1982" class="Bound">σ</a> <a id="1984" href="Type.BetaNBE.html#1913" class="Function Operator">,,⋆</a> <a id="1988" href="Type.BetaNBE.html#1988" class="Bound">A</a><a id="1989" class="Symbol">)</a> <a id="1991" href="Type.html#1168" class="InductiveConstructor">Z</a> <a id="1993" class="Symbol">=</a> <a id="1995" href="Type.BetaNBE.html#1988" class="Bound">A</a>
<a id="1997" class="Symbol">(</a><a id="1998" href="Type.BetaNBE.html#1998" class="Bound">σ</a> <a id="2000" href="Type.BetaNBE.html#1913" class="Function Operator">,,⋆</a> <a id="2004" href="Type.BetaNBE.html#2004" class="Bound">A</a><a id="2005" class="Symbol">)</a> <a id="2007" class="Symbol">(</a><a id="2008" href="Type.html#1221" class="InductiveConstructor">S</a> <a id="2010" href="Type.BetaNBE.html#2010" class="Bound">x</a><a id="2011" class="Symbol">)</a> <a id="2013" class="Symbol">=</a> <a id="2015" href="Type.BetaNBE.html#1998" class="Bound">σ</a> <a id="2017" href="Type.BetaNBE.html#2010" class="Bound">x</a>
\end{code}<a id="2029" class="Comment">

Application for values. As values at function type can be semantic
functions or neutral terms we need this function to unpack them. If
the function is neutral we create a neutral application by reifying
the value and applying the neutral application constructor, then we
refect the neutral application into a value. If the function is a
semantic function we apply it to the identity renaming and then to
the argument. In this case, the function and argument are in the same
context so we do not need the Kripke extension, hence the identity
renaming.

</a>\begin{code}
<a id="_·V_"></a><a id="2596" href="Type.BetaNBE.html#2596" class="Function Operator">_·V_</a> <a id="2601" class="Symbol">:</a> <a id="2603" class="Symbol">∀{</a><a id="2605" href="Type.BetaNBE.html#2605" class="Bound">Γ</a> <a id="2607" href="Type.BetaNBE.html#2607" class="Bound">K</a> <a id="2609" href="Type.BetaNBE.html#2609" class="Bound">J</a><a id="2610" class="Symbol">}</a> <a id="2612" class="Symbol">→</a> <a id="2614" href="Type.BetaNBE.html#575" class="Function">Val</a> <a id="2618" href="Type.BetaNBE.html#2605" class="Bound">Γ</a> <a id="2620" class="Symbol">(</a><a id="2621" href="Type.BetaNBE.html#2607" class="Bound">K</a> <a id="2623" href="Type.html#654" class="InductiveConstructor Operator">⇒</a> <a id="2625" href="Type.BetaNBE.html#2609" class="Bound">J</a><a id="2626" class="Symbol">)</a> <a id="2628" class="Symbol">→</a> <a id="2630" href="Type.BetaNBE.html#575" class="Function">Val</a> <a id="2634" href="Type.BetaNBE.html#2605" class="Bound">Γ</a> <a id="2636" href="Type.BetaNBE.html#2607" class="Bound">K</a> <a id="2638" class="Symbol">→</a> <a id="2640" href="Type.BetaNBE.html#575" class="Function">Val</a> <a id="2644" href="Type.BetaNBE.html#2605" class="Bound">Γ</a> <a id="2646" href="Type.BetaNBE.html#2609" class="Bound">J</a>
<a id="2648" href="Data.Sum.Base.html#470" class="InductiveConstructor">inj₁</a> <a id="2653" href="Type.BetaNBE.html#2653" class="Bound">n</a> <a id="2655" href="Type.BetaNBE.html#2596" class="Function Operator">·V</a> <a id="2658" href="Type.BetaNBE.html#2658" class="Bound">v</a> <a id="2660" class="Symbol">=</a> <a id="2662" href="Type.BetaNBE.html#903" class="Function">reflect</a> <a id="2670" class="Symbol">(</a><a id="2671" href="Type.BetaNBE.html#2653" class="Bound">n</a> <a id="2673" href="Type.BetaNormal.html#911" class="InductiveConstructor Operator">·</a> <a id="2675" href="Type.BetaNBE.html#1552" class="Function">reify</a> <a id="2681" href="Type.BetaNBE.html#2658" class="Bound">v</a><a id="2682" class="Symbol">)</a>
<a id="2684" href="Data.Sum.Base.html#495" class="InductiveConstructor">inj₂</a> <a id="2689" href="Type.BetaNBE.html#2689" class="Bound">f</a> <a id="2691" href="Type.BetaNBE.html#2596" class="Function Operator">·V</a> <a id="2694" href="Type.BetaNBE.html#2694" class="Bound">v</a> <a id="2696" class="Symbol">=</a> <a id="2698" href="Type.BetaNBE.html#2689" class="Bound">f</a> <a id="2700" href="Function.html#1058" class="Function">id</a> <a id="2703" href="Type.BetaNBE.html#2694" class="Bound">v</a>
\end{code}<a id="2715" class="Comment">

Evaluation a term in an environment yields a value.

</a>\begin{code}
<a id="eval"></a><a id="2783" href="Type.BetaNBE.html#2783" class="Function">eval</a> <a id="2788" class="Symbol">:</a> <a id="2790" class="Symbol">∀{</a><a id="2792" href="Type.BetaNBE.html#2792" class="Bound">Γ</a> <a id="2794" href="Type.BetaNBE.html#2794" class="Bound">Δ</a> <a id="2796" href="Type.BetaNBE.html#2796" class="Bound">K</a><a id="2797" class="Symbol">}</a> <a id="2799" class="Symbol">→</a> <a id="2801" href="Type.BetaNBE.html#2794" class="Bound">Δ</a> <a id="2803" href="Type.html#1800" class="Datatype Operator">⊢⋆</a> <a id="2806" href="Type.BetaNBE.html#2796" class="Bound">K</a> <a id="2808" class="Symbol">→</a> <a id="2810" class="Symbol">(∀{</a><a id="2813" href="Type.BetaNBE.html#2813" class="Bound">J</a><a id="2814" class="Symbol">}</a> <a id="2816" class="Symbol">→</a> <a id="2818" href="Type.BetaNBE.html#2794" class="Bound">Δ</a> <a id="2820" href="Type.html#1134" class="Datatype Operator">∋⋆</a> <a id="2823" href="Type.BetaNBE.html#2813" class="Bound">J</a> <a id="2825" class="Symbol">→</a> <a id="2827" href="Type.BetaNBE.html#575" class="Function">Val</a> <a id="2831" href="Type.BetaNBE.html#2792" class="Bound">Γ</a> <a id="2833" href="Type.BetaNBE.html#2813" class="Bound">J</a><a id="2834" class="Symbol">)</a>  <a id="2837" class="Symbol">→</a> <a id="2839" href="Type.BetaNBE.html#575" class="Function">Val</a> <a id="2843" href="Type.BetaNBE.html#2792" class="Bound">Γ</a> <a id="2845" href="Type.BetaNBE.html#2796" class="Bound">K</a>
<a id="2847" href="Type.BetaNBE.html#2783" class="Function">eval</a> <a id="2852" class="Symbol">(</a><a id="2853" href="Type.html#1834" class="InductiveConstructor">`</a> <a id="2855" href="Type.BetaNBE.html#2855" class="Bound">x</a><a id="2856" class="Symbol">)</a>   <a id="2860" href="Type.BetaNBE.html#2860" class="Bound">ρ</a> <a id="2862" class="Symbol">=</a> <a id="2864" href="Type.BetaNBE.html#2860" class="Bound">ρ</a> <a id="2866" href="Type.BetaNBE.html#2855" class="Bound">x</a>
<a id="2868" href="Type.BetaNBE.html#2783" class="Function">eval</a> <a id="2873" class="Symbol">(</a><a id="2874" href="Type.html#1890" class="InductiveConstructor">Π</a> <a id="2876" href="Type.BetaNBE.html#2876" class="Bound">B</a><a id="2877" class="Symbol">)</a>   <a id="2881" href="Type.BetaNBE.html#2881" class="Bound">ρ</a> <a id="2883" class="Symbol">=</a> <a id="2885" href="Type.BetaNormal.html#1082" class="InductiveConstructor">Π</a> <a id="2887" class="Symbol">(</a><a id="2888" href="Type.BetaNBE.html#1552" class="Function">reify</a> <a id="2894" class="Symbol">(</a><a id="2895" href="Type.BetaNBE.html#2783" class="Function">eval</a> <a id="2900" href="Type.BetaNBE.html#2876" class="Bound">B</a> <a id="2902" class="Symbol">((</a><a id="2904" href="Type.BetaNBE.html#1239" class="Function">renval</a> <a id="2911" href="Type.html#1221" class="InductiveConstructor">S</a> <a id="2913" href="Function.html#759" class="Function Operator">∘</a> <a id="2915" href="Type.BetaNBE.html#2881" class="Bound">ρ</a><a id="2916" class="Symbol">)</a> <a id="2918" href="Type.BetaNBE.html#1913" class="Function Operator">,,⋆</a> <a id="2922" href="Type.BetaNBE.html#1137" class="Function">fresh</a><a id="2927" class="Symbol">)))</a>
<a id="2931" href="Type.BetaNBE.html#2783" class="Function">eval</a> <a id="2936" class="Symbol">(</a><a id="2937" href="Type.BetaNBE.html#2937" class="Bound">A</a> <a id="2939" href="Type.html#1954" class="InductiveConstructor Operator">⇒</a> <a id="2941" href="Type.BetaNBE.html#2941" class="Bound">B</a><a id="2942" class="Symbol">)</a> <a id="2944" href="Type.BetaNBE.html#2944" class="Bound">ρ</a> <a id="2946" class="Symbol">=</a> <a id="2948" href="Type.BetaNBE.html#1552" class="Function">reify</a> <a id="2954" class="Symbol">(</a><a id="2955" href="Type.BetaNBE.html#2783" class="Function">eval</a> <a id="2960" href="Type.BetaNBE.html#2937" class="Bound">A</a> <a id="2962" href="Type.BetaNBE.html#2944" class="Bound">ρ</a><a id="2963" class="Symbol">)</a> <a id="2965" href="Type.BetaNormal.html#1150" class="InductiveConstructor Operator">⇒</a> <a id="2967" href="Type.BetaNBE.html#1552" class="Function">reify</a> <a id="2973" class="Symbol">(</a><a id="2974" href="Type.BetaNBE.html#2783" class="Function">eval</a> <a id="2979" href="Type.BetaNBE.html#2941" class="Bound">B</a> <a id="2981" href="Type.BetaNBE.html#2944" class="Bound">ρ</a><a id="2982" class="Symbol">)</a>
<a id="2984" href="Type.BetaNBE.html#2783" class="Function">eval</a> <a id="2989" class="Symbol">(</a><a id="2990" href="Type.html#2021" class="InductiveConstructor">ƛ</a> <a id="2992" href="Type.BetaNBE.html#2992" class="Bound">B</a><a id="2993" class="Symbol">)</a>   <a id="2997" href="Type.BetaNBE.html#2997" class="Bound">ρ</a> <a id="2999" class="Symbol">=</a> <a id="3001" href="Data.Sum.Base.html#495" class="InductiveConstructor">inj₂</a> <a id="3006" class="Symbol">λ</a> <a id="3008" href="Type.BetaNBE.html#3008" class="Bound">ρ&#39;</a> <a id="3011" href="Type.BetaNBE.html#3011" class="Bound">v</a> <a id="3013" class="Symbol">→</a> <a id="3015" href="Type.BetaNBE.html#2783" class="Function">eval</a> <a id="3020" href="Type.BetaNBE.html#2992" class="Bound">B</a> <a id="3022" class="Symbol">((</a><a id="3024" href="Type.BetaNBE.html#1239" class="Function">renval</a> <a id="3031" href="Type.BetaNBE.html#3008" class="Bound">ρ&#39;</a> <a id="3034" href="Function.html#759" class="Function Operator">∘</a> <a id="3036" href="Type.BetaNBE.html#2997" class="Bound">ρ</a><a id="3037" class="Symbol">)</a> <a id="3039" href="Type.BetaNBE.html#1913" class="Function Operator">,,⋆</a> <a id="3043" href="Type.BetaNBE.html#3011" class="Bound">v</a><a id="3044" class="Symbol">)</a>
<a id="3046" href="Type.BetaNBE.html#2783" class="Function">eval</a> <a id="3051" class="Symbol">(</a><a id="3052" href="Type.BetaNBE.html#3052" class="Bound">A</a> <a id="3054" href="Type.html#2093" class="InductiveConstructor Operator">·</a> <a id="3056" href="Type.BetaNBE.html#3056" class="Bound">B</a><a id="3057" class="Symbol">)</a> <a id="3059" href="Type.BetaNBE.html#3059" class="Bound">ρ</a> <a id="3061" class="Symbol">=</a> <a id="3063" href="Type.BetaNBE.html#2783" class="Function">eval</a> <a id="3068" href="Type.BetaNBE.html#3052" class="Bound">A</a> <a id="3070" href="Type.BetaNBE.html#3059" class="Bound">ρ</a> <a id="3072" href="Type.BetaNBE.html#2596" class="Function Operator">·V</a> <a id="3075" href="Type.BetaNBE.html#2783" class="Function">eval</a> <a id="3080" href="Type.BetaNBE.html#3056" class="Bound">B</a> <a id="3082" href="Type.BetaNBE.html#3059" class="Bound">ρ</a>
<a id="3084" href="Type.BetaNBE.html#2783" class="Function">eval</a> <a id="3089" class="Symbol">(</a><a id="3090" href="Type.html#2167" class="InductiveConstructor">μ</a> <a id="3092" href="Type.BetaNBE.html#3092" class="Bound">B</a><a id="3093" class="Symbol">)</a>   <a id="3097" href="Type.BetaNBE.html#3097" class="Bound">ρ</a> <a id="3099" class="Symbol">=</a> <a id="3101" href="Type.BetaNBE.html#903" class="Function">reflect</a> <a id="3109" class="Symbol">(</a><a id="3110" href="Type.BetaNormal.html#995" class="InductiveConstructor">μ</a> <a id="3112" class="Symbol">(</a><a id="3113" href="Type.BetaNBE.html#1552" class="Function">reify</a> <a id="3119" class="Symbol">(</a><a id="3120" href="Type.BetaNBE.html#2783" class="Function">eval</a> <a id="3125" href="Type.BetaNBE.html#3092" class="Bound">B</a> <a id="3127" class="Symbol">((</a><a id="3129" href="Type.BetaNBE.html#1239" class="Function">renval</a> <a id="3136" href="Type.html#1221" class="InductiveConstructor">S</a> <a id="3138" href="Function.html#759" class="Function Operator">∘</a> <a id="3140" href="Type.BetaNBE.html#3097" class="Bound">ρ</a><a id="3141" class="Symbol">)</a> <a id="3143" href="Type.BetaNBE.html#1913" class="Function Operator">,,⋆</a> <a id="3147" href="Type.BetaNBE.html#1137" class="Function">fresh</a><a id="3152" class="Symbol">))))</a>
\end{code}<a id="3167" class="Comment">

Identity environment

</a>\begin{code}
<a id="idEnv"></a><a id="3204" href="Type.BetaNBE.html#3204" class="Function">idEnv</a> <a id="3210" class="Symbol">:</a> <a id="3212" class="Symbol">∀</a> <a id="3214" href="Type.BetaNBE.html#3214" class="Bound">Γ</a> <a id="3216" class="Symbol">→</a> <a id="3218" href="Type.BetaNBE.html#1805" class="Function">Env</a> <a id="3222" href="Type.BetaNBE.html#3214" class="Bound">Γ</a> <a id="3224" href="Type.BetaNBE.html#3214" class="Bound">Γ</a>
<a id="3226" href="Type.BetaNBE.html#3204" class="Function">idEnv</a> <a id="3232" href="Type.BetaNBE.html#3232" class="Bound">Γ</a> <a id="3234" class="Symbol">=</a> <a id="3236" href="Type.BetaNBE.html#903" class="Function">reflect</a> <a id="3244" href="Function.html#759" class="Function Operator">∘</a> <a id="3246" href="Type.BetaNormal.html#852" class="InductiveConstructor">`</a>
\end{code}<a id="3258" class="Comment">

Normalisation a term yields a normal form. We evaluate in the identity
environment to yield a value in the same context as the original term
and then reify to yield a normal form

</a>\begin{code}
<a id="nf"></a><a id="3453" href="Type.BetaNBE.html#3453" class="Function">nf</a> <a id="3456" class="Symbol">:</a> <a id="3458" class="Symbol">∀{</a><a id="3460" href="Type.BetaNBE.html#3460" class="Bound">Γ</a> <a id="3462" href="Type.BetaNBE.html#3462" class="Bound">K</a><a id="3463" class="Symbol">}</a> <a id="3465" class="Symbol">→</a> <a id="3467" href="Type.BetaNBE.html#3460" class="Bound">Γ</a> <a id="3469" href="Type.html#1800" class="Datatype Operator">⊢⋆</a> <a id="3472" href="Type.BetaNBE.html#3462" class="Bound">K</a> <a id="3474" class="Symbol">→</a> <a id="3476" href="Type.BetaNBE.html#3460" class="Bound">Γ</a> <a id="3478" href="Type.BetaNormal.html#783" class="Datatype Operator">⊢Nf⋆</a> <a id="3483" href="Type.BetaNBE.html#3462" class="Bound">K</a>
<a id="3485" href="Type.BetaNBE.html#3453" class="Function">nf</a> <a id="3488" href="Type.BetaNBE.html#3488" class="Bound">t</a> <a id="3490" class="Symbol">=</a> <a id="3492" href="Type.BetaNBE.html#1552" class="Function">reify</a> <a id="3498" class="Symbol">(</a><a id="3499" href="Type.BetaNBE.html#2783" class="Function">eval</a> <a id="3504" href="Type.BetaNBE.html#3488" class="Bound">t</a> <a id="3506" class="Symbol">(</a><a id="3507" href="Type.BetaNBE.html#3204" class="Function">idEnv</a> <a id="3513" class="Symbol">_))</a>
\end{code}<a id="3527" class="Comment">
</a></pre></body></html>