<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Type.BetaNBE.Stability</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Markup">\begin{code}</a>
<a id="14" class="Keyword">module</a> <a id="21" href="Type.BetaNBE.Stability.html" class="Module">Type.BetaNBE.Stability</a> <a id="44" class="Keyword">where</a>
<a id="50" class="Markup">\end{code}</a><a id="60" class="Background">

</a><a id="62" class="Markup">\begin{code}</a>
<a id="75" class="Keyword">open</a> <a id="80" class="Keyword">import</a> <a id="87" href="Type.html" class="Module">Type</a>
<a id="92" class="Keyword">open</a> <a id="97" class="Keyword">import</a> <a id="104" href="Type.BetaNormal.html" class="Module">Type.BetaNormal</a>
<a id="120" class="Keyword">open</a> <a id="125" class="Keyword">import</a> <a id="132" href="Type.BetaNormal.Equality.html" class="Module">Type.BetaNormal.Equality</a>
<a id="157" class="Keyword">open</a> <a id="162" class="Keyword">import</a> <a id="169" href="Type.BetaNBE.html" class="Module">Type.BetaNBE</a>
<a id="182" class="Keyword">open</a> <a id="187" class="Keyword">import</a> <a id="194" href="Type.BetaNBE.Completeness.html" class="Module">Type.BetaNBE.Completeness</a>

<a id="221" class="Keyword">open</a> <a id="226" class="Keyword">import</a> <a id="233" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a>
<a id="271" class="Keyword">open</a> <a id="276" class="Keyword">import</a> <a id="283" href="Function.html" class="Module">Function</a>
<a id="292" class="Markup">\end{code}</a><a id="302" class="Background">

If you take a normal form, embed it back into syntax and then
normalize it again, you get the same result. This is an important
property for substitution on normal forms: we don&#39;t want to eta expand
variables otherwise substituting in by the identity substitution can
perturb the expression.

</a><a id="597" class="Markup">\begin{code}</a>
<a id="stability"></a><a id="610" href="Type.BetaNBE.Stability.html#610" class="Function">stability</a> <a id="620" class="Symbol">:</a> <a id="622" class="Symbol">∀{</a><a id="624" href="Type.BetaNBE.Stability.html#624" class="Bound">Φ</a> <a id="626" href="Type.BetaNBE.Stability.html#626" class="Bound">K</a><a id="627" class="Symbol">}(</a><a id="629" href="Type.BetaNBE.Stability.html#629" class="Bound">n</a> <a id="631" class="Symbol">:</a> <a id="633" href="Type.BetaNBE.Stability.html#624" class="Bound">Φ</a> <a id="635" href="Type.BetaNormal.html#860" class="Datatype Operator">⊢Nf⋆</a> <a id="640" href="Type.BetaNBE.Stability.html#626" class="Bound">K</a><a id="641" class="Symbol">)</a> <a id="643" class="Symbol">→</a> <a id="645" href="Type.BetaNBE.html#3958" class="Function">nf</a> <a id="648" class="Symbol">(</a><a id="649" href="Type.BetaNormal.html#2358" class="Function">embNf</a> <a id="655" href="Type.BetaNBE.Stability.html#629" class="Bound">n</a><a id="656" class="Symbol">)</a> <a id="658" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="660" href="Type.BetaNBE.Stability.html#629" class="Bound">n</a>
<a id="stabilityNe"></a><a id="662" href="Type.BetaNBE.Stability.html#662" class="Function">stabilityNe</a> <a id="674" class="Symbol">:</a> <a id="676" class="Symbol">∀{</a><a id="678" href="Type.BetaNBE.Stability.html#678" class="Bound">Φ</a> <a id="680" href="Type.BetaNBE.Stability.html#680" class="Bound">K</a><a id="681" class="Symbol">}(</a><a id="683" href="Type.BetaNBE.Stability.html#683" class="Bound">n</a> <a id="685" class="Symbol">:</a> <a id="687" href="Type.BetaNBE.Stability.html#678" class="Bound">Φ</a> <a id="689" href="Type.BetaNormal.html#893" class="Datatype Operator">⊢Ne⋆</a> <a id="694" href="Type.BetaNBE.Stability.html#680" class="Bound">K</a><a id="695" class="Symbol">)</a> <a id="697" class="Symbol">→</a> <a id="699" href="Type.BetaNBE.Completeness.html#659" class="Function">CR</a> <a id="702" href="Type.BetaNBE.Stability.html#680" class="Bound">K</a> <a id="704" class="Symbol">(</a><a id="705" href="Type.BetaNBE.html#3290" class="Function">eval</a> <a id="710" class="Symbol">(</a><a id="711" href="Type.BetaNormal.html#2393" class="Function">embNe</a> <a id="717" href="Type.BetaNBE.Stability.html#683" class="Bound">n</a><a id="718" class="Symbol">)</a> <a id="720" class="Symbol">(</a><a id="721" href="Type.BetaNBE.html#3709" class="Function">idEnv</a> <a id="727" class="Symbol">_))</a> <a id="731" class="Symbol">(</a><a id="732" href="Type.BetaNBE.html#862" class="Function">reflect</a> <a id="740" href="Type.BetaNBE.Stability.html#683" class="Bound">n</a><a id="741" class="Symbol">)</a>

<a id="744" href="Type.BetaNBE.Stability.html#610" class="Function">stability</a> <a id="754" class="Symbol">(</a><a id="755" href="Type.BetaNormal.html#1087" class="InductiveConstructor">Π</a> <a id="757" href="Type.BetaNBE.Stability.html#757" class="Bound">B</a><a id="758" class="Symbol">)</a> <a id="760" class="Symbol">=</a>
  <a id="764" href="Relation.Binary.PropositionalEquality.Core.html#1131" class="Function">cong</a> <a id="769" href="Type.BetaNormal.html#1087" class="InductiveConstructor">Π</a> <a id="771" class="Symbol">(</a><a id="772" href="Relation.Binary.PropositionalEquality.Core.html#1025" class="Function">trans</a> <a id="778" class="Symbol">(</a><a id="779" href="Type.BetaNBE.Completeness.html#8526" class="Function">idext</a> <a id="785" class="Symbol">(λ</a> <a id="788" class="Symbol">{</a> <a id="790" href="Type.html#1347" class="InductiveConstructor">Z</a> <a id="792" class="Symbol">→</a> <a id="794" href="Type.BetaNBE.Completeness.html#3212" class="Function">reflectCR</a> <a id="804" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
                          <a id="835" class="Symbol">;</a> <a id="837" class="Symbol">(</a><a id="838" href="Type.html#1400" class="InductiveConstructor">S</a> <a id="840" href="Type.BetaNBE.Stability.html#840" class="Bound">α</a><a id="841" class="Symbol">)</a> <a id="843" class="Symbol">→</a> <a id="845" href="Type.BetaNBE.Completeness.html#4747" class="Function">renVal-reflect</a> <a id="860" href="Type.html#1400" class="InductiveConstructor">S</a> <a id="862" class="Symbol">(</a><a id="863" href="Type.BetaNormal.html#928" class="InductiveConstructor">`</a> <a id="865" href="Type.BetaNBE.Stability.html#840" class="Bound">α</a><a id="866" class="Symbol">)})</a>
                       <a id="893" class="Symbol">(</a><a id="894" href="Type.BetaNormal.html#2358" class="Function">embNf</a> <a id="900" href="Type.BetaNBE.Stability.html#757" class="Bound">B</a><a id="901" class="Symbol">))</a>
                <a id="920" class="Symbol">(</a><a id="921" href="Type.BetaNBE.Stability.html#610" class="Function">stability</a> <a id="931" href="Type.BetaNBE.Stability.html#757" class="Bound">B</a><a id="932" class="Symbol">))</a>
<a id="935" href="Type.BetaNBE.Stability.html#610" class="Function">stability</a> <a id="945" class="Symbol">(</a><a id="946" href="Type.BetaNBE.Stability.html#946" class="Bound">A</a> <a id="948" href="Type.BetaNormal.html#1155" class="InductiveConstructor Operator">⇒</a> <a id="950" href="Type.BetaNBE.Stability.html#950" class="Bound">B</a><a id="951" class="Symbol">)</a> <a id="953" class="Symbol">=</a> <a id="955" href="Relation.Binary.PropositionalEquality.html#1524" class="Function">cong₂</a> <a id="961" href="Type.BetaNormal.html#1155" class="InductiveConstructor Operator">_⇒_</a> <a id="965" class="Symbol">(</a><a id="966" href="Type.BetaNBE.Stability.html#610" class="Function">stability</a> <a id="976" href="Type.BetaNBE.Stability.html#946" class="Bound">A</a><a id="977" class="Symbol">)</a> <a id="979" class="Symbol">(</a><a id="980" href="Type.BetaNBE.Stability.html#610" class="Function">stability</a> <a id="990" href="Type.BetaNBE.Stability.html#950" class="Bound">B</a><a id="991" class="Symbol">)</a>
<a id="993" href="Type.BetaNBE.Stability.html#610" class="Function">stability</a> <a id="1003" class="Symbol">(</a><a id="1004" href="Type.BetaNormal.html#1228" class="InductiveConstructor">ƛ</a> <a id="1006" href="Type.BetaNBE.Stability.html#1006" class="Bound">B</a><a id="1007" class="Symbol">)</a>    <a id="1012" class="Symbol">=</a>
  <a id="1016" href="Relation.Binary.PropositionalEquality.Core.html#1131" class="Function">cong</a> <a id="1021" href="Type.BetaNormal.html#1228" class="InductiveConstructor">ƛ</a> <a id="1023" class="Symbol">(</a><a id="1024" href="Relation.Binary.PropositionalEquality.Core.html#1025" class="Function">trans</a> <a id="1030" class="Symbol">(</a><a id="1031" href="Type.BetaNBE.Completeness.html#3395" class="Function">reifyCR</a> <a id="1039" class="Symbol">(</a><a id="1040" href="Type.BetaNBE.Completeness.html#8526" class="Function">idext</a> <a id="1046" class="Symbol">(λ</a> <a id="1049" class="Symbol">{</a> <a id="1051" href="Type.html#1347" class="InductiveConstructor">Z</a> <a id="1053" class="Symbol">→</a> <a id="1055" href="Type.BetaNBE.Completeness.html#3212" class="Function">reflectCR</a> <a id="1065" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
                                      <a id="1108" class="Symbol">;</a> <a id="1110" class="Symbol">(</a><a id="1111" href="Type.html#1400" class="InductiveConstructor">S</a> <a id="1113" href="Type.BetaNBE.Stability.html#1113" class="Bound">α</a><a id="1114" class="Symbol">)</a> <a id="1116" class="Symbol">→</a> <a id="1118" href="Type.BetaNBE.Completeness.html#4747" class="Function">renVal-reflect</a> <a id="1133" href="Type.html#1400" class="InductiveConstructor">S</a> <a id="1135" class="Symbol">(</a><a id="1136" href="Type.BetaNormal.html#928" class="InductiveConstructor">`</a> <a id="1138" href="Type.BetaNBE.Stability.html#1113" class="Bound">α</a><a id="1139" class="Symbol">)})</a>
                                   <a id="1178" class="Symbol">(</a><a id="1179" href="Type.BetaNormal.html#2358" class="Function">embNf</a> <a id="1185" href="Type.BetaNBE.Stability.html#1006" class="Bound">B</a><a id="1186" class="Symbol">)))</a>
                <a id="1206" class="Symbol">(</a><a id="1207" href="Type.BetaNBE.Stability.html#610" class="Function">stability</a> <a id="1217" href="Type.BetaNBE.Stability.html#1006" class="Bound">B</a><a id="1218" class="Symbol">))</a>
<a id="1221" href="Type.BetaNBE.Stability.html#610" class="Function">stability</a> <a id="1231" class="Symbol">(</a><a id="1232" href="Type.BetaNormal.html#1365" class="InductiveConstructor">con</a> <a id="1236" href="Type.BetaNBE.Stability.html#1236" class="Bound">tcn</a><a id="1239" class="Symbol">)</a>   <a id="1243" class="Symbol">=</a> <a id="1245" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="1250" href="Type.BetaNBE.Stability.html#610" class="Function">stability</a> <a id="1260" class="Symbol">(</a><a id="1261" href="Type.BetaNormal.html#1398" class="InductiveConstructor">μ</a> <a id="1263" href="Type.BetaNBE.Stability.html#1263" class="Bound">A</a> <a id="1265" href="Type.BetaNBE.Stability.html#1265" class="Bound">B</a><a id="1266" class="Symbol">)</a> <a id="1268" class="Symbol">=</a> <a id="1270" href="Relation.Binary.PropositionalEquality.html#1524" class="Function">cong₂</a> <a id="1276" href="Type.BetaNormal.html#1398" class="InductiveConstructor">μ</a> <a id="1278" class="Symbol">(</a><a id="1279" href="Type.BetaNBE.Stability.html#610" class="Function">stability</a> <a id="1289" href="Type.BetaNBE.Stability.html#1263" class="Bound">A</a><a id="1290" class="Symbol">)</a> <a id="1292" class="Symbol">(</a><a id="1293" href="Type.BetaNBE.Stability.html#610" class="Function">stability</a> <a id="1303" href="Type.BetaNBE.Stability.html#1265" class="Bound">B</a><a id="1304" class="Symbol">)</a>
<a id="1306" href="Type.BetaNBE.Stability.html#610" class="Function">stability</a> <a id="1316" class="Symbol">{</a><a id="1317" class="Argument">K</a> <a id="1319" class="Symbol">=</a> <a id="1321" href="Type.html#615" class="InductiveConstructor">*</a><a id="1322" class="Symbol">}</a>     <a id="1328" class="Symbol">(</a><a id="1329" href="Type.BetaNormal.html#1305" class="InductiveConstructor">ne</a> <a id="1332" href="Type.BetaNBE.Stability.html#1332" class="Bound">n</a><a id="1333" class="Symbol">)</a> <a id="1335" class="Symbol">=</a> <a id="1337" href="Type.BetaNBE.Stability.html#662" class="Function">stabilityNe</a> <a id="1349" href="Type.BetaNBE.Stability.html#1332" class="Bound">n</a>
<a id="1351" href="Type.BetaNBE.Stability.html#610" class="Function">stability</a> <a id="1361" class="Symbol">{</a><a id="1362" class="Argument">K</a> <a id="1364" class="Symbol">=</a> <a id="1366" href="Type.BetaNBE.Stability.html#1366" class="Bound">K</a> <a id="1368" href="Type.html#650" class="InductiveConstructor Operator">⇒</a> <a id="1370" href="Type.BetaNBE.Stability.html#1370" class="Bound">J</a><a id="1371" class="Symbol">}</a> <a id="1373" class="Symbol">(</a><a id="1374" href="Type.BetaNormal.html#1305" class="InductiveConstructor">ne</a> <a id="1377" href="Type.BetaNBE.Stability.html#1377" class="Bound">n</a><a id="1378" class="Symbol">)</a> <a id="1380" class="Symbol">=</a> <a id="1382" href="Type.BetaNBE.Completeness.html#3395" class="Function">reifyCR</a> <a id="1390" class="Symbol">(</a><a id="1391" href="Type.BetaNBE.Stability.html#662" class="Function">stabilityNe</a> <a id="1403" href="Type.BetaNBE.Stability.html#1377" class="Bound">n</a><a id="1404" class="Symbol">)</a>

<a id="1407" href="Type.BetaNBE.Stability.html#662" class="Function">stabilityNe</a> <a id="1419" class="Symbol">(</a><a id="1420" href="Type.BetaNormal.html#928" class="InductiveConstructor">`</a> <a id="1422" href="Type.BetaNBE.Stability.html#1422" class="Bound">α</a><a id="1423" class="Symbol">)</a>    <a id="1428" class="Symbol">=</a> <a id="1430" href="Type.BetaNBE.Completeness.html#3212" class="Function">reflectCR</a> <a id="1440" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="1445" href="Type.BetaNBE.Stability.html#662" class="Function">stabilityNe</a> <a id="1457" class="Symbol">(</a><a id="1458" href="Type.BetaNBE.Stability.html#1458" class="Bound">n</a> <a id="1460" href="Type.BetaNormal.html#986" class="InductiveConstructor Operator">·</a> <a id="1462" href="Type.BetaNBE.Stability.html#1462" class="Bound">n&#39;</a><a id="1464" class="Symbol">)</a> <a id="1466" class="Symbol">=</a> <a id="1468" href="Type.BetaNBE.Completeness.html#2023" class="Function">transCR</a>
  <a id="1478" class="Symbol">(</a><a id="1479" href="Type.BetaNBE.Completeness.html#4329" class="Function">AppCR</a> <a id="1485" class="Symbol">(</a><a id="1486" href="Type.BetaNBE.Stability.html#662" class="Function">stabilityNe</a> <a id="1498" href="Type.BetaNBE.Stability.html#1458" class="Bound">n</a><a id="1499" class="Symbol">)</a> <a id="1501" class="Symbol">(</a><a id="1502" href="Type.BetaNBE.Completeness.html#8526" class="Function">idext</a> <a id="1508" href="Type.BetaNBE.Completeness.html#16086" class="Function">idCR</a> <a id="1513" class="Symbol">(</a><a id="1514" href="Type.BetaNormal.html#2358" class="Function">embNf</a> <a id="1520" href="Type.BetaNBE.Stability.html#1462" class="Bound">n&#39;</a><a id="1522" class="Symbol">)))</a>
  <a id="1528" class="Symbol">(</a><a id="1529" href="Type.BetaNBE.Completeness.html#3212" class="Function">reflectCR</a> <a id="1539" class="Symbol">(</a><a id="1540" href="Relation.Binary.PropositionalEquality.html#1524" class="Function">cong₂</a> <a id="1546" href="Type.BetaNormal.html#986" class="InductiveConstructor Operator">_·_</a> <a id="1550" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="1555" class="Symbol">(</a><a id="1556" href="Type.BetaNBE.Stability.html#610" class="Function">stability</a> <a id="1566" href="Type.BetaNBE.Stability.html#1462" class="Bound">n&#39;</a><a id="1568" class="Symbol">)))</a>
<a id="1572" class="Markup">\end{code}</a><a id="1582" class="Background">
</a></pre></body></html>