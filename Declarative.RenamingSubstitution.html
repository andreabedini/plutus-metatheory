<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>(Declarative) Term Renaming and Substitution | Plutus metatheory library</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="(Declarative) Term Renaming and Substitution" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="This repository contains a model of Plutus Core (PLC) written in Agda. We prove metatheoretic properties of the model in Agda and test the production PLC implementation against the model in Haskell by compiling the Agda code to Haskell and executing it." />
<meta property="og:description" content="This repository contains a model of Plutus Core (PLC) written in Agda. We prove metatheoretic properties of the model in Agda and test the production PLC implementation against the model in Haskell by compiling the Agda code to Haskell and executing it." />
<link rel="canonical" href="/plutus-metatheory/Declarative.RenamingSubstitution.html" />
<meta property="og:url" content="/plutus-metatheory/Declarative.RenamingSubstitution.html" />
<meta property="og:site_name" content="Plutus metatheory library" />
<script type="application/ld+json">
{"description":"This repository contains a model of Plutus Core (PLC) written in Agda. We prove metatheoretic properties of the model in Agda and test the production PLC implementation against the model in Haskell by compiling the Agda code to Haskell and executing it.","headline":"(Declarative) Term Renaming and Substitution","@type":"WebPage","url":"/plutus-metatheory/Declarative.RenamingSubstitution.html","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/plutus-metatheory/assets/main.css"><link type="application/atom+xml" rel="alternate" href="/plutus-metatheory/feed.xml" title="Plutus metatheory library" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/plutus-metatheory/">Plutus metatheory library</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/plutus-metatheory/">Table of Contents</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <link rel="stylesheet" href="/plutus-metatheory/assets/css/Agda.css">
    <h1 class="post-title">(Declarative) Term Renaming and Substitution</h1>
  </header>

  <div class="post-content">
    <pre class="Agda"><a id="80" class="Keyword">module</a> <a id="87" href="Declarative.RenamingSubstitution.html" class="Module">Declarative.RenamingSubstitution</a> <a id="120" class="Keyword">where</a>
</pre>
<h2 id="imports">Imports</h2>

<pre class="Agda"><a id="147" class="Keyword">open</a> <a id="152" class="Keyword">import</a> <a id="159" href="Function.html" class="Module">Function</a> <a id="168" class="Keyword">using</a> <a id="174" class="Symbol">(</a><a id="175" href="Function.Base.html#615" class="Function">id</a><a id="177" class="Symbol">;</a> <a id="179" href="Function.Base.html#992" class="Function Operator">_∘_</a><a id="182" class="Symbol">)</a>
<a id="184" class="Keyword">open</a> <a id="189" class="Keyword">import</a> <a id="196" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a>
  <a id="236" class="Keyword">renaming</a> <a id="245" class="Symbol">(</a><a id="246" href="Relation.Binary.PropositionalEquality.Core.html#1076" class="Function">subst</a> <a id="252" class="Symbol">to</a> <a id="PropositionalEquality.Core.subst"></a><a id="255" href="Declarative.RenamingSubstitution.html#255" class="Function">substEq</a><a id="262" class="Symbol">)</a> <a id="264" class="Keyword">using</a> <a id="270" class="Symbol">(</a><a id="271" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">_≡_</a><a id="274" class="Symbol">;</a> <a id="276" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="280" class="Symbol">;</a> <a id="282" href="Relation.Binary.PropositionalEquality.Core.html#1131" class="Function">cong</a><a id="286" class="Symbol">;</a> <a id="288" href="Relation.Binary.PropositionalEquality.html#1524" class="Function">cong₂</a><a id="293" class="Symbol">;</a> <a id="295" href="Relation.Binary.PropositionalEquality.Core.html#1025" class="Function">trans</a><a id="300" class="Symbol">;</a> <a id="302" href="Relation.Binary.PropositionalEquality.Core.html#980" class="Function">sym</a><a id="305" class="Symbol">)</a>
<a id="307" class="Keyword">open</a> <a id="312" class="Keyword">import</a> <a id="319" href="Data.Unit.html" class="Module">Data.Unit</a>
<a id="329" class="Keyword">open</a> <a id="334" class="Keyword">import</a> <a id="341" href="Data.Product.html" class="Module">Data.Product</a> <a id="354" class="Keyword">renaming</a> <a id="363" class="Symbol">(</a><a id="364" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">_,_</a> <a id="368" class="Symbol">to</a> <a id="Sigma._,_"></a><a id="371" href="Declarative.RenamingSubstitution.html#371" class="InductiveConstructor Operator">_,,_</a><a id="375" class="Symbol">)</a>
<a id="377" class="Keyword">open</a> <a id="382" class="Keyword">import</a> <a id="389" href="Data.List.html" class="Module">Data.List</a>

<a id="400" class="Keyword">open</a> <a id="405" class="Keyword">import</a> <a id="412" href="Type.html" class="Module">Type</a>
<a id="417" class="Keyword">import</a> <a id="424" href="Type.RenamingSubstitution.html" class="Module">Type.RenamingSubstitution</a> <a id="450" class="Symbol">as</a> <a id="453" class="Module">⋆</a>
<a id="455" class="Keyword">open</a> <a id="460" class="Keyword">import</a> <a id="467" href="Type.Equality.html" class="Module">Type.Equality</a>
<a id="481" class="Keyword">open</a> <a id="486" class="Keyword">import</a> <a id="493" href="Builtin.Signature.html" class="Module">Builtin.Signature</a>
  <a id="513" href="Type.html#958" class="Datatype">Ctx⋆</a> <a id="518" href="Type.html#572" class="Datatype">Kind</a> <a id="523" href="Type.html#977" class="InductiveConstructor">∅</a> <a id="525" href="Type.html#988" class="InductiveConstructor Operator">_,⋆_</a> <a id="530" href="Type.html#591" class="InductiveConstructor">*</a> <a id="532" href="Type.html#1330" class="Datatype Operator">_∋⋆_</a> <a id="537" href="Type.html#1364" class="InductiveConstructor">Z</a> <a id="539" href="Type.html#1403" class="InductiveConstructor">S</a> <a id="541" href="Type.html#2011" class="Datatype Operator">_⊢⋆_</a> <a id="546" href="Type.html#2045" class="InductiveConstructor">`</a> <a id="548" href="Type.html#2400" class="InductiveConstructor">con</a>
<a id="552" class="Keyword">open</a> <a id="557" class="Keyword">import</a> <a id="564" href="Builtin.Constant.Term.html" class="Module">Builtin.Constant.Term</a> <a id="586" href="Type.html#958" class="Datatype">Ctx⋆</a> <a id="591" href="Type.html#572" class="Datatype">Kind</a> <a id="596" href="Type.html#591" class="InductiveConstructor">*</a> <a id="598" href="Type.html#2011" class="Datatype Operator">_⊢⋆_</a> <a id="603" href="Type.html#2400" class="InductiveConstructor">con</a>
<a id="607" class="Keyword">open</a> <a id="612" class="Keyword">import</a> <a id="619" href="Declarative.html" class="Module">Declarative</a>
</pre>

<h2 id="renaming">Renaming</h2>

<p>A term renaming maps every term variables in a context <code class="language-plaintext highlighter-rouge">Γ</code> to a
variable in context <code class="language-plaintext highlighter-rouge">Δ</code>. It is indexed by a type renaming which does
the same thing for type variables.</p>

<pre class="Agda"><a id="Ren"></a><a id="823" href="Declarative.RenamingSubstitution.html#823" class="Function">Ren</a> <a id="827" class="Symbol">:</a> <a id="829" class="Symbol">∀</a> <a id="831" href="Declarative.RenamingSubstitution.html#831" class="Bound">Γ</a> <a id="833" href="Declarative.RenamingSubstitution.html#833" class="Bound">Δ</a> <a id="835" class="Symbol">→</a> <a id="837" href="Type.RenamingSubstitution.html#396" class="Function">⋆.Ren</a> <a id="843" href="Type.html#1078" class="Generalizable">Φ</a> <a id="845" href="Type.html#1080" class="Generalizable">Ψ</a> <a id="847" class="Symbol">→</a> <a id="849" class="PrimitiveType">Set</a>
<a id="853" href="Declarative.RenamingSubstitution.html#823" class="Function">Ren</a> <a id="857" href="Declarative.RenamingSubstitution.html#857" class="Bound">Γ</a> <a id="859" href="Declarative.RenamingSubstitution.html#859" class="Bound">Δ</a> <a id="861" href="Declarative.RenamingSubstitution.html#861" class="Bound">ρ</a> <a id="863" class="Symbol">=</a> <a id="865" class="Symbol">∀{</a><a id="867" href="Declarative.RenamingSubstitution.html#867" class="Bound">A</a><a id="868" class="Symbol">}</a> <a id="870" class="Symbol">→</a> <a id="872" href="Declarative.RenamingSubstitution.html#857" class="Bound">Γ</a> <a id="874" href="Declarative.html#1844" class="Datatype Operator">∋</a> <a id="876" href="Declarative.RenamingSubstitution.html#867" class="Bound">A</a> <a id="878" class="Symbol">→</a> <a id="880" href="Declarative.RenamingSubstitution.html#859" class="Bound">Δ</a> <a id="882" href="Declarative.html#1844" class="Datatype Operator">∋</a> <a id="884" href="Type.RenamingSubstitution.html#757" class="Function">⋆.ren</a> <a id="890" href="Declarative.RenamingSubstitution.html#861" class="Bound">ρ</a> <a id="892" href="Declarative.RenamingSubstitution.html#867" class="Bound">A</a>
</pre>
<p>Extending a renaming to work on longer context extended by an
additional variable - used when going under a binder. It maps the new
variable <code class="language-plaintext highlighter-rouge">Z</code> to <code class="language-plaintext highlighter-rouge">Z</code> and shift everything else along.</p>

<pre class="Agda"><a id="ext"></a><a id="1089" href="Declarative.RenamingSubstitution.html#1089" class="Function">ext</a> <a id="1093" class="Symbol">:</a> <a id="1095" class="Symbol">(</a><a id="1096" href="Declarative.RenamingSubstitution.html#1096" class="Bound">ρ⋆</a> <a id="1099" class="Symbol">:</a> <a id="1101" href="Type.RenamingSubstitution.html#396" class="Function">⋆.Ren</a> <a id="1107" href="Type.html#1078" class="Generalizable">Φ</a> <a id="1109" href="Type.html#1080" class="Generalizable">Ψ</a><a id="1110" class="Symbol">)</a>
    <a id="1116" class="Symbol">→</a> <a id="1118" href="Declarative.RenamingSubstitution.html#823" class="Function">Ren</a> <a id="1122" href="Declarative.html#1692" class="Generalizable">Γ</a> <a id="1124" href="Declarative.html#1694" class="Generalizable">Δ</a> <a id="1126" href="Declarative.RenamingSubstitution.html#1096" class="Bound">ρ⋆</a>
    <a id="1133" class="Symbol">→</a> <a id="1135" class="Symbol">∀{</a><a id="1137" href="Declarative.RenamingSubstitution.html#1137" class="Bound">B</a><a id="1138" class="Symbol">}</a>
      <a id="1146" class="Comment">-------------------------------</a>
    <a id="1182" class="Symbol">→</a> <a id="1184" href="Declarative.RenamingSubstitution.html#823" class="Function">Ren</a> <a id="1188" class="Symbol">(</a><a id="1189" href="Declarative.html#1692" class="Generalizable">Γ</a> <a id="1191" href="Declarative.html#1603" class="InductiveConstructor Operator">,</a> <a id="1193" href="Declarative.RenamingSubstitution.html#1137" class="Bound">B</a><a id="1194" class="Symbol">)</a> <a id="1196" class="Symbol">(</a><a id="1197" href="Declarative.html#1694" class="Generalizable">Δ</a> <a id="1199" href="Declarative.html#1603" class="InductiveConstructor Operator">,</a> <a id="1201" href="Type.RenamingSubstitution.html#757" class="Function">⋆.ren</a> <a id="1207" href="Declarative.RenamingSubstitution.html#1096" class="Bound">ρ⋆</a> <a id="1210" href="Declarative.RenamingSubstitution.html#1137" class="Bound">B</a><a id="1211" class="Symbol">)</a> <a id="1213" href="Declarative.RenamingSubstitution.html#1096" class="Bound">ρ⋆</a>
<a id="1216" href="Declarative.RenamingSubstitution.html#1089" class="Function">ext</a> <a id="1220" class="Symbol">_</a> <a id="1222" href="Declarative.RenamingSubstitution.html#1222" class="Bound">ρ</a> <a id="1224" href="Declarative.html#1885" class="InductiveConstructor">Z</a>     <a id="1230" class="Symbol">=</a> <a id="1232" href="Declarative.html#1885" class="InductiveConstructor">Z</a> 
<a id="1235" href="Declarative.RenamingSubstitution.html#1089" class="Function">ext</a> <a id="1239" class="Symbol">_</a> <a id="1241" href="Declarative.RenamingSubstitution.html#1241" class="Bound">ρ</a> <a id="1243" class="Symbol">(</a><a id="1244" href="Declarative.html#1919" class="InductiveConstructor">S</a> <a id="1246" href="Declarative.RenamingSubstitution.html#1246" class="Bound">x</a><a id="1247" class="Symbol">)</a> <a id="1249" class="Symbol">=</a> <a id="1251" href="Declarative.html#1919" class="InductiveConstructor">S</a> <a id="1253" class="Symbol">(</a><a id="1254" href="Declarative.RenamingSubstitution.html#1241" class="Bound">ρ</a> <a id="1256" href="Declarative.RenamingSubstitution.html#1246" class="Bound">x</a><a id="1257" class="Symbol">)</a>
</pre>
<p>Extending a renaming to work on a context extended by one additional
type variable - used when going under a type binder. This doesn’t
actually change any term variables, it is a case of managing the type
information.</p>

<pre class="Agda"><a id="ext⋆"></a><a id="1487" href="Declarative.RenamingSubstitution.html#1487" class="Function">ext⋆</a> <a id="1492" class="Symbol">:</a> <a id="1494" class="Symbol">(</a><a id="1495" href="Declarative.RenamingSubstitution.html#1495" class="Bound">ρ⋆</a> <a id="1498" class="Symbol">:</a> <a id="1500" href="Type.RenamingSubstitution.html#396" class="Function">⋆.Ren</a> <a id="1506" href="Type.html#1078" class="Generalizable">Φ</a> <a id="1508" href="Type.html#1080" class="Generalizable">Ψ</a><a id="1509" class="Symbol">)</a>
     <a id="1516" class="Symbol">→</a> <a id="1518" href="Declarative.RenamingSubstitution.html#823" class="Function">Ren</a> <a id="1522" href="Declarative.html#1692" class="Generalizable">Γ</a> <a id="1524" href="Declarative.html#1694" class="Generalizable">Δ</a> <a id="1526" href="Declarative.RenamingSubstitution.html#1495" class="Bound">ρ⋆</a>
     <a id="1534" class="Symbol">→</a> <a id="1536" class="Symbol">∀</a> <a id="1538" class="Symbol">{</a><a id="1539" href="Declarative.RenamingSubstitution.html#1539" class="Bound">K</a><a id="1540" class="Symbol">}</a>
       <a id="1549" class="Comment">--------------------------------</a>
     <a id="1587" class="Symbol">→</a> <a id="1589" href="Declarative.RenamingSubstitution.html#823" class="Function">Ren</a> <a id="1593" class="Symbol">(</a><a id="1594" href="Declarative.html#1692" class="Generalizable">Γ</a> <a id="1596" href="Declarative.html#1560" class="InductiveConstructor Operator">,⋆</a> <a id="1599" href="Declarative.RenamingSubstitution.html#1539" class="Bound">K</a><a id="1600" class="Symbol">)</a> <a id="1602" class="Symbol">(</a><a id="1603" href="Declarative.html#1694" class="Generalizable">Δ</a> <a id="1605" href="Declarative.html#1560" class="InductiveConstructor Operator">,⋆</a> <a id="1608" href="Declarative.RenamingSubstitution.html#1539" class="Bound">K</a><a id="1609" class="Symbol">)</a> <a id="1611" class="Symbol">(</a><a id="1612" href="Type.RenamingSubstitution.html#587" class="Function">⋆.ext</a> <a id="1618" href="Declarative.RenamingSubstitution.html#1495" class="Bound">ρ⋆</a><a id="1620" class="Symbol">)</a>
<a id="1622" href="Declarative.RenamingSubstitution.html#1487" class="Function">ext⋆</a> <a id="1627" class="Symbol">_</a> <a id="1629" href="Declarative.RenamingSubstitution.html#1629" class="Bound">ρ</a> <a id="1631" class="Symbol">(</a><a id="1632" href="Declarative.html#1965" class="InductiveConstructor">T</a> <a id="1634" href="Declarative.RenamingSubstitution.html#1634" class="Bound">x</a><a id="1635" class="Symbol">)</a> <a id="1637" class="Symbol">=</a> <a id="1639" href="Declarative.html#5574" class="Function">conv∋</a>
  <a id="1647" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
  <a id="1654" class="Symbol">(</a><a id="1655" href="Relation.Binary.PropositionalEquality.Core.html#1025" class="Function">trans</a> <a id="1661" class="Symbol">(</a><a id="1662" href="Relation.Binary.PropositionalEquality.Core.html#980" class="Function">sym</a> <a id="1666" class="Symbol">(</a><a id="1667" href="Type.RenamingSubstitution.html#3169" class="Function">⋆.ren-comp</a> <a id="1678" class="Symbol">_))</a> <a id="1682" class="Symbol">(</a><a id="1683" href="Type.RenamingSubstitution.html#3169" class="Function">⋆.ren-comp</a> <a id="1694" class="Symbol">_))</a>
  <a id="1700" class="Symbol">(</a><a id="1701" href="Declarative.html#1965" class="InductiveConstructor">T</a> <a id="1703" class="Symbol">(</a><a id="1704" href="Declarative.RenamingSubstitution.html#1629" class="Bound">ρ</a> <a id="1706" href="Declarative.RenamingSubstitution.html#1634" class="Bound">x</a><a id="1707" class="Symbol">))</a>
</pre>
<p>Renaming a term constant</p>

<pre class="Agda"><a id="renTermCon"></a><a id="1745" href="Declarative.RenamingSubstitution.html#1745" class="Function">renTermCon</a> <a id="1756" class="Symbol">:</a> <a id="1758" class="Symbol">(</a><a id="1759" href="Declarative.RenamingSubstitution.html#1759" class="Bound">ρ⋆</a> <a id="1762" class="Symbol">:</a> <a id="1764" href="Type.RenamingSubstitution.html#396" class="Function">⋆.Ren</a> <a id="1770" href="Type.html#1078" class="Generalizable">Φ</a> <a id="1772" href="Type.html#1080" class="Generalizable">Ψ</a><a id="1773" class="Symbol">)</a>
             <a id="1788" class="Comment">------------------------------------------</a>
           <a id="1842" class="Symbol">→</a> <a id="1844" class="Symbol">(∀{</a><a id="1847" href="Declarative.RenamingSubstitution.html#1847" class="Bound">A</a><a id="1848" class="Symbol">}</a> <a id="1850" class="Symbol">→</a> <a id="1852" href="Builtin.Constant.Term.html#327" class="Datatype">TermCon</a> <a id="1860" href="Declarative.RenamingSubstitution.html#1847" class="Bound">A</a> <a id="1862" class="Symbol">→</a> <a id="1864" href="Builtin.Constant.Term.html#327" class="Datatype">TermCon</a> <a id="1872" class="Symbol">(</a><a id="1873" href="Type.RenamingSubstitution.html#757" class="Function">⋆.ren</a> <a id="1879" href="Declarative.RenamingSubstitution.html#1759" class="Bound">ρ⋆</a> <a id="1882" href="Declarative.RenamingSubstitution.html#1847" class="Bound">A</a> <a id="1884" class="Symbol">))</a>
<a id="1887" href="Declarative.RenamingSubstitution.html#1745" class="Function">renTermCon</a> <a id="1898" class="Symbol">_</a> <a id="1900" class="Symbol">(</a><a id="1901" href="Builtin.Constant.Term.html#362" class="InductiveConstructor">integer</a> <a id="1909" href="Declarative.RenamingSubstitution.html#1909" class="Bound">i</a><a id="1910" class="Symbol">)</a>    <a id="1915" class="Symbol">=</a> <a id="1917" href="Builtin.Constant.Term.html#362" class="InductiveConstructor">integer</a> <a id="1925" href="Declarative.RenamingSubstitution.html#1909" class="Bound">i</a>
<a id="1927" href="Declarative.RenamingSubstitution.html#1745" class="Function">renTermCon</a> <a id="1938" class="Symbol">_</a> <a id="1940" class="Symbol">(</a><a id="1941" href="Builtin.Constant.Term.html#419" class="InductiveConstructor">bytestring</a> <a id="1952" href="Declarative.RenamingSubstitution.html#1952" class="Bound">b</a><a id="1953" class="Symbol">)</a> <a id="1955" class="Symbol">=</a> <a id="1957" href="Builtin.Constant.Term.html#419" class="InductiveConstructor">bytestring</a> <a id="1968" href="Declarative.RenamingSubstitution.html#1952" class="Bound">b</a>
<a id="1970" href="Declarative.RenamingSubstitution.html#1745" class="Function">renTermCon</a> <a id="1981" class="Symbol">_</a> <a id="1983" class="Symbol">(</a><a id="1984" href="Builtin.Constant.Term.html#488" class="InductiveConstructor">string</a> <a id="1991" href="Declarative.RenamingSubstitution.html#1991" class="Bound">s</a><a id="1992" class="Symbol">)</a>     <a id="1998" class="Symbol">=</a> <a id="2000" href="Builtin.Constant.Term.html#488" class="InductiveConstructor">string</a> <a id="2007" href="Declarative.RenamingSubstitution.html#1991" class="Bound">s</a>
<a id="2009" href="Declarative.RenamingSubstitution.html#1745" class="Function">renTermCon</a> <a id="2020" class="Symbol">_</a> <a id="2022" class="Symbol">(</a><a id="2023" href="Builtin.Constant.Term.html#549" class="InductiveConstructor">bool</a> <a id="2028" href="Declarative.RenamingSubstitution.html#2028" class="Bound">b</a><a id="2029" class="Symbol">)</a>       <a id="2037" class="Symbol">=</a> <a id="2039" href="Builtin.Constant.Term.html#549" class="InductiveConstructor">bool</a> <a id="2044" href="Declarative.RenamingSubstitution.html#2028" class="Bound">b</a>
<a id="2046" href="Declarative.RenamingSubstitution.html#1745" class="Function">renTermCon</a> <a id="2057" class="Symbol">_</a> <a id="2059" class="Symbol">(</a><a id="2060" href="Builtin.Constant.Term.html#606" class="InductiveConstructor">char</a> <a id="2065" href="Declarative.RenamingSubstitution.html#2065" class="Bound">c</a><a id="2066" class="Symbol">)</a>       <a id="2074" class="Symbol">=</a> <a id="2076" href="Builtin.Constant.Term.html#606" class="InductiveConstructor">char</a> <a id="2081" href="Declarative.RenamingSubstitution.html#2065" class="Bound">c</a>
<a id="2083" href="Declarative.RenamingSubstitution.html#1745" class="Function">renTermCon</a> <a id="2094" class="Symbol">_</a> <a id="2096" href="Builtin.Constant.Term.html#663" class="InductiveConstructor">unit</a>           <a id="2111" class="Symbol">=</a> <a id="2113" href="Builtin.Constant.Term.html#663" class="InductiveConstructor">unit</a>

</pre>
<p>Renaming for terms</p>

<pre class="Agda"><a id="ren"></a><a id="2148" href="Declarative.RenamingSubstitution.html#2148" class="Function">ren</a> <a id="2152" class="Symbol">:</a> <a id="2154" class="Symbol">(</a><a id="2155" href="Declarative.RenamingSubstitution.html#2155" class="Bound">ρ⋆</a> <a id="2158" class="Symbol">:</a> <a id="2160" href="Type.RenamingSubstitution.html#396" class="Function">⋆.Ren</a> <a id="2166" href="Type.html#1078" class="Generalizable">Φ</a> <a id="2168" href="Type.html#1080" class="Generalizable">Ψ</a><a id="2169" class="Symbol">)</a>
    <a id="2175" class="Symbol">→</a> <a id="2177" href="Declarative.RenamingSubstitution.html#823" class="Function">Ren</a> <a id="2181" href="Declarative.html#1692" class="Generalizable">Γ</a> <a id="2183" href="Declarative.html#1694" class="Generalizable">Δ</a> <a id="2185" href="Declarative.RenamingSubstitution.html#2155" class="Bound">ρ⋆</a>
      <a id="2194" class="Comment">-------------------------------</a>
    <a id="2230" class="Symbol">→</a> <a id="2232" class="Symbol">(∀{</a><a id="2235" href="Declarative.RenamingSubstitution.html#2235" class="Bound">A</a><a id="2236" class="Symbol">}</a> <a id="2238" class="Symbol">→</a> <a id="2240" href="Declarative.html#1692" class="Generalizable">Γ</a> <a id="2242" href="Declarative.html#4584" class="Datatype Operator">⊢</a> <a id="2244" href="Declarative.RenamingSubstitution.html#2235" class="Bound">A</a> <a id="2246" class="Symbol">→</a> <a id="2248" href="Declarative.html#1694" class="Generalizable">Δ</a> <a id="2250" href="Declarative.html#4584" class="Datatype Operator">⊢</a> <a id="2252" href="Type.RenamingSubstitution.html#757" class="Function">⋆.ren</a> <a id="2258" href="Declarative.RenamingSubstitution.html#2155" class="Bound">ρ⋆</a> <a id="2261" href="Declarative.RenamingSubstitution.html#2235" class="Bound">A</a><a id="2262" class="Symbol">)</a>
<a id="2264" href="Declarative.RenamingSubstitution.html#2148" class="Function">ren</a> <a id="2268" class="Symbol">_</a> <a id="2270" href="Declarative.RenamingSubstitution.html#2270" class="Bound">ρ</a> <a id="2272" class="Symbol">(</a><a id="2273" href="Declarative.html#4624" class="InductiveConstructor">`</a> <a id="2275" href="Declarative.RenamingSubstitution.html#2275" class="Bound">x</a><a id="2276" class="Symbol">)</a> <a id="2278" class="Symbol">=</a> <a id="2280" href="Declarative.html#4624" class="InductiveConstructor">`</a> <a id="2282" class="Symbol">(</a><a id="2283" href="Declarative.RenamingSubstitution.html#2270" class="Bound">ρ</a> <a id="2285" href="Declarative.RenamingSubstitution.html#2275" class="Bound">x</a><a id="2286" class="Symbol">)</a>
<a id="2288" href="Declarative.RenamingSubstitution.html#2148" class="Function">ren</a> <a id="2292" class="Symbol">_</a> <a id="2294" href="Declarative.RenamingSubstitution.html#2294" class="Bound">ρ</a> <a id="2296" class="Symbol">(</a><a id="2297" href="Declarative.html#4662" class="InductiveConstructor">ƛ</a> <a id="2299" href="Declarative.RenamingSubstitution.html#2299" class="Bound">L</a><a id="2300" class="Symbol">)</a> <a id="2302" class="Symbol">=</a> <a id="2304" href="Declarative.html#4662" class="InductiveConstructor">ƛ</a> <a id="2306" class="Symbol">(</a><a id="2307" href="Declarative.RenamingSubstitution.html#2148" class="Function">ren</a> <a id="2311" class="Symbol">_</a> <a id="2313" class="Symbol">(</a><a id="2314" href="Declarative.RenamingSubstitution.html#1089" class="Function">ext</a> <a id="2318" class="Symbol">_</a> <a id="2320" href="Declarative.RenamingSubstitution.html#2294" class="Bound">ρ</a><a id="2321" class="Symbol">)</a> <a id="2323" href="Declarative.RenamingSubstitution.html#2299" class="Bound">L</a><a id="2324" class="Symbol">)</a>
<a id="2326" href="Declarative.RenamingSubstitution.html#2148" class="Function">ren</a> <a id="2330" class="Symbol">_</a> <a id="2332" href="Declarative.RenamingSubstitution.html#2332" class="Bound">ρ</a> <a id="2334" class="Symbol">(</a><a id="2335" href="Declarative.RenamingSubstitution.html#2335" class="Bound">L</a> <a id="2337" href="Declarative.html#4712" class="InductiveConstructor Operator">·</a> <a id="2339" href="Declarative.RenamingSubstitution.html#2339" class="Bound">M</a><a id="2340" class="Symbol">)</a> <a id="2342" class="Symbol">=</a> <a id="2344" href="Declarative.RenamingSubstitution.html#2148" class="Function">ren</a> <a id="2348" class="Symbol">_</a> <a id="2350" href="Declarative.RenamingSubstitution.html#2332" class="Bound">ρ</a> <a id="2352" href="Declarative.RenamingSubstitution.html#2335" class="Bound">L</a> <a id="2354" href="Declarative.html#4712" class="InductiveConstructor Operator">·</a> <a id="2356" href="Declarative.RenamingSubstitution.html#2148" class="Function">ren</a> <a id="2360" class="Symbol">_</a> <a id="2362" href="Declarative.RenamingSubstitution.html#2332" class="Bound">ρ</a> <a id="2364" href="Declarative.RenamingSubstitution.html#2339" class="Bound">M</a> 
<a id="2367" href="Declarative.RenamingSubstitution.html#2148" class="Function">ren</a> <a id="2371" class="Symbol">_</a> <a id="2373" href="Declarative.RenamingSubstitution.html#2373" class="Bound">ρ</a> <a id="2375" class="Symbol">(</a><a id="2376" href="Declarative.html#4778" class="InductiveConstructor">Λ</a> <a id="2378" href="Declarative.RenamingSubstitution.html#2378" class="Bound">L</a><a id="2379" class="Symbol">)</a> <a id="2381" class="Symbol">=</a> <a id="2383" href="Declarative.html#4778" class="InductiveConstructor">Λ</a> <a id="2385" class="Symbol">(</a><a id="2386" href="Declarative.RenamingSubstitution.html#2148" class="Function">ren</a> <a id="2390" class="Symbol">_</a> <a id="2392" class="Symbol">(</a><a id="2393" href="Declarative.RenamingSubstitution.html#1487" class="Function">ext⋆</a> <a id="2398" class="Symbol">_</a> <a id="2400" href="Declarative.RenamingSubstitution.html#2373" class="Bound">ρ</a><a id="2401" class="Symbol">)</a> <a id="2403" href="Declarative.RenamingSubstitution.html#2378" class="Bound">L</a><a id="2404" class="Symbol">)</a>
<a id="2406" href="Declarative.RenamingSubstitution.html#2148" class="Function">ren</a> <a id="2410" href="Declarative.RenamingSubstitution.html#2410" class="Bound">ρ⋆</a> <a id="2413" href="Declarative.RenamingSubstitution.html#2413" class="Bound">ρ</a> <a id="2415" class="Symbol">(</a><a id="2416" href="Declarative.RenamingSubstitution.html#2416" class="Bound">L</a> <a id="2418" href="Declarative.html#4827" class="InductiveConstructor Operator">·⋆</a> <a id="2421" href="Declarative.RenamingSubstitution.html#2421" class="Bound">A</a><a id="2422" class="Symbol">)</a> <a id="2424" class="Symbol">=</a>
  <a id="2428" href="Declarative.html#5733" class="Function">conv⊢</a> <a id="2434" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="2439" class="Symbol">(</a><a id="2440" href="Type.RenamingSubstitution.html#9946" class="Function">⋆.ren-Π</a> <a id="2448" href="Declarative.RenamingSubstitution.html#2421" class="Bound">A</a> <a id="2450" class="Symbol">(</a><a id="2451" href="Declarative.html#6008" class="Function">piBody</a> <a id="2458" href="Declarative.RenamingSubstitution.html#2416" class="Bound">L</a><a id="2459" class="Symbol">)</a> <a id="2461" href="Declarative.RenamingSubstitution.html#2410" class="Bound">ρ⋆</a><a id="2463" class="Symbol">)</a> <a id="2465" class="Symbol">(</a><a id="2466" href="Declarative.RenamingSubstitution.html#2148" class="Function">ren</a> <a id="2470" class="Symbol">_</a> <a id="2472" href="Declarative.RenamingSubstitution.html#2413" class="Bound">ρ</a> <a id="2474" href="Declarative.RenamingSubstitution.html#2416" class="Bound">L</a> <a id="2476" href="Declarative.html#4827" class="InductiveConstructor Operator">·⋆</a> <a id="2479" href="Type.RenamingSubstitution.html#757" class="Function">⋆.ren</a> <a id="2485" href="Declarative.RenamingSubstitution.html#2410" class="Bound">ρ⋆</a> <a id="2488" href="Declarative.RenamingSubstitution.html#2421" class="Bound">A</a><a id="2489" class="Symbol">)</a>
<a id="2491" href="Declarative.RenamingSubstitution.html#2148" class="Function">ren</a> <a id="2495" class="Symbol">_</a> <a id="2497" href="Declarative.RenamingSubstitution.html#2497" class="Bound">ρ</a> <a id="2499" class="Symbol">(</a><a id="2500" href="Declarative.html#4910" class="InductiveConstructor">wrap</a> <a id="2505" href="Declarative.RenamingSubstitution.html#2505" class="Bound">A</a> <a id="2507" href="Declarative.RenamingSubstitution.html#2507" class="Bound">B</a> <a id="2509" href="Declarative.RenamingSubstitution.html#2509" class="Bound">L</a><a id="2510" class="Symbol">)</a> <a id="2512" class="Symbol">=</a> <a id="2514" href="Declarative.html#4910" class="InductiveConstructor">wrap</a> <a id="2519" class="Symbol">_</a> <a id="2521" class="Symbol">_</a> <a id="2523" class="Symbol">(</a><a id="2524" href="Declarative.html#5733" class="Function">conv⊢</a> <a id="2530" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="2535" class="Symbol">(</a><a id="2536" href="Type.RenamingSubstitution.html#9508" class="Function">⋆.ren-μ</a> <a id="2544" class="Symbol">_</a> <a id="2546" href="Declarative.RenamingSubstitution.html#2505" class="Bound">A</a> <a id="2548" href="Declarative.RenamingSubstitution.html#2507" class="Bound">B</a><a id="2549" class="Symbol">)</a> <a id="2551" class="Symbol">(</a><a id="2552" href="Declarative.RenamingSubstitution.html#2148" class="Function">ren</a> <a id="2556" class="Symbol">_</a> <a id="2558" href="Declarative.RenamingSubstitution.html#2497" class="Bound">ρ</a> <a id="2560" href="Declarative.RenamingSubstitution.html#2509" class="Bound">L</a><a id="2561" class="Symbol">))</a>
<a id="2564" href="Declarative.RenamingSubstitution.html#2148" class="Function">ren</a> <a id="2568" class="Symbol">_</a> <a id="2570" href="Declarative.RenamingSubstitution.html#2570" class="Bound">ρ</a> <a id="2572" class="Symbol">(</a><a id="2573" href="Declarative.html#5076" class="InductiveConstructor">unwrap</a> <a id="2580" href="Declarative.RenamingSubstitution.html#2580" class="Bound">L</a><a id="2581" class="Symbol">)</a> <a id="2583" class="Symbol">=</a> <a id="2585" href="Declarative.html#5733" class="Function">conv⊢</a> <a id="2591" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="2596" class="Symbol">(</a><a id="2597" href="Relation.Binary.PropositionalEquality.Core.html#980" class="Function">sym</a> <a id="2601" class="Symbol">(</a><a id="2602" href="Type.RenamingSubstitution.html#9508" class="Function">⋆.ren-μ</a> <a id="2610" class="Symbol">_</a> <a id="2612" class="Symbol">_</a> <a id="2614" class="Symbol">_))</a> <a id="2618" class="Symbol">(</a><a id="2619" href="Declarative.html#5076" class="InductiveConstructor">unwrap</a> <a id="2626" class="Symbol">(</a><a id="2627" href="Declarative.RenamingSubstitution.html#2148" class="Function">ren</a> <a id="2631" class="Symbol">_</a> <a id="2633" href="Declarative.RenamingSubstitution.html#2570" class="Bound">ρ</a> <a id="2635" href="Declarative.RenamingSubstitution.html#2580" class="Bound">L</a><a id="2636" class="Symbol">))</a>
<a id="2639" href="Declarative.RenamingSubstitution.html#2148" class="Function">ren</a> <a id="2643" class="Symbol">_</a> <a id="2645" href="Declarative.RenamingSubstitution.html#2645" class="Bound">ρ</a> <a id="2647" class="Symbol">(</a><a id="2648" href="Declarative.html#5194" class="InductiveConstructor">conv</a> <a id="2653" href="Declarative.RenamingSubstitution.html#2653" class="Bound">p</a> <a id="2655" href="Declarative.RenamingSubstitution.html#2655" class="Bound">L</a><a id="2656" class="Symbol">)</a> <a id="2658" class="Symbol">=</a> <a id="2660" href="Declarative.html#5194" class="InductiveConstructor">conv</a> <a id="2665" class="Symbol">(</a><a id="2666" href="Type.Equality.html#1707" class="Function">ren≡β</a> <a id="2672" class="Symbol">_</a> <a id="2674" href="Declarative.RenamingSubstitution.html#2653" class="Bound">p</a><a id="2675" class="Symbol">)</a> <a id="2677" class="Symbol">(</a><a id="2678" href="Declarative.RenamingSubstitution.html#2148" class="Function">ren</a> <a id="2682" class="Symbol">_</a> <a id="2684" href="Declarative.RenamingSubstitution.html#2645" class="Bound">ρ</a> <a id="2686" href="Declarative.RenamingSubstitution.html#2655" class="Bound">L</a><a id="2687" class="Symbol">)</a>
<a id="2689" href="Declarative.RenamingSubstitution.html#2148" class="Function">ren</a> <a id="2693" href="Declarative.RenamingSubstitution.html#2693" class="Bound">ρ⋆</a> <a id="2696" href="Declarative.RenamingSubstitution.html#2696" class="Bound">ρ</a> <a id="2698" class="Symbol">(</a><a id="2699" href="Declarative.html#5256" class="InductiveConstructor">con</a> <a id="2703" href="Declarative.RenamingSubstitution.html#2703" class="Bound">cn</a><a id="2705" class="Symbol">)</a> <a id="2707" class="Symbol">=</a> <a id="2709" href="Declarative.html#5256" class="InductiveConstructor">con</a> <a id="2713" class="Symbol">(</a><a id="2714" href="Declarative.RenamingSubstitution.html#1745" class="Function">renTermCon</a> <a id="2725" href="Declarative.RenamingSubstitution.html#2693" class="Bound">ρ⋆</a> <a id="2728" href="Declarative.RenamingSubstitution.html#2703" class="Bound">cn</a><a id="2730" class="Symbol">)</a>
<a id="2732" href="Declarative.RenamingSubstitution.html#2148" class="Function">ren</a> <a id="2736" href="Declarative.RenamingSubstitution.html#2736" class="Bound">ρ⋆</a> <a id="2739" class="Symbol">_</a> <a id="2741" class="Symbol">(</a><a id="2742" href="Declarative.html#5342" class="InductiveConstructor">ibuiltin</a> <a id="2751" href="Declarative.RenamingSubstitution.html#2751" class="Bound">b</a><a id="2752" class="Symbol">)</a> <a id="2754" class="Symbol">=</a> <a id="2756" href="Declarative.html#5733" class="Function">conv⊢</a> <a id="2762" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="2767" class="Symbol">(</a><a id="2768" href="Declarative.html#4286" class="Postulate">itype-ren</a> <a id="2778" href="Declarative.RenamingSubstitution.html#2751" class="Bound">b</a> <a id="2780" href="Declarative.RenamingSubstitution.html#2736" class="Bound">ρ⋆</a><a id="2782" class="Symbol">)</a> <a id="2784" class="Symbol">(</a><a id="2785" href="Declarative.html#5342" class="InductiveConstructor">ibuiltin</a> <a id="2794" href="Declarative.RenamingSubstitution.html#2751" class="Bound">b</a><a id="2795" class="Symbol">)</a>
<a id="2797" href="Declarative.RenamingSubstitution.html#2148" class="Function">ren</a> <a id="2801" class="Symbol">_</a> <a id="2803" class="Symbol">_</a> <a id="2805" class="Symbol">(</a><a id="2806" href="Declarative.html#5424" class="InductiveConstructor">error</a> <a id="2812" href="Declarative.RenamingSubstitution.html#2812" class="Bound">A</a><a id="2813" class="Symbol">)</a> <a id="2815" class="Symbol">=</a> <a id="2817" href="Declarative.html#5424" class="InductiveConstructor">error</a> <a id="2823" class="Symbol">(</a><a id="2824" href="Type.RenamingSubstitution.html#757" class="Function">⋆.ren</a> <a id="2830" class="Symbol">_</a> <a id="2832" href="Declarative.RenamingSubstitution.html#2812" class="Bound">A</a><a id="2833" class="Symbol">)</a>
</pre>
<p>Weakening a term by an additional type variable</p>

<pre class="Agda"><a id="weaken"></a><a id="2893" href="Declarative.RenamingSubstitution.html#2893" class="Function">weaken</a> <a id="2900" class="Symbol">:</a> <a id="2902" href="Declarative.html#1692" class="Generalizable">Γ</a> <a id="2904" href="Declarative.html#4584" class="Datatype Operator">⊢</a> <a id="2906" href="Type.html#2498" class="Generalizable">A</a>
         <a id="2917" class="Comment">---------</a>
       <a id="2934" class="Symbol">→</a> <a id="2936" href="Declarative.html#1692" class="Generalizable">Γ</a> <a id="2938" href="Declarative.html#1603" class="InductiveConstructor Operator">,</a> <a id="2940" href="Type.html#2503" class="Generalizable">B</a> <a id="2942" href="Declarative.html#4584" class="Datatype Operator">⊢</a> <a id="2944" href="Type.html#2498" class="Generalizable">A</a>
<a id="2946" href="Declarative.RenamingSubstitution.html#2893" class="Function">weaken</a> <a id="2953" href="Declarative.RenamingSubstitution.html#2953" class="Bound">x</a> <a id="2955" class="Symbol">=</a> <a id="2957" href="Declarative.html#5733" class="Function">conv⊢</a>
  <a id="2965" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
  <a id="2972" class="Symbol">(</a><a id="2973" href="Type.RenamingSubstitution.html#2528" class="Function">⋆.ren-id</a> <a id="2982" class="Symbol">_)</a>
  <a id="2987" class="Symbol">(</a><a id="2988" href="Declarative.RenamingSubstitution.html#2148" class="Function">ren</a> <a id="2992" class="Symbol">_</a> <a id="2994" class="Symbol">(</a><a id="2995" href="Declarative.html#5574" class="Function">conv∋</a> <a id="3001" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="3006" class="Symbol">(</a><a id="3007" href="Relation.Binary.PropositionalEquality.Core.html#980" class="Function">sym</a> <a id="3011" class="Symbol">(</a><a id="3012" href="Type.RenamingSubstitution.html#2528" class="Function">⋆.ren-id</a> <a id="3021" class="Symbol">_))</a> <a id="3025" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="3027" href="Declarative.html#1919" class="InductiveConstructor">S</a><a id="3028" class="Symbol">)</a> <a id="3030" href="Declarative.RenamingSubstitution.html#2953" class="Bound">x</a><a id="3031" class="Symbol">)</a>
</pre>
<pre class="Agda"><a id="weaken⋆"></a><a id="3042" href="Declarative.RenamingSubstitution.html#3042" class="Function">weaken⋆</a> <a id="3050" class="Symbol">:</a> <a id="3052" href="Declarative.html#1692" class="Generalizable">Γ</a> <a id="3054" href="Declarative.html#4584" class="Datatype Operator">⊢</a> <a id="3056" href="Type.html#2498" class="Generalizable">A</a>
          <a id="3068" class="Comment">-------------------</a>
        <a id="3096" class="Symbol">→</a> <a id="3098" href="Declarative.html#1692" class="Generalizable">Γ</a> <a id="3100" href="Declarative.html#1560" class="InductiveConstructor Operator">,⋆</a> <a id="3103" href="Type.html#823" class="Generalizable">K</a> <a id="3105" href="Declarative.html#4584" class="Datatype Operator">⊢</a> <a id="3107" href="Type.RenamingSubstitution.html#1130" class="Function">⋆.weaken</a> <a id="3116" href="Type.html#2498" class="Generalizable">A</a>
<a id="3118" href="Declarative.RenamingSubstitution.html#3042" class="Function">weaken⋆</a> <a id="3126" href="Declarative.RenamingSubstitution.html#3126" class="Bound">x</a> <a id="3128" class="Symbol">=</a> <a id="3130" href="Declarative.RenamingSubstitution.html#2148" class="Function">ren</a> <a id="3134" class="Symbol">_</a> <a id="3136" href="Declarative.html#1965" class="InductiveConstructor">T</a> <a id="3138" href="Declarative.RenamingSubstitution.html#3126" class="Bound">x</a>
</pre>
<h2 id="substitution">Substitution</h2>

<p>A substitution maps term variables to terms. It is indexed by a type
substitution.</p>

<pre class="Agda"><a id="Sub"></a><a id="3250" href="Declarative.RenamingSubstitution.html#3250" class="Function">Sub</a> <a id="3254" class="Symbol">:</a> <a id="3256" class="Symbol">∀</a> <a id="3258" href="Declarative.RenamingSubstitution.html#3258" class="Bound">Γ</a> <a id="3260" href="Declarative.RenamingSubstitution.html#3260" class="Bound">Δ</a> <a id="3262" class="Symbol">→</a> <a id="3264" href="Type.RenamingSubstitution.html#3743" class="Function">⋆.Sub</a> <a id="3270" href="Type.html#1078" class="Generalizable">Φ</a> <a id="3272" href="Type.html#1080" class="Generalizable">Ψ</a> <a id="3274" class="Symbol">→</a> <a id="3276" class="PrimitiveType">Set</a>
<a id="3280" href="Declarative.RenamingSubstitution.html#3250" class="Function">Sub</a> <a id="3284" href="Declarative.RenamingSubstitution.html#3284" class="Bound">Γ</a> <a id="3286" href="Declarative.RenamingSubstitution.html#3286" class="Bound">Δ</a> <a id="3288" href="Declarative.RenamingSubstitution.html#3288" class="Bound">σ</a> <a id="3290" class="Symbol">=</a> <a id="3292" class="Symbol">∀{</a><a id="3294" href="Declarative.RenamingSubstitution.html#3294" class="Bound">A</a><a id="3295" class="Symbol">}</a> <a id="3297" class="Symbol">→</a> <a id="3299" href="Declarative.RenamingSubstitution.html#3284" class="Bound">Γ</a> <a id="3301" href="Declarative.html#1844" class="Datatype Operator">∋</a> <a id="3303" href="Declarative.RenamingSubstitution.html#3294" class="Bound">A</a> <a id="3305" class="Symbol">→</a> <a id="3307" href="Declarative.RenamingSubstitution.html#3286" class="Bound">Δ</a> <a id="3309" href="Declarative.html#4584" class="Datatype Operator">⊢</a> <a id="3311" href="Type.RenamingSubstitution.html#4129" class="Function">⋆.sub</a> <a id="3317" href="Declarative.RenamingSubstitution.html#3288" class="Bound">σ</a> <a id="3319" href="Declarative.RenamingSubstitution.html#3294" class="Bound">A</a>
</pre>
<p>Extend a substitution by an additional term variable. Used for going
under binders.</p>

<pre class="Agda"><a id="exts"></a><a id="3415" href="Declarative.RenamingSubstitution.html#3415" class="Function">exts</a> <a id="3420" class="Symbol">:</a> <a id="3422" class="Symbol">(</a><a id="3423" href="Declarative.RenamingSubstitution.html#3423" class="Bound">σ⋆</a> <a id="3426" class="Symbol">:</a> <a id="3428" href="Type.RenamingSubstitution.html#3743" class="Function">⋆.Sub</a> <a id="3434" href="Type.html#1078" class="Generalizable">Φ</a> <a id="3436" href="Type.html#1080" class="Generalizable">Ψ</a><a id="3437" class="Symbol">)</a>
     <a id="3444" class="Symbol">→</a> <a id="3446" href="Declarative.RenamingSubstitution.html#3250" class="Function">Sub</a> <a id="3450" href="Declarative.html#1692" class="Generalizable">Γ</a> <a id="3452" href="Declarative.html#1694" class="Generalizable">Δ</a> <a id="3454" href="Declarative.RenamingSubstitution.html#3423" class="Bound">σ⋆</a>
     <a id="3462" class="Symbol">→</a> <a id="3464" class="Symbol">∀</a> <a id="3466" class="Symbol">{</a><a id="3467" href="Declarative.RenamingSubstitution.html#3467" class="Bound">B</a><a id="3468" class="Symbol">}</a>
       <a id="3477" class="Comment">-------------------------------</a>
     <a id="3514" class="Symbol">→</a> <a id="3516" href="Declarative.RenamingSubstitution.html#3250" class="Function">Sub</a> <a id="3520" class="Symbol">(</a><a id="3521" href="Declarative.html#1692" class="Generalizable">Γ</a> <a id="3523" href="Declarative.html#1603" class="InductiveConstructor Operator">,</a> <a id="3525" href="Declarative.RenamingSubstitution.html#3467" class="Bound">B</a><a id="3526" class="Symbol">)</a> <a id="3528" class="Symbol">(</a><a id="3529" href="Declarative.html#1694" class="Generalizable">Δ</a> <a id="3531" href="Declarative.html#1603" class="InductiveConstructor Operator">,</a> <a id="3533" href="Type.RenamingSubstitution.html#4129" class="Function">⋆.sub</a> <a id="3539" href="Declarative.RenamingSubstitution.html#3423" class="Bound">σ⋆</a> <a id="3542" href="Declarative.RenamingSubstitution.html#3467" class="Bound">B</a><a id="3543" class="Symbol">)</a> <a id="3545" href="Declarative.RenamingSubstitution.html#3423" class="Bound">σ⋆</a>
<a id="3548" href="Declarative.RenamingSubstitution.html#3415" class="Function">exts</a> <a id="3553" href="Declarative.RenamingSubstitution.html#3553" class="Bound">σ⋆</a> <a id="3556" href="Declarative.RenamingSubstitution.html#3556" class="Bound">σ</a> <a id="3558" href="Declarative.html#1885" class="InductiveConstructor">Z</a>     <a id="3564" class="Symbol">=</a> <a id="3566" href="Declarative.html#4624" class="InductiveConstructor">`</a> <a id="3568" href="Declarative.html#1885" class="InductiveConstructor">Z</a>
<a id="3570" href="Declarative.RenamingSubstitution.html#3415" class="Function">exts</a> <a id="3575" href="Declarative.RenamingSubstitution.html#3575" class="Bound">σ⋆</a> <a id="3578" href="Declarative.RenamingSubstitution.html#3578" class="Bound">σ</a> <a id="3580" class="Symbol">(</a><a id="3581" href="Declarative.html#1919" class="InductiveConstructor">S</a> <a id="3583" href="Declarative.RenamingSubstitution.html#3583" class="Bound">x</a><a id="3584" class="Symbol">)</a> <a id="3586" class="Symbol">=</a> <a id="3588" href="Declarative.RenamingSubstitution.html#2893" class="Function">weaken</a> <a id="3595" class="Symbol">(</a><a id="3596" href="Declarative.RenamingSubstitution.html#3578" class="Bound">σ</a> <a id="3598" href="Declarative.RenamingSubstitution.html#3583" class="Bound">x</a><a id="3599" class="Symbol">)</a>
</pre>
<p>Extend a substitution by an additional type variable. Used for going
under type binders.</p>

<pre class="Agda"><a id="exts⋆"></a><a id="3700" href="Declarative.RenamingSubstitution.html#3700" class="Function">exts⋆</a> <a id="3706" class="Symbol">:</a> <a id="3708" class="Symbol">(</a><a id="3709" href="Declarative.RenamingSubstitution.html#3709" class="Bound">σ⋆</a> <a id="3712" class="Symbol">:</a> <a id="3714" href="Type.RenamingSubstitution.html#3743" class="Function">⋆.Sub</a> <a id="3720" href="Type.html#1078" class="Generalizable">Φ</a> <a id="3722" href="Type.html#1080" class="Generalizable">Ψ</a><a id="3723" class="Symbol">)</a>
      <a id="3731" class="Symbol">→</a> <a id="3733" href="Declarative.RenamingSubstitution.html#3250" class="Function">Sub</a> <a id="3737" href="Declarative.html#1692" class="Generalizable">Γ</a> <a id="3739" href="Declarative.html#1694" class="Generalizable">Δ</a> <a id="3741" href="Declarative.RenamingSubstitution.html#3709" class="Bound">σ⋆</a>
      <a id="3750" class="Symbol">→</a> <a id="3752" class="Symbol">∀{</a><a id="3754" href="Declarative.RenamingSubstitution.html#3754" class="Bound">K</a><a id="3755" class="Symbol">}</a>
        <a id="3765" class="Comment">---------------------------------</a>
      <a id="3805" class="Symbol">→</a> <a id="3807" href="Declarative.RenamingSubstitution.html#3250" class="Function">Sub</a> <a id="3811" class="Symbol">(</a><a id="3812" href="Declarative.html#1692" class="Generalizable">Γ</a> <a id="3814" href="Declarative.html#1560" class="InductiveConstructor Operator">,⋆</a> <a id="3817" href="Declarative.RenamingSubstitution.html#3754" class="Bound">K</a><a id="3818" class="Symbol">)</a> <a id="3820" class="Symbol">(</a><a id="3821" href="Declarative.html#1694" class="Generalizable">Δ</a> <a id="3823" href="Declarative.html#1560" class="InductiveConstructor Operator">,⋆</a> <a id="3826" href="Declarative.RenamingSubstitution.html#3754" class="Bound">K</a><a id="3827" class="Symbol">)</a> <a id="3829" class="Symbol">(</a><a id="3830" href="Type.RenamingSubstitution.html#3944" class="Function">⋆.exts</a> <a id="3837" href="Declarative.RenamingSubstitution.html#3709" class="Bound">σ⋆</a><a id="3839" class="Symbol">)</a> 
<a id="3842" href="Declarative.RenamingSubstitution.html#3700" class="Function">exts⋆</a> <a id="3848" class="Symbol">_</a> <a id="3850" href="Declarative.RenamingSubstitution.html#3850" class="Bound">σ</a> <a id="3852" class="Symbol">(</a><a id="3853" href="Declarative.html#1965" class="InductiveConstructor">T</a> <a id="3855" class="Symbol">{</a><a id="3856" class="Argument">A</a> <a id="3858" class="Symbol">=</a> <a id="3860" href="Declarative.RenamingSubstitution.html#3860" class="Bound">A</a><a id="3861" class="Symbol">}</a> <a id="3863" href="Declarative.RenamingSubstitution.html#3863" class="Bound">x</a><a id="3864" class="Symbol">)</a> <a id="3866" class="Symbol">=</a> <a id="3868" href="Declarative.html#5733" class="Function">conv⊢</a>
  <a id="3876" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
  <a id="3883" class="Symbol">(</a><a id="3884" href="Relation.Binary.PropositionalEquality.Core.html#1025" class="Function">trans</a> <a id="3890" class="Symbol">(</a><a id="3891" href="Relation.Binary.PropositionalEquality.Core.html#980" class="Function">sym</a> <a id="3895" class="Symbol">(</a><a id="3896" href="Type.RenamingSubstitution.html#7387" class="Function">⋆.ren-sub</a> <a id="3906" href="Declarative.RenamingSubstitution.html#3860" class="Bound">A</a><a id="3907" class="Symbol">))</a> <a id="3910" class="Symbol">(</a><a id="3911" href="Type.RenamingSubstitution.html#6611" class="Function">⋆.sub-ren</a> <a id="3921" href="Declarative.RenamingSubstitution.html#3860" class="Bound">A</a><a id="3922" class="Symbol">))</a>
  <a id="3927" class="Symbol">(</a><a id="3928" href="Declarative.RenamingSubstitution.html#3042" class="Function">weaken⋆</a> <a id="3936" class="Symbol">(</a><a id="3937" href="Declarative.RenamingSubstitution.html#3850" class="Bound">σ</a> <a id="3939" href="Declarative.RenamingSubstitution.html#3863" class="Bound">x</a><a id="3940" class="Symbol">))</a>
</pre>
<p>Substitution for term constants</p>

<pre class="Agda"><a id="subTermCon"></a><a id="3985" href="Declarative.RenamingSubstitution.html#3985" class="Function">subTermCon</a> <a id="3996" class="Symbol">:</a> <a id="3998" class="Symbol">(</a><a id="3999" href="Declarative.RenamingSubstitution.html#3999" class="Bound">σ⋆</a> <a id="4002" class="Symbol">:</a> <a id="4004" href="Type.RenamingSubstitution.html#3743" class="Function">⋆.Sub</a> <a id="4010" href="Type.html#1078" class="Generalizable">Φ</a> <a id="4012" href="Type.html#1080" class="Generalizable">Ψ</a><a id="4013" class="Symbol">)</a>
             <a id="4028" class="Comment">-------------------------------------------</a>
           <a id="4083" class="Symbol">→</a> <a id="4085" class="Symbol">∀</a> <a id="4087" class="Symbol">{</a><a id="4088" href="Declarative.RenamingSubstitution.html#4088" class="Bound">A</a><a id="4089" class="Symbol">}</a> <a id="4091" class="Symbol">→</a> <a id="4093" href="Builtin.Constant.Term.html#327" class="Datatype">TermCon</a> <a id="4101" href="Declarative.RenamingSubstitution.html#4088" class="Bound">A</a> <a id="4103" class="Symbol">→</a> <a id="4105" href="Builtin.Constant.Term.html#327" class="Datatype">TermCon</a> <a id="4113" class="Symbol">(</a><a id="4114" href="Type.RenamingSubstitution.html#4129" class="Function">⋆.sub</a> <a id="4120" href="Declarative.RenamingSubstitution.html#3999" class="Bound">σ⋆</a> <a id="4123" href="Declarative.RenamingSubstitution.html#4088" class="Bound">A</a> <a id="4125" class="Symbol">)</a>
<a id="4127" href="Declarative.RenamingSubstitution.html#3985" class="Function">subTermCon</a> <a id="4138" class="Symbol">_</a> <a id="4140" class="Symbol">(</a><a id="4141" href="Builtin.Constant.Term.html#362" class="InductiveConstructor">integer</a> <a id="4149" href="Declarative.RenamingSubstitution.html#4149" class="Bound">i</a><a id="4150" class="Symbol">)</a>    <a id="4155" class="Symbol">=</a> <a id="4157" href="Builtin.Constant.Term.html#362" class="InductiveConstructor">integer</a> <a id="4165" href="Declarative.RenamingSubstitution.html#4149" class="Bound">i</a>
<a id="4167" href="Declarative.RenamingSubstitution.html#3985" class="Function">subTermCon</a> <a id="4178" class="Symbol">_</a> <a id="4180" class="Symbol">(</a><a id="4181" href="Builtin.Constant.Term.html#419" class="InductiveConstructor">bytestring</a> <a id="4192" href="Declarative.RenamingSubstitution.html#4192" class="Bound">b</a><a id="4193" class="Symbol">)</a> <a id="4195" class="Symbol">=</a> <a id="4197" href="Builtin.Constant.Term.html#419" class="InductiveConstructor">bytestring</a> <a id="4208" href="Declarative.RenamingSubstitution.html#4192" class="Bound">b</a>
<a id="4210" href="Declarative.RenamingSubstitution.html#3985" class="Function">subTermCon</a> <a id="4221" class="Symbol">_</a> <a id="4223" class="Symbol">(</a><a id="4224" href="Builtin.Constant.Term.html#488" class="InductiveConstructor">string</a> <a id="4231" href="Declarative.RenamingSubstitution.html#4231" class="Bound">s</a><a id="4232" class="Symbol">)</a>     <a id="4238" class="Symbol">=</a> <a id="4240" href="Builtin.Constant.Term.html#488" class="InductiveConstructor">string</a> <a id="4247" href="Declarative.RenamingSubstitution.html#4231" class="Bound">s</a>
<a id="4249" href="Declarative.RenamingSubstitution.html#3985" class="Function">subTermCon</a> <a id="4260" class="Symbol">_</a> <a id="4262" class="Symbol">(</a><a id="4263" href="Builtin.Constant.Term.html#549" class="InductiveConstructor">bool</a> <a id="4268" href="Declarative.RenamingSubstitution.html#4268" class="Bound">b</a><a id="4269" class="Symbol">)</a>       <a id="4277" class="Symbol">=</a> <a id="4279" href="Builtin.Constant.Term.html#549" class="InductiveConstructor">bool</a> <a id="4284" href="Declarative.RenamingSubstitution.html#4268" class="Bound">b</a>
<a id="4286" href="Declarative.RenamingSubstitution.html#3985" class="Function">subTermCon</a> <a id="4297" class="Symbol">_</a> <a id="4299" class="Symbol">(</a><a id="4300" href="Builtin.Constant.Term.html#606" class="InductiveConstructor">char</a> <a id="4305" href="Declarative.RenamingSubstitution.html#4305" class="Bound">c</a><a id="4306" class="Symbol">)</a>       <a id="4314" class="Symbol">=</a> <a id="4316" href="Builtin.Constant.Term.html#606" class="InductiveConstructor">char</a> <a id="4321" href="Declarative.RenamingSubstitution.html#4305" class="Bound">c</a>
<a id="4323" href="Declarative.RenamingSubstitution.html#3985" class="Function">subTermCon</a> <a id="4334" class="Symbol">_</a> <a id="4336" href="Builtin.Constant.Term.html#663" class="InductiveConstructor">unit</a>           <a id="4351" class="Symbol">=</a> <a id="4353" href="Builtin.Constant.Term.html#663" class="InductiveConstructor">unit</a>

</pre>
<p>Substitution for terms</p>

<pre class="Agda"><a id="sub"></a><a id="4392" href="Declarative.RenamingSubstitution.html#4392" class="Function">sub</a> <a id="4396" class="Symbol">:</a> <a id="4398" class="Symbol">(</a><a id="4399" href="Declarative.RenamingSubstitution.html#4399" class="Bound">σ⋆</a> <a id="4402" class="Symbol">:</a> <a id="4404" href="Type.RenamingSubstitution.html#3743" class="Function">⋆.Sub</a> <a id="4410" href="Type.html#1078" class="Generalizable">Φ</a> <a id="4412" href="Type.html#1080" class="Generalizable">Ψ</a><a id="4413" class="Symbol">)</a>
    <a id="4419" class="Symbol">→</a> <a id="4421" href="Declarative.RenamingSubstitution.html#3250" class="Function">Sub</a> <a id="4425" href="Declarative.html#1692" class="Generalizable">Γ</a> <a id="4427" href="Declarative.html#1694" class="Generalizable">Δ</a> <a id="4429" href="Declarative.RenamingSubstitution.html#4399" class="Bound">σ⋆</a>
      <a id="4438" class="Comment">-----------------------------</a>
    <a id="4472" class="Symbol">→</a> <a id="4474" class="Symbol">∀{</a><a id="4476" href="Declarative.RenamingSubstitution.html#4476" class="Bound">A</a><a id="4477" class="Symbol">}</a> <a id="4479" class="Symbol">→</a> <a id="4481" href="Declarative.html#1692" class="Generalizable">Γ</a> <a id="4483" href="Declarative.html#4584" class="Datatype Operator">⊢</a> <a id="4485" href="Declarative.RenamingSubstitution.html#4476" class="Bound">A</a> <a id="4487" class="Symbol">→</a> <a id="4489" href="Declarative.html#1694" class="Generalizable">Δ</a> <a id="4491" href="Declarative.html#4584" class="Datatype Operator">⊢</a> <a id="4493" href="Type.RenamingSubstitution.html#4129" class="Function">⋆.sub</a> <a id="4499" href="Declarative.RenamingSubstitution.html#4399" class="Bound">σ⋆</a> <a id="4502" href="Declarative.RenamingSubstitution.html#4476" class="Bound">A</a>
<a id="4504" href="Declarative.RenamingSubstitution.html#4392" class="Function">sub</a> <a id="4508" class="Symbol">_</a>  <a id="4511" href="Declarative.RenamingSubstitution.html#4511" class="Bound">σ</a> <a id="4513" class="Symbol">(</a><a id="4514" href="Declarative.html#4624" class="InductiveConstructor">`</a> <a id="4516" href="Declarative.RenamingSubstitution.html#4516" class="Bound">k</a><a id="4517" class="Symbol">)</a>        <a id="4526" class="Symbol">=</a> <a id="4528" href="Declarative.RenamingSubstitution.html#4511" class="Bound">σ</a> <a id="4530" href="Declarative.RenamingSubstitution.html#4516" class="Bound">k</a>
<a id="4532" href="Declarative.RenamingSubstitution.html#4392" class="Function">sub</a> <a id="4536" class="Symbol">_</a>  <a id="4539" href="Declarative.RenamingSubstitution.html#4539" class="Bound">σ</a> <a id="4541" class="Symbol">(</a><a id="4542" href="Declarative.html#4662" class="InductiveConstructor">ƛ</a> <a id="4544" href="Declarative.RenamingSubstitution.html#4544" class="Bound">L</a><a id="4545" class="Symbol">)</a>        <a id="4554" class="Symbol">=</a> <a id="4556" href="Declarative.html#4662" class="InductiveConstructor">ƛ</a> <a id="4558" class="Symbol">(</a><a id="4559" href="Declarative.RenamingSubstitution.html#4392" class="Function">sub</a> <a id="4563" class="Symbol">_</a> <a id="4565" class="Symbol">(</a><a id="4566" href="Declarative.RenamingSubstitution.html#3415" class="Function">exts</a> <a id="4571" class="Symbol">_</a> <a id="4573" href="Declarative.RenamingSubstitution.html#4539" class="Bound">σ</a><a id="4574" class="Symbol">)</a> <a id="4576" href="Declarative.RenamingSubstitution.html#4544" class="Bound">L</a><a id="4577" class="Symbol">)</a>
<a id="4579" href="Declarative.RenamingSubstitution.html#4392" class="Function">sub</a> <a id="4583" class="Symbol">_</a>  <a id="4586" href="Declarative.RenamingSubstitution.html#4586" class="Bound">σ</a> <a id="4588" class="Symbol">(</a><a id="4589" href="Declarative.RenamingSubstitution.html#4589" class="Bound">L</a> <a id="4591" href="Declarative.html#4712" class="InductiveConstructor Operator">·</a> <a id="4593" href="Declarative.RenamingSubstitution.html#4593" class="Bound">M</a><a id="4594" class="Symbol">)</a>      <a id="4601" class="Symbol">=</a> <a id="4603" href="Declarative.RenamingSubstitution.html#4392" class="Function">sub</a> <a id="4607" class="Symbol">_</a> <a id="4609" href="Declarative.RenamingSubstitution.html#4586" class="Bound">σ</a> <a id="4611" href="Declarative.RenamingSubstitution.html#4589" class="Bound">L</a> <a id="4613" href="Declarative.html#4712" class="InductiveConstructor Operator">·</a> <a id="4615" href="Declarative.RenamingSubstitution.html#4392" class="Function">sub</a> <a id="4619" class="Symbol">_</a> <a id="4621" href="Declarative.RenamingSubstitution.html#4586" class="Bound">σ</a> <a id="4623" href="Declarative.RenamingSubstitution.html#4593" class="Bound">M</a>
<a id="4625" href="Declarative.RenamingSubstitution.html#4392" class="Function">sub</a> <a id="4629" class="Symbol">_</a>  <a id="4632" href="Declarative.RenamingSubstitution.html#4632" class="Bound">σ</a> <a id="4634" class="Symbol">(</a><a id="4635" href="Declarative.html#4778" class="InductiveConstructor">Λ</a> <a id="4637" href="Declarative.RenamingSubstitution.html#4637" class="Bound">L</a><a id="4638" class="Symbol">)</a>        <a id="4647" class="Symbol">=</a> <a id="4649" href="Declarative.html#4778" class="InductiveConstructor">Λ</a> <a id="4651" class="Symbol">(</a><a id="4652" href="Declarative.RenamingSubstitution.html#4392" class="Function">sub</a> <a id="4656" class="Symbol">_</a> <a id="4658" class="Symbol">(</a><a id="4659" href="Declarative.RenamingSubstitution.html#3700" class="Function">exts⋆</a> <a id="4665" class="Symbol">_</a> <a id="4667" href="Declarative.RenamingSubstitution.html#4632" class="Bound">σ</a><a id="4668" class="Symbol">)</a> <a id="4670" href="Declarative.RenamingSubstitution.html#4637" class="Bound">L</a><a id="4671" class="Symbol">)</a>
<a id="4673" href="Declarative.RenamingSubstitution.html#4392" class="Function">sub</a> <a id="4677" href="Declarative.RenamingSubstitution.html#4677" class="Bound">σ⋆</a> <a id="4680" href="Declarative.RenamingSubstitution.html#4680" class="Bound">σ</a> <a id="4682" class="Symbol">(</a><a id="4683" href="Declarative.RenamingSubstitution.html#4683" class="Bound">L</a> <a id="4685" href="Declarative.html#4827" class="InductiveConstructor Operator">·⋆</a> <a id="4688" href="Declarative.RenamingSubstitution.html#4688" class="Bound">A</a><a id="4689" class="Symbol">)</a>     <a id="4695" class="Symbol">=</a>
  <a id="4699" href="Declarative.html#5733" class="Function">conv⊢</a> <a id="4705" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="4710" class="Symbol">(</a><a id="4711" href="Type.RenamingSubstitution.html#10656" class="Function">⋆.sub-Π</a> <a id="4719" href="Declarative.RenamingSubstitution.html#4688" class="Bound">A</a> <a id="4721" class="Symbol">(</a><a id="4722" href="Declarative.html#6008" class="Function">piBody</a> <a id="4729" href="Declarative.RenamingSubstitution.html#4683" class="Bound">L</a><a id="4730" class="Symbol">)</a> <a id="4732" href="Declarative.RenamingSubstitution.html#4677" class="Bound">σ⋆</a><a id="4734" class="Symbol">)</a> <a id="4736" class="Symbol">(</a><a id="4737" href="Declarative.RenamingSubstitution.html#4392" class="Function">sub</a> <a id="4741" href="Declarative.RenamingSubstitution.html#4677" class="Bound">σ⋆</a> <a id="4744" href="Declarative.RenamingSubstitution.html#4680" class="Bound">σ</a> <a id="4746" href="Declarative.RenamingSubstitution.html#4683" class="Bound">L</a> <a id="4748" href="Declarative.html#4827" class="InductiveConstructor Operator">·⋆</a> <a id="4751" href="Type.RenamingSubstitution.html#4129" class="Function">⋆.sub</a> <a id="4757" href="Declarative.RenamingSubstitution.html#4677" class="Bound">σ⋆</a> <a id="4760" href="Declarative.RenamingSubstitution.html#4688" class="Bound">A</a><a id="4761" class="Symbol">)</a>
<a id="4763" href="Declarative.RenamingSubstitution.html#4392" class="Function">sub</a> <a id="4767" class="Symbol">_</a>  <a id="4770" href="Declarative.RenamingSubstitution.html#4770" class="Bound">σ</a> <a id="4772" class="Symbol">(</a><a id="4773" href="Declarative.html#4910" class="InductiveConstructor">wrap</a> <a id="4778" href="Declarative.RenamingSubstitution.html#4778" class="Bound">A</a> <a id="4780" href="Declarative.RenamingSubstitution.html#4780" class="Bound">B</a> <a id="4782" href="Declarative.RenamingSubstitution.html#4782" class="Bound">L</a><a id="4783" class="Symbol">)</a> <a id="4785" class="Symbol">=</a> <a id="4787" href="Declarative.html#4910" class="InductiveConstructor">wrap</a> <a id="4792" class="Symbol">_</a> <a id="4794" class="Symbol">_</a> <a id="4796" class="Symbol">(</a><a id="4797" href="Declarative.html#5733" class="Function">conv⊢</a> <a id="4803" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="4808" class="Symbol">(</a><a id="4809" href="Type.RenamingSubstitution.html#10236" class="Function">⋆.sub-μ</a> <a id="4817" class="Symbol">_</a> <a id="4819" href="Declarative.RenamingSubstitution.html#4778" class="Bound">A</a> <a id="4821" href="Declarative.RenamingSubstitution.html#4780" class="Bound">B</a><a id="4822" class="Symbol">)</a> <a id="4824" class="Symbol">(</a><a id="4825" href="Declarative.RenamingSubstitution.html#4392" class="Function">sub</a> <a id="4829" class="Symbol">_</a> <a id="4831" href="Declarative.RenamingSubstitution.html#4770" class="Bound">σ</a> <a id="4833" href="Declarative.RenamingSubstitution.html#4782" class="Bound">L</a><a id="4834" class="Symbol">))</a>
<a id="4837" href="Declarative.RenamingSubstitution.html#4392" class="Function">sub</a> <a id="4841" class="Symbol">_</a>  <a id="4844" href="Declarative.RenamingSubstitution.html#4844" class="Bound">σ</a> <a id="4846" class="Symbol">(</a><a id="4847" href="Declarative.html#5076" class="InductiveConstructor">unwrap</a> <a id="4854" href="Declarative.RenamingSubstitution.html#4854" class="Bound">L</a><a id="4855" class="Symbol">)</a>   <a id="4859" class="Symbol">=</a>
  <a id="4863" href="Declarative.html#5733" class="Function">conv⊢</a> <a id="4869" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="4874" class="Symbol">(</a><a id="4875" href="Relation.Binary.PropositionalEquality.Core.html#980" class="Function">sym</a> <a id="4879" class="Symbol">(</a><a id="4880" href="Type.RenamingSubstitution.html#10236" class="Function">⋆.sub-μ</a> <a id="4888" class="Symbol">_</a> <a id="4890" class="Symbol">(</a><a id="4891" href="Declarative.html#6081" class="Function">muPat</a> <a id="4897" href="Declarative.RenamingSubstitution.html#4854" class="Bound">L</a><a id="4898" class="Symbol">)</a> <a id="4900" class="Symbol">(</a><a id="4901" href="Declarative.html#6172" class="Function">muArg</a> <a id="4907" href="Declarative.RenamingSubstitution.html#4854" class="Bound">L</a><a id="4908" class="Symbol">)))</a> <a id="4912" class="Symbol">(</a><a id="4913" href="Declarative.html#5076" class="InductiveConstructor">unwrap</a> <a id="4920" class="Symbol">(</a><a id="4921" href="Declarative.RenamingSubstitution.html#4392" class="Function">sub</a> <a id="4925" class="Symbol">_</a> <a id="4927" href="Declarative.RenamingSubstitution.html#4844" class="Bound">σ</a> <a id="4929" href="Declarative.RenamingSubstitution.html#4854" class="Bound">L</a><a id="4930" class="Symbol">))</a>
<a id="4933" href="Declarative.RenamingSubstitution.html#4392" class="Function">sub</a> <a id="4937" class="Symbol">_</a>  <a id="4940" href="Declarative.RenamingSubstitution.html#4940" class="Bound">σ</a> <a id="4942" class="Symbol">(</a><a id="4943" href="Declarative.html#5194" class="InductiveConstructor">conv</a> <a id="4948" href="Declarative.RenamingSubstitution.html#4948" class="Bound">p</a> <a id="4950" href="Declarative.RenamingSubstitution.html#4950" class="Bound">L</a><a id="4951" class="Symbol">)</a>   <a id="4955" class="Symbol">=</a> <a id="4957" href="Declarative.html#5194" class="InductiveConstructor">conv</a> <a id="4962" class="Symbol">(</a><a id="4963" href="Type.Equality.html#2404" class="Function">sub≡β</a> <a id="4969" class="Symbol">_</a> <a id="4971" href="Declarative.RenamingSubstitution.html#4948" class="Bound">p</a><a id="4972" class="Symbol">)</a> <a id="4974" class="Symbol">(</a><a id="4975" href="Declarative.RenamingSubstitution.html#4392" class="Function">sub</a> <a id="4979" class="Symbol">_</a> <a id="4981" href="Declarative.RenamingSubstitution.html#4940" class="Bound">σ</a> <a id="4983" href="Declarative.RenamingSubstitution.html#4950" class="Bound">L</a><a id="4984" class="Symbol">)</a>
<a id="4986" href="Declarative.RenamingSubstitution.html#4392" class="Function">sub</a> <a id="4990" href="Declarative.RenamingSubstitution.html#4990" class="Bound">σ⋆</a> <a id="4993" class="Symbol">_</a> <a id="4995" class="Symbol">(</a><a id="4996" href="Declarative.html#5256" class="InductiveConstructor">con</a> <a id="5000" href="Declarative.RenamingSubstitution.html#5000" class="Bound">cn</a><a id="5002" class="Symbol">)</a>     <a id="5008" class="Symbol">=</a> <a id="5010" href="Declarative.html#5256" class="InductiveConstructor">con</a> <a id="5014" class="Symbol">(</a><a id="5015" href="Declarative.RenamingSubstitution.html#3985" class="Function">subTermCon</a> <a id="5026" href="Declarative.RenamingSubstitution.html#4990" class="Bound">σ⋆</a> <a id="5029" href="Declarative.RenamingSubstitution.html#5000" class="Bound">cn</a><a id="5031" class="Symbol">)</a>
<a id="5033" href="Declarative.RenamingSubstitution.html#4392" class="Function">sub</a> <a id="5037" class="Symbol">_</a>  <a id="5040" class="Symbol">_</a> <a id="5042" class="Symbol">(</a><a id="5043" href="Declarative.html#5342" class="InductiveConstructor">ibuiltin</a> <a id="5052" href="Declarative.RenamingSubstitution.html#5052" class="Bound">b</a><a id="5053" class="Symbol">)</a> <a id="5055" class="Symbol">=</a> <a id="5057" href="Declarative.html#5733" class="Function">conv⊢</a> <a id="5063" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="5068" class="Symbol">(</a><a id="5069" href="Declarative.html#4354" class="Postulate">itype-sub</a> <a id="5079" href="Declarative.RenamingSubstitution.html#5052" class="Bound">b</a> <a id="5081" class="Symbol">_)</a> <a id="5084" class="Symbol">(</a><a id="5085" href="Declarative.html#5342" class="InductiveConstructor">ibuiltin</a> <a id="5094" href="Declarative.RenamingSubstitution.html#5052" class="Bound">b</a><a id="5095" class="Symbol">)</a>
<a id="5097" href="Declarative.RenamingSubstitution.html#4392" class="Function">sub</a> <a id="5101" class="Symbol">_</a>  <a id="5104" class="Symbol">_</a> <a id="5106" class="Symbol">(</a><a id="5107" href="Declarative.html#5424" class="InductiveConstructor">error</a> <a id="5113" href="Declarative.RenamingSubstitution.html#5113" class="Bound">A</a><a id="5114" class="Symbol">)</a>    <a id="5119" class="Symbol">=</a> <a id="5121" href="Declarative.html#5424" class="InductiveConstructor">error</a> <a id="5127" class="Symbol">(</a><a id="5128" href="Type.RenamingSubstitution.html#4129" class="Function">⋆.sub</a> <a id="5134" class="Symbol">_</a> <a id="5136" href="Declarative.RenamingSubstitution.html#5113" class="Bound">A</a><a id="5137" class="Symbol">)</a>
</pre>
<p>Extending a substitution by a term. Substitutions are implemented as
functions but they could also be implemented as lists. This operation
corresponds to cons (<code class="language-plaintext highlighter-rouge">_∷_</code>) for backwards lists.</p>

<pre class="Agda"><a id="subcons"></a><a id="5337" href="Declarative.RenamingSubstitution.html#5337" class="Function">subcons</a> <a id="5345" class="Symbol">:</a> <a id="5347" class="Symbol">(</a><a id="5348" href="Declarative.RenamingSubstitution.html#5348" class="Bound">σ⋆</a> <a id="5351" class="Symbol">:</a> <a id="5353" href="Type.RenamingSubstitution.html#3743" class="Function">⋆.Sub</a> <a id="5359" href="Type.html#1078" class="Generalizable">Φ</a> <a id="5361" href="Type.html#1080" class="Generalizable">Ψ</a><a id="5362" class="Symbol">)</a>
        <a id="5372" class="Symbol">→</a> <a id="5374" class="Symbol">(</a><a id="5375" href="Declarative.RenamingSubstitution.html#3250" class="Function">Sub</a> <a id="5379" href="Declarative.html#1692" class="Generalizable">Γ</a> <a id="5381" href="Declarative.html#1694" class="Generalizable">Δ</a> <a id="5383" href="Declarative.RenamingSubstitution.html#5348" class="Bound">σ⋆</a><a id="5385" class="Symbol">)</a>
        <a id="5395" class="Symbol">→</a> <a id="5397" class="Symbol">∀{</a><a id="5399" href="Declarative.RenamingSubstitution.html#5399" class="Bound">A</a><a id="5400" class="Symbol">}</a>
        <a id="5410" class="Symbol">→</a> <a id="5412" href="Declarative.html#1694" class="Generalizable">Δ</a> <a id="5414" href="Declarative.html#4584" class="Datatype Operator">⊢</a> <a id="5416" href="Type.RenamingSubstitution.html#4129" class="Function">⋆.sub</a> <a id="5422" href="Declarative.RenamingSubstitution.html#5348" class="Bound">σ⋆</a> <a id="5425" href="Declarative.RenamingSubstitution.html#5399" class="Bound">A</a>
          <a id="5437" class="Comment">----------------</a>
        <a id="5462" class="Symbol">→</a> <a id="5464" href="Declarative.RenamingSubstitution.html#3250" class="Function">Sub</a> <a id="5468" class="Symbol">(</a><a id="5469" href="Declarative.html#1692" class="Generalizable">Γ</a> <a id="5471" href="Declarative.html#1603" class="InductiveConstructor Operator">,</a> <a id="5473" href="Declarative.RenamingSubstitution.html#5399" class="Bound">A</a><a id="5474" class="Symbol">)</a> <a id="5476" href="Declarative.html#1694" class="Generalizable">Δ</a> <a id="5478" href="Declarative.RenamingSubstitution.html#5348" class="Bound">σ⋆</a>
<a id="5481" href="Declarative.RenamingSubstitution.html#5337" class="Function">subcons</a> <a id="5489" class="Symbol">_</a> <a id="5491" href="Declarative.RenamingSubstitution.html#5491" class="Bound">σ</a> <a id="5493" href="Declarative.RenamingSubstitution.html#5493" class="Bound">L</a> <a id="5495" href="Declarative.html#1885" class="InductiveConstructor">Z</a>     <a id="5501" class="Symbol">=</a> <a id="5503" href="Declarative.RenamingSubstitution.html#5493" class="Bound">L</a>
<a id="5505" href="Declarative.RenamingSubstitution.html#5337" class="Function">subcons</a> <a id="5513" class="Symbol">_</a> <a id="5515" href="Declarative.RenamingSubstitution.html#5515" class="Bound">σ</a> <a id="5517" href="Declarative.RenamingSubstitution.html#5517" class="Bound">L</a> <a id="5519" class="Symbol">(</a><a id="5520" href="Declarative.html#1919" class="InductiveConstructor">S</a> <a id="5522" href="Declarative.RenamingSubstitution.html#5522" class="Bound">x</a><a id="5523" class="Symbol">)</a> <a id="5525" class="Symbol">=</a> <a id="5527" href="Declarative.RenamingSubstitution.html#5515" class="Bound">σ</a> <a id="5529" href="Declarative.RenamingSubstitution.html#5522" class="Bound">x</a>
</pre>
<p>Substitute a single variable in a term. Used to specify the beta-rule
for appliction in reduction.</p>

<pre class="Agda"><a id="_[_]"></a><a id="5640" href="Declarative.RenamingSubstitution.html#5640" class="Function Operator">_[_]</a> <a id="5645" class="Symbol">:</a> <a id="5647" href="Declarative.html#1692" class="Generalizable">Γ</a> <a id="5649" href="Declarative.html#1603" class="InductiveConstructor Operator">,</a> <a id="5651" href="Type.html#2498" class="Generalizable">A</a> <a id="5653" href="Declarative.html#4584" class="Datatype Operator">⊢</a> <a id="5655" href="Type.html#2503" class="Generalizable">B</a>
     <a id="5662" class="Symbol">→</a> <a id="5664" href="Declarative.html#1692" class="Generalizable">Γ</a> <a id="5666" href="Declarative.html#4584" class="Datatype Operator">⊢</a> <a id="5668" href="Type.html#2498" class="Generalizable">A</a>
       <a id="5677" class="Comment">---------</a>
     <a id="5692" class="Symbol">→</a> <a id="5694" href="Declarative.html#1692" class="Generalizable">Γ</a> <a id="5696" href="Declarative.html#4584" class="Datatype Operator">⊢</a> <a id="5698" href="Type.html#2503" class="Generalizable">B</a>
<a id="5700" href="Declarative.RenamingSubstitution.html#5700" class="Bound">L</a> <a id="5702" href="Declarative.RenamingSubstitution.html#5640" class="Function Operator">[</a> <a id="5704" href="Declarative.RenamingSubstitution.html#5704" class="Bound">M</a> <a id="5706" href="Declarative.RenamingSubstitution.html#5640" class="Function Operator">]</a> <a id="5708" class="Symbol">=</a> <a id="5710" href="Declarative.html#5733" class="Function">conv⊢</a>
  <a id="5718" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
  <a id="5725" class="Symbol">(</a><a id="5726" href="Type.RenamingSubstitution.html#5965" class="Function">⋆.sub-id</a> <a id="5735" class="Symbol">(</a><a id="5736" href="Declarative.html#5884" class="Function">typeOf</a> <a id="5743" href="Declarative.RenamingSubstitution.html#5700" class="Bound">L</a><a id="5744" class="Symbol">))</a>
  <a id="5749" class="Symbol">(</a><a id="5750" href="Declarative.RenamingSubstitution.html#4392" class="Function">sub</a>
    <a id="5758" class="Symbol">_</a>
    <a id="5764" class="Symbol">(</a><a id="5765" href="Declarative.RenamingSubstitution.html#5337" class="Function">subcons</a> <a id="5773" href="Type.html#2045" class="InductiveConstructor">`</a> <a id="5775" class="Symbol">(</a><a id="5776" href="Declarative.html#4624" class="InductiveConstructor">`</a> <a id="5778" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="5780" href="Declarative.html#5574" class="Function">conv∋</a> <a id="5786" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="5791" class="Symbol">(</a><a id="5792" href="Relation.Binary.PropositionalEquality.Core.html#980" class="Function">sym</a> <a id="5796" class="Symbol">(</a><a id="5797" href="Type.RenamingSubstitution.html#5965" class="Function">⋆.sub-id</a> <a id="5806" class="Symbol">_)))</a>
    <a id="5815" class="Symbol">(</a><a id="5816" href="Declarative.html#5733" class="Function">conv⊢</a> <a id="5822" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="5827" class="Symbol">(</a><a id="5828" href="Relation.Binary.PropositionalEquality.Core.html#980" class="Function">sym</a> <a id="5832" class="Symbol">(</a><a id="5833" href="Type.RenamingSubstitution.html#5965" class="Function">⋆.sub-id</a> <a id="5842" class="Symbol">(</a><a id="5843" href="Declarative.html#5884" class="Function">typeOf</a> <a id="5850" href="Declarative.RenamingSubstitution.html#5704" class="Bound">M</a><a id="5851" class="Symbol">)))</a> <a id="5855" href="Declarative.RenamingSubstitution.html#5704" class="Bound">M</a><a id="5856" class="Symbol">))</a> <a id="5859" href="Declarative.RenamingSubstitution.html#5700" class="Bound">L</a><a id="5860" class="Symbol">)</a>
</pre>
<p>Substitute a single type variable in a term. Used to specify the
beta-rule for type instantiation in reduction.</p>

<pre class="Agda"><a id="_[_]⋆"></a><a id="5984" href="Declarative.RenamingSubstitution.html#5984" class="Function Operator">_[_]⋆</a> <a id="5990" class="Symbol">:</a> <a id="5992" href="Declarative.html#1692" class="Generalizable">Γ</a> <a id="5994" href="Declarative.html#1560" class="InductiveConstructor Operator">,⋆</a> <a id="5997" href="Type.html#823" class="Generalizable">K</a> <a id="5999" href="Declarative.html#4584" class="Datatype Operator">⊢</a> <a id="6001" href="Type.html#2503" class="Generalizable">B</a>
      <a id="6009" class="Symbol">→</a> <a id="6011" class="Symbol">(</a><a id="6012" href="Declarative.RenamingSubstitution.html#6012" class="Bound">A</a> <a id="6014" class="Symbol">:</a> <a id="6016" href="Type.html#1078" class="Generalizable">Φ</a> <a id="6018" href="Type.html#2011" class="Datatype Operator">⊢⋆</a> <a id="6021" href="Type.html#823" class="Generalizable">K</a><a id="6022" class="Symbol">)</a>
        <a id="6032" class="Comment">-------------</a>
      <a id="6052" class="Symbol">→</a> <a id="6054" href="Declarative.html#1692" class="Generalizable">Γ</a> <a id="6056" href="Declarative.html#4584" class="Datatype Operator">⊢</a> <a id="6058" href="Type.html#2503" class="Generalizable">B</a> <a id="6060" href="Type.RenamingSubstitution.html#4773" class="Function Operator">⋆.[</a> <a id="6064" href="Declarative.RenamingSubstitution.html#6012" class="Bound">A</a> <a id="6066" href="Type.RenamingSubstitution.html#4773" class="Function Operator">]</a>
<a id="6068" href="Declarative.RenamingSubstitution.html#6068" class="Bound">L</a> <a id="6070" href="Declarative.RenamingSubstitution.html#5984" class="Function Operator">[</a> <a id="6072" href="Declarative.RenamingSubstitution.html#6072" class="Bound">A</a> <a id="6074" href="Declarative.RenamingSubstitution.html#5984" class="Function Operator">]⋆</a> <a id="6077" class="Symbol">=</a> <a id="6079" href="Declarative.RenamingSubstitution.html#4392" class="Function">sub</a>
  <a id="6085" class="Symbol">_</a>
  <a id="6089" class="Symbol">(λ</a> <a id="6092" class="Symbol">{(</a><a id="6094" href="Declarative.html#1965" class="InductiveConstructor">T</a> <a id="6096" href="Declarative.RenamingSubstitution.html#6096" class="Bound">x</a><a id="6097" class="Symbol">)</a> <a id="6099" class="Symbol">→</a>
        <a id="6109" href="Declarative.html#5733" class="Function">conv⊢</a> <a id="6115" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="6120" class="Symbol">(</a><a id="6121" href="Relation.Binary.PropositionalEquality.Core.html#1025" class="Function">trans</a> <a id="6127" class="Symbol">(</a><a id="6128" href="Relation.Binary.PropositionalEquality.Core.html#980" class="Function">sym</a> <a id="6132" class="Symbol">(</a><a id="6133" href="Type.RenamingSubstitution.html#5965" class="Function">⋆.sub-id</a> <a id="6142" class="Symbol">_))</a> <a id="6146" class="Symbol">(</a><a id="6147" href="Type.RenamingSubstitution.html#6611" class="Function">⋆.sub-ren</a> <a id="6157" class="Symbol">(</a><a id="6158" href="Declarative.html#5945" class="Function">typeOf∋</a> <a id="6166" href="Declarative.RenamingSubstitution.html#6096" class="Bound">x</a><a id="6167" class="Symbol">)))</a> <a id="6171" class="Symbol">(</a><a id="6172" href="Declarative.html#4624" class="InductiveConstructor">`</a> <a id="6174" href="Declarative.RenamingSubstitution.html#6096" class="Bound">x</a><a id="6175" class="Symbol">)})</a>
  <a id="6181" href="Declarative.RenamingSubstitution.html#6068" class="Bound">L</a>
</pre>

  </div>

</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/plutus-metatheory/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Plutus metatheory library</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Plutus metatheory library</li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/input-output-hk"><svg class="svg-icon"><use xlink:href="/plutus-metatheory/assets/minima-social-icons.svg#github"></use></svg> <span class="username">input-output-hk</span></a></li><li><a href="https://www.twitter.com/InputOutputHK"><svg class="svg-icon"><use xlink:href="/plutus-metatheory/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">InputOutputHK</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>
This repository contains a model of Plutus Core (PLC) written in Agda. We prove metatheoretic properties of the model in Agda and test the production PLC implementation against the model in Haskell by compiling the Agda code to Haskell and executing it.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
