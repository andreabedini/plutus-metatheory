<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>CK machine for types | Plutus metatheory library</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="CK machine for types" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="This repository contains a model of Plutus Core (PLC) written in Agda. We prove metatheoretic properties of the model in Agda and test the production PLC implementation against the model in Haskell by compiling the Agda code to Haskell and executing it." />
<meta property="og:description" content="This repository contains a model of Plutus Core (PLC) written in Agda. We prove metatheoretic properties of the model in Agda and test the production PLC implementation against the model in Haskell by compiling the Agda code to Haskell and executing it." />
<link rel="canonical" href="/plutus-metatheory/Type.CK.html" />
<meta property="og:url" content="/plutus-metatheory/Type.CK.html" />
<meta property="og:site_name" content="Plutus metatheory library" />
<script type="application/ld+json">
{"description":"This repository contains a model of Plutus Core (PLC) written in Agda. We prove metatheoretic properties of the model in Agda and test the production PLC implementation against the model in Haskell by compiling the Agda code to Haskell and executing it.","headline":"CK machine for types","@type":"WebPage","url":"/plutus-metatheory/Type.CK.html","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/plutus-metatheory/assets/main.css"><link type="application/atom+xml" rel="alternate" href="/plutus-metatheory/feed.xml" title="Plutus metatheory library" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/plutus-metatheory/">Plutus metatheory library</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/plutus-metatheory/">Table of Contents</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <link rel="stylesheet" href="/plutus-metatheory/assets/css/Agda.css">
    <h1 class="post-title">CK machine for types</h1>
  </header>

  <div class="post-content">
    <pre class="Agda"><a id="55" class="Keyword">module</a> <a id="62" href="Type.CK.html" class="Module">Type.CK</a> <a id="70" class="Keyword">where</a>
</pre>
<h2 id="imports">Imports</h2>

<pre class="Agda"><a id="97" class="Keyword">open</a> <a id="102" class="Keyword">import</a> <a id="109" href="Type.html" class="Module">Type</a>
<a id="114" class="Keyword">open</a> <a id="119" class="Keyword">import</a> <a id="126" href="Type.RenamingSubstitution.html" class="Module">Type.RenamingSubstitution</a>
<a id="152" class="Keyword">open</a> <a id="157" class="Keyword">import</a> <a id="164" href="Type.Reduction.html" class="Module">Type.Reduction</a> <a id="179" class="Keyword">hiding</a> <a id="186" class="Symbol">(</a><a id="187" href="Type.Reduction.html#2507" class="InductiveConstructor">step</a><a id="191" class="Symbol">)</a>

<a id="194" class="Keyword">open</a> <a id="199" class="Keyword">import</a> <a id="206" href="Data.Product.html" class="Module">Data.Product</a>
</pre>
<p>The CK machine is an abstract machine used to compute a lambda term to
a value. Here we use it on types.</p>

<p>The CK machine operates on a type by focussing on a subexpression
(subtype) of that type and computing it step-by-step until it becomes
a value. When the subtype becomes a value it searches outwards for the
next subexpression to compute and then carries on until no further
computation is necessary. It keeps track of the context using <code class="language-plaintext highlighter-rouge">Frame</code>s
to track the relationship between a subtype the immediate ancestor
type that contains it (e.g., <code class="language-plaintext highlighter-rouge">- · B</code> is a frame corresponding to an
application where the function term <code class="language-plaintext highlighter-rouge">A</code> is missing).  <code class="language-plaintext highlighter-rouge">Stack</code>s to
represent paths to missing subtypes deep in a type, and a <code class="language-plaintext highlighter-rouge">State</code> to
track the necessary changes of mode during execution.</p>

<p>Our CK machine is intrinsically kinded. The step function, which
performs one step of computation, preserves the kind of the overall
type and the intermediate data structures are indexed by kinds to
enable this.</p>

<h2 id="frames">Frames</h2>

<p>A frame corresponds to a type with a hole in it for a missing sub
type. It is indexed by two kinds. The first index is the kind of the
outer type that the frame corresponds to, the second index refers to
the kind of the missing subterm. The frame datatypes has constructors
for all the different places in a type that we might need to make a
hole.</p>

<pre class="Agda"><a id="1577" class="Keyword">data</a> <a id="Frame"></a><a id="1582" href="Type.CK.html#1582" class="Datatype">Frame</a> <a id="1588" class="Symbol">:</a> <a id="1590" href="Type.html#572" class="Datatype">Kind</a> <a id="1595" class="Symbol">→</a> <a id="1597" href="Type.html#572" class="Datatype">Kind</a> <a id="1602" class="Symbol">→</a> <a id="1604" class="PrimitiveType">Set</a> <a id="1608" class="Keyword">where</a>
  <a id="Frame.-·_"></a><a id="1616" href="Type.CK.html#1616" class="InductiveConstructor Operator">-·_</a>     <a id="1624" class="Symbol">:</a> <a id="1626" href="Type.html#977" class="InductiveConstructor">∅</a> <a id="1628" href="Type.html#2011" class="Datatype Operator">⊢⋆</a> <a id="1631" href="Type.html#823" class="Generalizable">K</a> <a id="1633" class="Symbol">→</a> <a id="1635" href="Type.CK.html#1582" class="Datatype">Frame</a> <a id="1641" href="Type.html#821" class="Generalizable">J</a> <a id="1643" class="Symbol">(</a><a id="1644" href="Type.html#823" class="Generalizable">K</a> <a id="1646" href="Type.html#626" class="InductiveConstructor Operator">⇒</a> <a id="1648" href="Type.html#821" class="Generalizable">J</a><a id="1649" class="Symbol">)</a>
  <a id="Frame._·-"></a><a id="1653" href="Type.CK.html#1653" class="InductiveConstructor Operator">_·-</a>     <a id="1661" class="Symbol">:</a> <a id="1663" class="Symbol">{</a><a id="1664" href="Type.CK.html#1664" class="Bound">A</a> <a id="1666" class="Symbol">:</a> <a id="1668" href="Type.html#977" class="InductiveConstructor">∅</a> <a id="1670" href="Type.html#2011" class="Datatype Operator">⊢⋆</a> <a id="1673" href="Type.html#823" class="Generalizable">K</a> <a id="1675" href="Type.html#626" class="InductiveConstructor Operator">⇒</a> <a id="1677" href="Type.html#821" class="Generalizable">J</a><a id="1678" class="Symbol">}</a> <a id="1680" class="Symbol">→</a> <a id="1682" href="Type.Reduction.html#832" class="Datatype">Value⋆</a> <a id="1689" href="Type.CK.html#1664" class="Bound">A</a> <a id="1691" class="Symbol">→</a> <a id="1693" href="Type.CK.html#1582" class="Datatype">Frame</a> <a id="1699" href="Type.html#821" class="Generalizable">J</a> <a id="1701" href="Type.html#823" class="Generalizable">K</a>
  <a id="Frame.-⇒_"></a><a id="1705" href="Type.CK.html#1705" class="InductiveConstructor Operator">-⇒_</a>     <a id="1713" class="Symbol">:</a> <a id="1715" href="Type.html#977" class="InductiveConstructor">∅</a> <a id="1717" href="Type.html#2011" class="Datatype Operator">⊢⋆</a> <a id="1720" href="Type.html#591" class="InductiveConstructor">*</a> <a id="1722" class="Symbol">→</a> <a id="1724" href="Type.CK.html#1582" class="Datatype">Frame</a> <a id="1730" href="Type.html#591" class="InductiveConstructor">*</a> <a id="1732" href="Type.html#591" class="InductiveConstructor">*</a>
  <a id="Frame._⇒-"></a><a id="1736" href="Type.CK.html#1736" class="InductiveConstructor Operator">_⇒-</a>     <a id="1744" class="Symbol">:</a> <a id="1746" class="Symbol">{</a><a id="1747" href="Type.CK.html#1747" class="Bound">A</a> <a id="1749" class="Symbol">:</a> <a id="1751" href="Type.html#977" class="InductiveConstructor">∅</a> <a id="1753" href="Type.html#2011" class="Datatype Operator">⊢⋆</a> <a id="1756" href="Type.html#591" class="InductiveConstructor">*</a><a id="1757" class="Symbol">}</a> <a id="1759" class="Symbol">→</a> <a id="1761" href="Type.Reduction.html#832" class="Datatype">Value⋆</a> <a id="1768" href="Type.CK.html#1747" class="Bound">A</a> <a id="1770" class="Symbol">→</a> <a id="1772" href="Type.CK.html#1582" class="Datatype">Frame</a> <a id="1778" href="Type.html#591" class="InductiveConstructor">*</a> <a id="1780" href="Type.html#591" class="InductiveConstructor">*</a>
  <a id="Frame.μ-_"></a><a id="1784" href="Type.CK.html#1784" class="InductiveConstructor Operator">μ-_</a>     <a id="1792" class="Symbol">:</a> <a id="1794" class="Symbol">(</a><a id="1795" href="Type.CK.html#1795" class="Bound">B</a> <a id="1797" class="Symbol">:</a> <a id="1799" href="Type.html#977" class="InductiveConstructor">∅</a> <a id="1801" href="Type.html#2011" class="Datatype Operator">⊢⋆</a> <a id="1804" href="Type.html#823" class="Generalizable">K</a><a id="1805" class="Symbol">)</a> <a id="1807" class="Symbol">→</a> <a id="1809" href="Type.CK.html#1582" class="Datatype">Frame</a> <a id="1815" href="Type.html#591" class="InductiveConstructor">*</a> <a id="1817" class="Symbol">((</a><a id="1819" href="Type.html#823" class="Generalizable">K</a> <a id="1821" href="Type.html#626" class="InductiveConstructor Operator">⇒</a> <a id="1823" href="Type.html#591" class="InductiveConstructor">*</a><a id="1824" class="Symbol">)</a> <a id="1826" href="Type.html#626" class="InductiveConstructor Operator">⇒</a> <a id="1828" href="Type.html#823" class="Generalizable">K</a> <a id="1830" href="Type.html#626" class="InductiveConstructor Operator">⇒</a> <a id="1832" href="Type.html#591" class="InductiveConstructor">*</a><a id="1833" class="Symbol">)</a>
  <a id="Frame.μ_-"></a><a id="1837" href="Type.CK.html#1837" class="InductiveConstructor Operator">μ_-</a>     <a id="1845" class="Symbol">:</a> <a id="1847" class="Symbol">{</a><a id="1848" href="Type.CK.html#1848" class="Bound">A</a> <a id="1850" class="Symbol">:</a> <a id="1852" href="Type.html#977" class="InductiveConstructor">∅</a> <a id="1854" href="Type.html#2011" class="Datatype Operator">⊢⋆</a> <a id="1857" class="Symbol">(</a><a id="1858" href="Type.html#823" class="Generalizable">K</a> <a id="1860" href="Type.html#626" class="InductiveConstructor Operator">⇒</a> <a id="1862" href="Type.html#591" class="InductiveConstructor">*</a><a id="1863" class="Symbol">)</a> <a id="1865" href="Type.html#626" class="InductiveConstructor Operator">⇒</a> <a id="1867" href="Type.html#823" class="Generalizable">K</a> <a id="1869" href="Type.html#626" class="InductiveConstructor Operator">⇒</a> <a id="1871" href="Type.html#591" class="InductiveConstructor">*</a><a id="1872" class="Symbol">}</a> <a id="1874" class="Symbol">→</a> <a id="1876" href="Type.Reduction.html#832" class="Datatype">Value⋆</a> <a id="1883" href="Type.CK.html#1848" class="Bound">A</a> <a id="1885" class="Symbol">→</a> <a id="1887" href="Type.CK.html#1582" class="Datatype">Frame</a> <a id="1893" href="Type.html#591" class="InductiveConstructor">*</a> <a id="1895" href="Type.html#823" class="Generalizable">K</a>
</pre>
<p>Given a frame and type to plug in to it we can close the frame and
recover a type with no hole. By indexing frames by kinds we can
specify exactly what kind the plug needs to have and ensure we don’t
plug in something of the wrong kind. We can also ensure what kind the
returned type will have.</p>

<pre class="Agda"><a id="closeFrame"></a><a id="2202" href="Type.CK.html#2202" class="Function">closeFrame</a> <a id="2213" class="Symbol">:</a> <a id="2215" href="Type.CK.html#1582" class="Datatype">Frame</a> <a id="2221" href="Type.html#823" class="Generalizable">K</a> <a id="2223" href="Type.html#821" class="Generalizable">J</a> <a id="2225" class="Symbol">→</a> <a id="2227" href="Type.html#977" class="InductiveConstructor">∅</a> <a id="2229" href="Type.html#2011" class="Datatype Operator">⊢⋆</a> <a id="2232" href="Type.html#821" class="Generalizable">J</a> <a id="2234" class="Symbol">→</a> <a id="2236" href="Type.html#977" class="InductiveConstructor">∅</a> <a id="2238" href="Type.html#2011" class="Datatype Operator">⊢⋆</a> <a id="2241" href="Type.html#823" class="Generalizable">K</a>
<a id="2243" href="Type.CK.html#2202" class="Function">closeFrame</a> <a id="2254" class="Symbol">(</a><a id="2255" href="Type.CK.html#1616" class="InductiveConstructor Operator">-·</a> <a id="2258" href="Type.CK.html#2258" class="Bound">B</a><a id="2259" class="Symbol">)</a>  <a id="2262" href="Type.CK.html#2262" class="Bound">A</a> <a id="2264" class="Symbol">=</a> <a id="2266" href="Type.CK.html#2262" class="Bound">A</a> <a id="2268" href="Type.html#2253" class="InductiveConstructor Operator">·</a> <a id="2270" href="Type.CK.html#2258" class="Bound">B</a>
<a id="2272" href="Type.CK.html#2202" class="Function">closeFrame</a> <a id="2283" class="Symbol">(</a><a id="2284" href="Type.CK.html#1653" class="InductiveConstructor Operator">_·-</a> <a id="2288" href="Type.CK.html#2288" class="Bound">A</a><a id="2289" class="Symbol">)</a> <a id="2291" href="Type.CK.html#2291" class="Bound">B</a> <a id="2293" class="Symbol">=</a> <a id="2295" href="Type.Reduction.html#1355" class="Function">discharge</a> <a id="2305" href="Type.CK.html#2288" class="Bound">A</a> <a id="2307" href="Type.html#2253" class="InductiveConstructor Operator">·</a> <a id="2309" href="Type.CK.html#2291" class="Bound">B</a>
<a id="2311" href="Type.CK.html#2202" class="Function">closeFrame</a> <a id="2322" class="Symbol">(</a><a id="2323" href="Type.CK.html#1705" class="InductiveConstructor Operator">-⇒</a> <a id="2326" href="Type.CK.html#2326" class="Bound">B</a><a id="2327" class="Symbol">)</a>  <a id="2330" href="Type.CK.html#2330" class="Bound">A</a> <a id="2332" class="Symbol">=</a> <a id="2334" href="Type.CK.html#2330" class="Bound">A</a> <a id="2336" href="Type.html#2137" class="InductiveConstructor Operator">⇒</a> <a id="2338" href="Type.CK.html#2326" class="Bound">B</a>
<a id="2340" href="Type.CK.html#2202" class="Function">closeFrame</a> <a id="2351" class="Symbol">(</a><a id="2352" href="Type.CK.html#1736" class="InductiveConstructor Operator">_⇒-</a> <a id="2356" href="Type.CK.html#2356" class="Bound">A</a><a id="2357" class="Symbol">)</a> <a id="2359" href="Type.CK.html#2359" class="Bound">B</a> <a id="2361" class="Symbol">=</a> <a id="2363" href="Type.Reduction.html#1355" class="Function">discharge</a> <a id="2373" href="Type.CK.html#2356" class="Bound">A</a> <a id="2375" href="Type.html#2137" class="InductiveConstructor Operator">⇒</a> <a id="2377" href="Type.CK.html#2359" class="Bound">B</a>
<a id="2379" href="Type.CK.html#2202" class="Function">closeFrame</a> <a id="2390" class="Symbol">(</a><a id="2391" href="Type.CK.html#1837" class="InductiveConstructor Operator">μ_-</a> <a id="2395" href="Type.CK.html#2395" class="Bound">A</a><a id="2396" class="Symbol">)</a> <a id="2398" href="Type.CK.html#2398" class="Bound">B</a> <a id="2400" class="Symbol">=</a> <a id="2402" href="Type.html#2318" class="InductiveConstructor">μ</a> <a id="2404" class="Symbol">(</a><a id="2405" href="Type.Reduction.html#1355" class="Function">discharge</a> <a id="2415" href="Type.CK.html#2395" class="Bound">A</a><a id="2416" class="Symbol">)</a> <a id="2418" href="Type.CK.html#2398" class="Bound">B</a>
<a id="2420" href="Type.CK.html#2202" class="Function">closeFrame</a> <a id="2431" class="Symbol">(</a><a id="2432" href="Type.CK.html#1784" class="InductiveConstructor Operator">μ-</a> <a id="2435" href="Type.CK.html#2435" class="Bound">B</a><a id="2436" class="Symbol">)</a>  <a id="2439" href="Type.CK.html#2439" class="Bound">A</a> <a id="2441" class="Symbol">=</a> <a id="2443" href="Type.html#2318" class="InductiveConstructor">μ</a> <a id="2445" href="Type.CK.html#2439" class="Bound">A</a> <a id="2447" href="Type.CK.html#2435" class="Bound">B</a>
</pre>
<h2 id="stack">Stack</h2>

<p>A stack is a sequence of frames. It allows us to specify a single hole
deep in a type or one can think of it as a path from the root of the
type to a single hole somewhere deep inside the type.</p>

<pre class="Agda"><a id="2663" class="Keyword">data</a> <a id="Stack"></a><a id="2668" href="Type.CK.html#2668" class="Datatype">Stack</a> <a id="2674" class="Symbol">(</a><a id="2675" href="Type.CK.html#2675" class="Bound">K</a> <a id="2677" class="Symbol">:</a> <a id="2679" href="Type.html#572" class="Datatype">Kind</a><a id="2683" class="Symbol">)</a> <a id="2685" class="Symbol">:</a> <a id="2687" href="Type.html#572" class="Datatype">Kind</a> <a id="2692" class="Symbol">→</a> <a id="2694" class="PrimitiveType">Set</a> <a id="2698" class="Keyword">where</a>
  <a id="Stack.ε"></a><a id="2706" href="Type.CK.html#2706" class="InductiveConstructor">ε</a>   <a id="2710" class="Symbol">:</a> <a id="2712" href="Type.CK.html#2668" class="Datatype">Stack</a> <a id="2718" href="Type.CK.html#2675" class="Bound">K</a> <a id="2720" href="Type.CK.html#2675" class="Bound">K</a>
  <a id="Stack._,_"></a><a id="2724" href="Type.CK.html#2724" class="InductiveConstructor Operator">_,_</a> <a id="2728" class="Symbol">:</a> <a id="2730" href="Type.CK.html#2668" class="Datatype">Stack</a> <a id="2736" href="Type.CK.html#2675" class="Bound">K</a> <a id="2738" href="Type.html#821" class="Generalizable">J</a> <a id="2740" class="Symbol">→</a> <a id="2742" href="Type.CK.html#1582" class="Datatype">Frame</a> <a id="2748" href="Type.html#821" class="Generalizable">J</a> <a id="2750" href="Type.html#819" class="Generalizable">I</a> <a id="2752" class="Symbol">→</a> <a id="2754" href="Type.CK.html#2668" class="Datatype">Stack</a> <a id="2760" href="Type.CK.html#2675" class="Bound">K</a> <a id="2762" href="Type.html#819" class="Generalizable">I</a>
</pre>
<p>Analogously to frames we can close a stack by plugging in a type of
appropriate kind.</p>

<pre class="Agda"><a id="closeStack"></a><a id="2860" href="Type.CK.html#2860" class="Function">closeStack</a> <a id="2871" class="Symbol">:</a> <a id="2873" href="Type.CK.html#2668" class="Datatype">Stack</a> <a id="2879" href="Type.html#823" class="Generalizable">K</a> <a id="2881" href="Type.html#821" class="Generalizable">J</a> <a id="2883" class="Symbol">→</a> <a id="2885" href="Type.html#977" class="InductiveConstructor">∅</a> <a id="2887" href="Type.html#2011" class="Datatype Operator">⊢⋆</a> <a id="2890" href="Type.html#821" class="Generalizable">J</a> <a id="2892" class="Symbol">→</a> <a id="2894" href="Type.html#977" class="InductiveConstructor">∅</a> <a id="2896" href="Type.html#2011" class="Datatype Operator">⊢⋆</a> <a id="2899" href="Type.html#823" class="Generalizable">K</a>
<a id="2901" href="Type.CK.html#2860" class="Function">closeStack</a> <a id="2912" href="Type.CK.html#2706" class="InductiveConstructor">ε</a>       <a id="2920" href="Type.CK.html#2920" class="Bound">A</a> <a id="2922" class="Symbol">=</a> <a id="2924" href="Type.CK.html#2920" class="Bound">A</a>
<a id="2926" href="Type.CK.html#2860" class="Function">closeStack</a> <a id="2937" class="Symbol">(</a><a id="2938" href="Type.CK.html#2938" class="Bound">s</a> <a id="2940" href="Type.CK.html#2724" class="InductiveConstructor Operator">,</a> <a id="2942" href="Type.CK.html#2942" class="Bound">f</a><a id="2943" class="Symbol">)</a> <a id="2945" href="Type.CK.html#2945" class="Bound">A</a> <a id="2947" class="Symbol">=</a> <a id="2949" href="Type.CK.html#2860" class="Function">closeStack</a> <a id="2960" href="Type.CK.html#2938" class="Bound">s</a> <a id="2962" class="Symbol">(</a><a id="2963" href="Type.CK.html#2202" class="Function">closeFrame</a> <a id="2974" href="Type.CK.html#2942" class="Bound">f</a> <a id="2976" href="Type.CK.html#2945" class="Bound">A</a><a id="2977" class="Symbol">)</a>
</pre>
<h2 id="state">State</h2>

<p>There are three state of our type CK machine. In state <code class="language-plaintext highlighter-rouge">▻</code> we have a
stack and a subtype in focus that we requires further computation. In
state <code class="language-plaintext highlighter-rouge">◅</code> the subtype in focus is a value and no further computation
on it is necessary or possible, so we must change direction and look
to the stack for what to do next. In state <code class="language-plaintext highlighter-rouge">□</code> we have compute the
outer type to a value so we are done. We do not need an error state
<code class="language-plaintext highlighter-rouge">◆</code>. The type language does not have any effects or errors so the CK
machine cannot encounter an error when processing a well-kinded
type. This CK machine only operates on well-kinded types so no runtime
kind errors are possible either.</p>

<pre class="Agda"><a id="3648" class="Keyword">data</a> <a id="State"></a><a id="3653" href="Type.CK.html#3653" class="Datatype">State</a> <a id="3659" class="Symbol">(</a><a id="3660" href="Type.CK.html#3660" class="Bound">K</a> <a id="3662" class="Symbol">:</a> <a id="3664" href="Type.html#572" class="Datatype">Kind</a><a id="3668" class="Symbol">)</a> <a id="3670" class="Symbol">:</a> <a id="3672" href="Type.html#572" class="Datatype">Kind</a> <a id="3677" class="Symbol">→</a> <a id="3679" class="PrimitiveType">Set</a> <a id="3683" class="Keyword">where</a>
  <a id="State._▻_"></a><a id="3691" href="Type.CK.html#3691" class="InductiveConstructor Operator">_▻_</a> <a id="3695" class="Symbol">:</a> <a id="3697" href="Type.CK.html#2668" class="Datatype">Stack</a> <a id="3703" href="Type.CK.html#3660" class="Bound">K</a> <a id="3705" href="Type.html#821" class="Generalizable">J</a> <a id="3707" class="Symbol">→</a> <a id="3709" href="Type.html#977" class="InductiveConstructor">∅</a> <a id="3711" href="Type.html#2011" class="Datatype Operator">⊢⋆</a> <a id="3714" href="Type.html#821" class="Generalizable">J</a> <a id="3716" class="Symbol">→</a> <a id="3718" href="Type.CK.html#3653" class="Datatype">State</a> <a id="3724" href="Type.CK.html#3660" class="Bound">K</a> <a id="3726" href="Type.html#821" class="Generalizable">J</a>
  <a id="State._◅_"></a><a id="3730" href="Type.CK.html#3730" class="InductiveConstructor Operator">_◅_</a> <a id="3734" class="Symbol">:</a> <a id="3736" href="Type.CK.html#2668" class="Datatype">Stack</a> <a id="3742" href="Type.CK.html#3660" class="Bound">K</a> <a id="3744" href="Type.html#821" class="Generalizable">J</a> <a id="3746" class="Symbol">→</a> <a id="3748" class="Symbol">{</a><a id="3749" href="Type.CK.html#3749" class="Bound">A</a> <a id="3751" class="Symbol">:</a> <a id="3753" href="Type.html#977" class="InductiveConstructor">∅</a> <a id="3755" href="Type.html#2011" class="Datatype Operator">⊢⋆</a> <a id="3758" href="Type.html#821" class="Generalizable">J</a><a id="3759" class="Symbol">}</a> <a id="3761" class="Symbol">→</a> <a id="3763" href="Type.Reduction.html#832" class="Datatype">Value⋆</a> <a id="3770" href="Type.CK.html#3749" class="Bound">A</a> <a id="3772" class="Symbol">→</a> <a id="3774" href="Type.CK.html#3653" class="Datatype">State</a> <a id="3780" href="Type.CK.html#3660" class="Bound">K</a> <a id="3782" href="Type.html#821" class="Generalizable">J</a>
  <a id="State.□"></a><a id="3786" href="Type.CK.html#3786" class="InductiveConstructor">□</a>   <a id="3790" class="Symbol">:</a> <a id="3792" class="Symbol">{</a><a id="3793" href="Type.CK.html#3793" class="Bound">A</a> <a id="3795" class="Symbol">:</a> <a id="3797" href="Type.html#977" class="InductiveConstructor">∅</a> <a id="3799" href="Type.html#2011" class="Datatype Operator">⊢⋆</a> <a id="3802" href="Type.CK.html#3660" class="Bound">K</a><a id="3803" class="Symbol">}</a> <a id="3805" class="Symbol">→</a>  <a id="3808" href="Type.Reduction.html#832" class="Datatype">Value⋆</a> <a id="3815" href="Type.CK.html#3793" class="Bound">A</a> <a id="3817" class="Symbol">→</a> <a id="3819" href="Type.CK.html#3653" class="Datatype">State</a> <a id="3825" href="Type.CK.html#3660" class="Bound">K</a> <a id="3827" href="Type.CK.html#3660" class="Bound">K</a>
  <a id="3831" class="Comment">-- ◆ : ∀ (J : Kind) →  State K J -- impossible in the type language</a>
</pre>
<p>Analogously to <code class="language-plaintext highlighter-rouge">Frame</code> and <code class="language-plaintext highlighter-rouge">Stack</code> we can also close a <code class="language-plaintext highlighter-rouge">State</code>:</p>

<pre class="Agda"><a id="closeState"></a><a id="3973" href="Type.CK.html#3973" class="Function">closeState</a> <a id="3984" class="Symbol">:</a> <a id="3986" href="Type.CK.html#3653" class="Datatype">State</a> <a id="3992" href="Type.html#823" class="Generalizable">K</a> <a id="3994" href="Type.html#821" class="Generalizable">J</a> <a id="3996" class="Symbol">→</a> <a id="3998" href="Type.html#977" class="InductiveConstructor">∅</a> <a id="4000" href="Type.html#2011" class="Datatype Operator">⊢⋆</a> <a id="4003" href="Type.html#823" class="Generalizable">K</a>
<a id="4005" href="Type.CK.html#3973" class="Function">closeState</a> <a id="4016" class="Symbol">(</a><a id="4017" href="Type.CK.html#4017" class="Bound">s</a> <a id="4019" href="Type.CK.html#3691" class="InductiveConstructor Operator">▻</a> <a id="4021" href="Type.CK.html#4021" class="Bound">A</a><a id="4022" class="Symbol">)</a>   <a id="4026" class="Symbol">=</a> <a id="4028" href="Type.CK.html#2860" class="Function">closeStack</a> <a id="4039" href="Type.CK.html#4017" class="Bound">s</a> <a id="4041" href="Type.CK.html#4021" class="Bound">A</a>
<a id="4043" href="Type.CK.html#3973" class="Function">closeState</a> <a id="4054" class="Symbol">(</a><a id="4055" href="Type.CK.html#3730" class="InductiveConstructor Operator">_◅_</a> <a id="4059" href="Type.CK.html#4059" class="Bound">s</a> <a id="4061" href="Type.CK.html#4061" class="Bound">A</a><a id="4062" class="Symbol">)</a> <a id="4064" class="Symbol">=</a> <a id="4066" href="Type.CK.html#2860" class="Function">closeStack</a> <a id="4077" href="Type.CK.html#4059" class="Bound">s</a> <a id="4079" class="Symbol">(</a><a id="4080" href="Type.Reduction.html#1355" class="Function">discharge</a> <a id="4090" href="Type.CK.html#4061" class="Bound">A</a><a id="4091" class="Symbol">)</a>
<a id="4093" href="Type.CK.html#3973" class="Function">closeState</a> <a id="4104" class="Symbol">(</a><a id="4105" href="Type.CK.html#3786" class="InductiveConstructor">□</a> <a id="4107" href="Type.CK.html#4107" class="Bound">A</a><a id="4108" class="Symbol">)</a>     <a id="4114" class="Symbol">=</a> <a id="4116" href="Type.Reduction.html#1355" class="Function">discharge</a> <a id="4126" href="Type.CK.html#4107" class="Bound">A</a>
</pre>

<h2 id="the-machine">The machine</h2>

<p>The <code class="language-plaintext highlighter-rouge">step</code> function performs one step of computation. It takes a state
and return a new state. The kind index <code class="language-plaintext highlighter-rouge">K</code> refers to the kind of the
outer type which is preserved. The second index <code class="language-plaintext highlighter-rouge">J/J'</code> refers to the
kind of the subtype in focus which may change.</p>

<pre class="Agda"><a id="step"></a><a id="4411" href="Type.CK.html#4411" class="Function">step</a> <a id="4416" class="Symbol">:</a> <a id="4418" href="Type.CK.html#3653" class="Datatype">State</a> <a id="4424" href="Type.html#823" class="Generalizable">K</a> <a id="4426" href="Type.html#821" class="Generalizable">J</a> <a id="4428" class="Symbol">→</a> <a id="4430" href="Data.Product.html#1369" class="Function">∃</a> <a id="4432" class="Symbol">λ</a> <a id="4434" href="Type.CK.html#4434" class="Bound">J&#39;</a> <a id="4437" class="Symbol">→</a> <a id="4439" href="Type.CK.html#3653" class="Datatype">State</a> <a id="4445" href="Type.html#823" class="Generalizable">K</a> <a id="4447" href="Type.CK.html#4434" class="Bound">J&#39;</a>
<a id="4450" href="Type.CK.html#4411" class="Function">step</a> <a id="4455" class="Symbol">(</a><a id="4456" href="Type.CK.html#4456" class="Bound">s</a> <a id="4458" href="Type.CK.html#3691" class="InductiveConstructor Operator">▻</a> <a id="4460" href="Type.html#2087" class="InductiveConstructor">Π</a> <a id="4462" href="Type.CK.html#4462" class="Bound">A</a><a id="4463" class="Symbol">)</a>                      <a id="4486" class="Symbol">=</a> <a id="4488" href="Data.Product.html#2196" class="Function Operator">-,</a> <a id="4491" href="Type.CK.html#4456" class="Bound">s</a> <a id="4493" href="Type.CK.html#3730" class="InductiveConstructor Operator">◅</a> <a id="4495" href="Type.Reduction.html#863" class="InductiveConstructor">V-Π</a> <a id="4499" href="Type.CK.html#4462" class="Bound">A</a>
<a id="4501" href="Type.CK.html#4411" class="Function">step</a> <a id="4506" class="Symbol">(</a><a id="4507" href="Type.CK.html#4507" class="Bound">s</a> <a id="4509" href="Type.CK.html#3691" class="InductiveConstructor Operator">▻</a> <a id="4511" class="Symbol">(</a><a id="4512" href="Type.CK.html#4512" class="Bound">A</a> <a id="4514" href="Type.html#2137" class="InductiveConstructor Operator">⇒</a> <a id="4516" href="Type.CK.html#4516" class="Bound">B</a><a id="4517" class="Symbol">))</a>                  <a id="4537" class="Symbol">=</a> <a id="4539" href="Data.Product.html#2196" class="Function Operator">-,</a> <a id="4542" class="Symbol">(</a><a id="4543" href="Type.CK.html#4507" class="Bound">s</a> <a id="4545" href="Type.CK.html#2724" class="InductiveConstructor Operator">,</a> <a id="4547" href="Type.CK.html#1705" class="InductiveConstructor Operator">-⇒</a> <a id="4550" href="Type.CK.html#4516" class="Bound">B</a><a id="4551" class="Symbol">)</a> <a id="4553" href="Type.CK.html#3691" class="InductiveConstructor Operator">▻</a> <a id="4555" href="Type.CK.html#4512" class="Bound">A</a>
<a id="4557" href="Type.CK.html#4411" class="Function">step</a> <a id="4562" class="Symbol">(</a><a id="4563" href="Type.CK.html#4563" class="Bound">s</a> <a id="4565" href="Type.CK.html#3691" class="InductiveConstructor Operator">▻</a> <a id="4567" href="Type.html#2198" class="InductiveConstructor">ƛ</a> <a id="4569" href="Type.CK.html#4569" class="Bound">A</a><a id="4570" class="Symbol">)</a>                      <a id="4593" class="Symbol">=</a> <a id="4595" href="Data.Product.html#2196" class="Function Operator">-,</a> <a id="4598" href="Type.CK.html#4563" class="Bound">s</a> <a id="4600" href="Type.CK.html#3730" class="InductiveConstructor Operator">◅</a> <a id="4602" href="Type.Reduction.html#1026" class="InductiveConstructor">V-ƛ</a> <a id="4606" href="Type.CK.html#4569" class="Bound">A</a>
<a id="4608" href="Type.CK.html#4411" class="Function">step</a> <a id="4613" class="Symbol">(</a><a id="4614" href="Type.CK.html#4614" class="Bound">s</a> <a id="4616" href="Type.CK.html#3691" class="InductiveConstructor Operator">▻</a> <a id="4618" class="Symbol">(</a><a id="4619" href="Type.CK.html#4619" class="Bound">A</a> <a id="4621" href="Type.html#2253" class="InductiveConstructor Operator">·</a> <a id="4623" href="Type.CK.html#4623" class="Bound">B</a><a id="4624" class="Symbol">))</a>                  <a id="4644" class="Symbol">=</a> <a id="4646" href="Data.Product.html#2196" class="Function Operator">-,</a> <a id="4649" class="Symbol">(</a><a id="4650" href="Type.CK.html#4614" class="Bound">s</a> <a id="4652" href="Type.CK.html#2724" class="InductiveConstructor Operator">,</a> <a id="4654" href="Type.CK.html#1616" class="InductiveConstructor Operator">-·</a> <a id="4657" href="Type.CK.html#4623" class="Bound">B</a><a id="4658" class="Symbol">)</a> <a id="4660" href="Type.CK.html#3691" class="InductiveConstructor Operator">▻</a> <a id="4662" href="Type.CK.html#4619" class="Bound">A</a>
<a id="4664" href="Type.CK.html#4411" class="Function">step</a> <a id="4669" class="Symbol">(</a><a id="4670" href="Type.CK.html#4670" class="Bound">s</a> <a id="4672" href="Type.CK.html#3691" class="InductiveConstructor Operator">▻</a> <a id="4674" href="Type.html#2318" class="InductiveConstructor">μ</a> <a id="4676" href="Type.CK.html#4676" class="Bound">A</a> <a id="4678" href="Type.CK.html#4678" class="Bound">B</a><a id="4679" class="Symbol">)</a>                    <a id="4700" class="Symbol">=</a> <a id="4702" href="Data.Product.html#2196" class="Function Operator">-,</a> <a id="4705" class="Symbol">(</a><a id="4706" href="Type.CK.html#4670" class="Bound">s</a> <a id="4708" href="Type.CK.html#2724" class="InductiveConstructor Operator">,</a> <a id="4710" href="Type.CK.html#1784" class="InductiveConstructor Operator">μ-</a> <a id="4713" href="Type.CK.html#4678" class="Bound">B</a><a id="4714" class="Symbol">)</a> <a id="4716" href="Type.CK.html#3691" class="InductiveConstructor Operator">▻</a> <a id="4718" href="Type.CK.html#4676" class="Bound">A</a>
<a id="4720" href="Type.CK.html#4411" class="Function">step</a> <a id="4725" class="Symbol">(</a><a id="4726" href="Type.CK.html#4726" class="Bound">s</a> <a id="4728" href="Type.CK.html#3691" class="InductiveConstructor Operator">▻</a> <a id="4730" href="Type.html#2400" class="InductiveConstructor">con</a> <a id="4734" href="Type.CK.html#4734" class="Bound">c</a><a id="4735" class="Symbol">)</a>                    <a id="4756" class="Symbol">=</a> <a id="4758" href="Data.Product.html#2196" class="Function Operator">-,</a> <a id="4761" href="Type.CK.html#4726" class="Bound">s</a> <a id="4763" href="Type.CK.html#3730" class="InductiveConstructor Operator">◅</a> <a id="4765" href="Type.Reduction.html#1100" class="InductiveConstructor">V-con</a> <a id="4771" href="Type.CK.html#4734" class="Bound">c</a>
<a id="4773" href="Type.CK.html#4411" class="Function">step</a> <a id="4778" class="Symbol">(</a><a id="4779" href="Type.CK.html#2706" class="InductiveConstructor">ε</a> <a id="4781" href="Type.CK.html#3730" class="InductiveConstructor Operator">◅</a> <a id="4783" href="Type.CK.html#4783" class="Bound">V</a><a id="4784" class="Symbol">)</a>                        <a id="4809" class="Symbol">=</a> <a id="4811" href="Data.Product.html#2196" class="Function Operator">-,</a> <a id="4814" href="Type.CK.html#3786" class="InductiveConstructor">□</a> <a id="4816" href="Type.CK.html#4783" class="Bound">V</a>
<a id="4818" href="Type.CK.html#4411" class="Function">step</a> <a id="4823" class="Symbol">((</a><a id="4825" href="Type.CK.html#4825" class="Bound">s</a> <a id="4827" href="Type.CK.html#2724" class="InductiveConstructor Operator">,</a> <a id="4829" class="Symbol">(</a><a id="4830" href="Type.CK.html#1616" class="InductiveConstructor Operator">-·</a> <a id="4833" href="Type.CK.html#4833" class="Bound">B</a><a id="4834" class="Symbol">))</a> <a id="4837" href="Type.CK.html#3730" class="InductiveConstructor Operator">◅</a> <a id="4839" href="Type.CK.html#4839" class="Bound">V</a><a id="4840" class="Symbol">)</a>             <a id="4854" class="Symbol">=</a> <a id="4856" href="Data.Product.html#2196" class="Function Operator">-,</a> <a id="4859" class="Symbol">(</a><a id="4860" href="Type.CK.html#4825" class="Bound">s</a> <a id="4862" href="Type.CK.html#2724" class="InductiveConstructor Operator">,</a> <a id="4864" href="Type.CK.html#4839" class="Bound">V</a> <a id="4866" href="Type.CK.html#1653" class="InductiveConstructor Operator">·-</a><a id="4868" class="Symbol">)</a> <a id="4870" href="Type.CK.html#3691" class="InductiveConstructor Operator">▻</a> <a id="4872" href="Type.CK.html#4833" class="Bound">B</a>
<a id="4874" href="Type.CK.html#4411" class="Function">step</a> <a id="4879" class="Symbol">(</a><a id="4880" href="Type.CK.html#3730" class="InductiveConstructor Operator">_◅_</a> <a id="4884" class="Symbol">(</a><a id="4885" href="Type.CK.html#4885" class="Bound">s</a> <a id="4887" href="Type.CK.html#2724" class="InductiveConstructor Operator">,</a> <a id="4889" class="Symbol">(</a><a id="4890" href="Type.Reduction.html#1026" class="InductiveConstructor">V-ƛ</a> <a id="4894" href="Type.CK.html#4894" class="Bound">A</a> <a id="4896" href="Type.CK.html#1653" class="InductiveConstructor Operator">·-</a><a id="4898" class="Symbol">))</a> <a id="4901" href="Type.CK.html#4901" class="Bound">B</a><a id="4902" class="Symbol">)</a>       <a id="4910" class="Symbol">=</a> <a id="4912" href="Data.Product.html#2196" class="Function Operator">-,</a> <a id="4915" href="Type.CK.html#4885" class="Bound">s</a> <a id="4917" href="Type.CK.html#3691" class="InductiveConstructor Operator">▻</a> <a id="4919" class="Symbol">(</a><a id="4920" href="Type.CK.html#4894" class="Bound">A</a> <a id="4922" href="Type.RenamingSubstitution.html#4773" class="Function Operator">[</a> <a id="4924" href="Type.Reduction.html#1355" class="Function">discharge</a> <a id="4934" href="Type.CK.html#4901" class="Bound">B</a> <a id="4936" href="Type.RenamingSubstitution.html#4773" class="Function Operator">]</a><a id="4937" class="Symbol">)</a>
<a id="4939" href="Type.CK.html#4411" class="Function">step</a> <a id="4944" class="Symbol">((</a><a id="4946" href="Type.CK.html#4946" class="Bound">s</a> <a id="4948" href="Type.CK.html#2724" class="InductiveConstructor Operator">,</a> <a id="4950" class="Symbol">(</a><a id="4951" href="Type.CK.html#1705" class="InductiveConstructor Operator">-⇒</a> <a id="4954" href="Type.CK.html#4954" class="Bound">B</a><a id="4955" class="Symbol">))</a> <a id="4958" href="Type.CK.html#3730" class="InductiveConstructor Operator">◅</a> <a id="4960" href="Type.CK.html#4960" class="Bound">V</a><a id="4961" class="Symbol">)</a>             <a id="4975" class="Symbol">=</a> <a id="4977" href="Data.Product.html#2196" class="Function Operator">-,</a> <a id="4980" class="Symbol">(</a><a id="4981" href="Type.CK.html#4946" class="Bound">s</a> <a id="4983" href="Type.CK.html#2724" class="InductiveConstructor Operator">,</a> <a id="4985" href="Type.CK.html#4960" class="Bound">V</a> <a id="4987" href="Type.CK.html#1736" class="InductiveConstructor Operator">⇒-</a><a id="4989" class="Symbol">)</a> <a id="4991" href="Type.CK.html#3691" class="InductiveConstructor Operator">▻</a> <a id="4993" href="Type.CK.html#4954" class="Bound">B</a>
<a id="4995" href="Type.CK.html#4411" class="Function">step</a> <a id="5000" class="Symbol">((</a><a id="5002" href="Type.CK.html#5002" class="Bound">s</a> <a id="5004" href="Type.CK.html#2724" class="InductiveConstructor Operator">,</a> <a id="5006" class="Symbol">(</a><a id="5007" href="Type.CK.html#5007" class="Bound">V</a> <a id="5009" href="Type.CK.html#1736" class="InductiveConstructor Operator">⇒-</a><a id="5011" class="Symbol">))</a> <a id="5014" href="Type.CK.html#3730" class="InductiveConstructor Operator">◅</a> <a id="5016" href="Type.CK.html#5016" class="Bound">W</a><a id="5017" class="Symbol">)</a>             <a id="5031" class="Symbol">=</a> <a id="5033" href="Data.Product.html#2196" class="Function Operator">-,</a> <a id="5036" href="Type.CK.html#5002" class="Bound">s</a> <a id="5038" href="Type.CK.html#3730" class="InductiveConstructor Operator">◅</a> <a id="5040" class="Symbol">(</a><a id="5041" href="Type.CK.html#5007" class="Bound">V</a> <a id="5043" href="Type.Reduction.html#937" class="InductiveConstructor Operator">V-⇒</a> <a id="5047" href="Type.CK.html#5016" class="Bound">W</a><a id="5048" class="Symbol">)</a>
<a id="5050" href="Type.CK.html#4411" class="Function">step</a> <a id="5055" class="Symbol">((</a><a id="5057" href="Type.CK.html#5057" class="Bound">s</a> <a id="5059" href="Type.CK.html#2724" class="InductiveConstructor Operator">,</a> <a id="5061" href="Type.CK.html#1784" class="InductiveConstructor Operator">μ-</a> <a id="5064" href="Type.CK.html#5064" class="Bound">B</a><a id="5065" class="Symbol">)</a> <a id="5067" href="Type.CK.html#3730" class="InductiveConstructor Operator">◅</a> <a id="5069" href="Type.CK.html#5069" class="Bound">A</a><a id="5070" class="Symbol">)</a>               <a id="5086" class="Symbol">=</a> <a id="5088" href="Data.Product.html#2196" class="Function Operator">-,</a> <a id="5091" class="Symbol">(</a><a id="5092" href="Type.CK.html#5057" class="Bound">s</a> <a id="5094" href="Type.CK.html#2724" class="InductiveConstructor Operator">,</a> <a id="5096" href="Type.CK.html#1837" class="InductiveConstructor Operator">μ</a> <a id="5098" href="Type.CK.html#5069" class="Bound">A</a> <a id="5100" href="Type.CK.html#1837" class="InductiveConstructor Operator">-</a><a id="5101" class="Symbol">)</a> <a id="5103" href="Type.CK.html#3691" class="InductiveConstructor Operator">▻</a> <a id="5105" href="Type.CK.html#5064" class="Bound">B</a>
<a id="5107" href="Type.CK.html#4411" class="Function">step</a> <a id="5112" class="Symbol">((</a><a id="5114" href="Type.CK.html#5114" class="Bound">s</a> <a id="5116" href="Type.CK.html#2724" class="InductiveConstructor Operator">,</a> <a id="5118" href="Type.CK.html#1837" class="InductiveConstructor Operator">μ</a> <a id="5120" href="Type.CK.html#5120" class="Bound">A</a> <a id="5122" href="Type.CK.html#1837" class="InductiveConstructor Operator">-</a><a id="5123" class="Symbol">)</a> <a id="5125" href="Type.CK.html#3730" class="InductiveConstructor Operator">◅</a> <a id="5127" href="Type.CK.html#5127" class="Bound">B</a><a id="5128" class="Symbol">)</a>              <a id="5143" class="Symbol">=</a> <a id="5145" href="Data.Product.html#2196" class="Function Operator">-,</a> <a id="5148" href="Type.CK.html#5114" class="Bound">s</a> <a id="5150" href="Type.CK.html#3730" class="InductiveConstructor Operator">◅</a> <a id="5152" href="Type.Reduction.html#1179" class="InductiveConstructor">V-μ</a> <a id="5156" href="Type.CK.html#5120" class="Bound">A</a> <a id="5158" href="Type.CK.html#5127" class="Bound">B</a>
<a id="5160" href="Type.CK.html#4411" class="Function">step</a> <a id="5165" class="Symbol">(</a><a id="5166" href="Type.CK.html#3786" class="InductiveConstructor">□</a> <a id="5168" href="Type.CK.html#5168" class="Bound">V</a><a id="5169" class="Symbol">)</a>                          <a id="5196" class="Symbol">=</a> <a id="5198" href="Data.Product.html#2196" class="Function Operator">-,</a> <a id="5201" href="Type.CK.html#3786" class="InductiveConstructor">□</a> <a id="5203" href="Type.CK.html#5168" class="Bound">V</a>
</pre>

  </div>

</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/plutus-metatheory/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Plutus metatheory library</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Plutus metatheory library</li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/input-output-hk"><svg class="svg-icon"><use xlink:href="/plutus-metatheory/assets/minima-social-icons.svg#github"></use></svg> <span class="username">input-output-hk</span></a></li><li><a href="https://www.twitter.com/InputOutputHK"><svg class="svg-icon"><use xlink:href="/plutus-metatheory/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">InputOutputHK</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>
This repository contains a model of Plutus Core (PLC) written in Agda. We prove metatheoretic properties of the model in Agda and test the production PLC implementation against the model in Haskell by compiling the Agda code to Haskell and executing it.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
